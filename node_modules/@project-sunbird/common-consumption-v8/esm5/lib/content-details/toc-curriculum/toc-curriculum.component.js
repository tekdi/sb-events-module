/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, ViewChildren, QueryList, Output, EventEmitter } from '@angular/core';
import { MimeTypeMasterData } from '../../pipes-module/mime-type';
import { staticData } from './toc-data';
var TocCurriculumComponent = /** @class */ (function () {
    function TocCurriculumComponent() {
        var _this = this;
        this.tocData = staticData;
        this.activeMimeTypeFilter = ['all'];
        this.noContentMessage = 'No content available';
        this.isAccordion = false;
        this.isChapterListing = false;
        this.type = undefined;
        this.contentStatus = [];
        this.shadowColor = "hsl(0, 0%, 80%)";
        this.progressColor = "#024f9d";
        this.layoutConfig = {};
        this.disabled = '';
        this.tocCardClick = new EventEmitter();
        this.noContent = new EventEmitter();
        this.scoreLabel = '';
        this.isMimeTypeFilterChanged = false;
        this.isSameMimeTypeInChildren = ((/**
         * @param {?} mimeTypesCount
         * @param {?} activeMimeType
         * @return {?}
         */
        function (mimeTypesCount, activeMimeType) {
            /** @type {?} */
            var contentMimeType = Object.keys(JSON.parse(mimeTypesCount));
            return Boolean(activeMimeType.filter((/**
             * @param {?} value
             * @return {?}
             */
            function (value) { return contentMimeType.includes(value); })).length);
        }));
        this.isSameMimeType = (/**
         * @param {?} currentContent
         * @return {?}
         */
        function (currentContent) { return _this.activeMimeTypeFilter.find((/**
         * @param {?} mimeType
         * @return {?}
         */
        function (mimeType) { return mimeType === currentContent.mimeType; })); });
        this.isChildrenPresent = (/**
         * @param {?} currentContent
         * @return {?}
         */
        function (currentContent) { return Boolean(currentContent.children && currentContent.children.length); });
    }
    Object.defineProperty(TocCurriculumComponent.prototype, "MimeTypeMasterData", {
        get: /**
         * @return {?}
         */
        function () { return MimeTypeMasterData; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TocCurriculumComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.setActiveContent();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TocCurriculumComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.activeMimeTypeFilter) {
            this.isMimeTypeFilterChanged = false;
        }
        else if (changes.tocData) {
            this.setActiveContent();
        }
    };
    /**
     * @return {?}
     */
    TocCurriculumComponent.prototype.setActiveContent = /**
     * @return {?}
     */
    function () {
        if (this.tocData && this.tocData.children) {
            /** @type {?} */
            var flattenDeepContents = this.flattenDeep(this.tocData.children);
            this.activeContent = this.firstNonCollectionContent(flattenDeepContents);
            if (!this.activeContent) {
                this.noContent.emit({ message: 'No Content Available' });
            }
        }
    };
    /**
     * @param {?} content
     * @return {?}
     */
    TocCurriculumComponent.prototype.filterChildren = /**
     * @param {?} content
     * @return {?}
     */
    function (content) {
        // Check for the ActiveMimeType
        if (this.activeMimeTypeFilter.includes('all')) {
            if (content.mimeType === MimeTypeMasterData.COLLECTION) {
                return this.isShowContent(content, true);
            }
            return true; // Return true for all the content except collection mimeType
        }
        else if (content.mimeType && this.isSameMimeType(content)) {
            return true;
        }
        else if (content.mimeType === MimeTypeMasterData.COLLECTION) {
            return this.isShowContent(content, false);
        }
        else {
            return false;
        }
    };
    /**
     * @private
     * @param {?} content
     * @param {?} isActiveFilterAll
     * @return {?}
     */
    TocCurriculumComponent.prototype.isShowContent = /**
     * @private
     * @param {?} content
     * @param {?} isActiveFilterAll
     * @return {?}
     */
    function (content, isActiveFilterAll) {
        var _this = this;
        if (content.mimeTypesCount && !isActiveFilterAll) {
            return this.isSameMimeTypeInChildren(content.mimeTypesCount, this.activeMimeTypeFilter);
        }
        else if (this.isChildrenPresent(content)) {
            /** @type {?} */
            var contentList = this.flattenDeep(content.children);
            return isActiveFilterAll ? contentList.some((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.mimeType !== MimeTypeMasterData.COLLECTION; })) :
                contentList.some((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) { return _this.isSameMimeType(c); }));
        }
        else {
            return false;
        }
    };
    /**
     * @param {?} event
     * @param {?} item
     * @return {?}
     */
    TocCurriculumComponent.prototype.onTocChapterClick = /**
     * @param {?} event
     * @param {?} item
     * @return {?}
     */
    function (event, item) {
        /*const rollup = this.getRollup(this.tocData, event.data.sbUniqueIdentifier);
        if (rollup.length) {
          rollup.pop();
        }*/
        this.tocCardClick.emit(tslib_1.__assign({}, event, { item: item }));
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TocCurriculumComponent.prototype.onTocCardClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var rollup = this.getRollup(this.tocData, event.data.sbUniqueIdentifier);
        if (rollup.length) {
            rollup.pop();
        }
        this.tocCardClick.emit(tslib_1.__assign({}, event, { rollup: rollup }));
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TocCurriculumComponent.prototype.collapsedChangeHandler = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
    };
    /**
     * @private
     * @param {?} contents
     * @return {?}
     */
    TocCurriculumComponent.prototype.firstNonCollectionContent = /**
     * @private
     * @param {?} contents
     * @return {?}
     */
    function (contents) {
        return contents.find((/**
         * @param {?} content
         * @return {?}
         */
        function (content) { return content.mimeType !== 'application/vnd.ekstep.content-collection'; }));
    };
    /**
     * @private
     * @param {?} contents
     * @return {?}
     */
    TocCurriculumComponent.prototype.flattenDeep = /**
     * @private
     * @param {?} contents
     * @return {?}
     */
    function (contents) {
        var _this = this;
        if (contents) {
            return contents.reduce((/**
             * @param {?} acc
             * @param {?} val
             * @return {?}
             */
            function (acc, val) {
                if (val.children) {
                    acc.push(val);
                    return acc.concat(_this.flattenDeep(val.children));
                }
                else {
                    return acc.concat(val);
                }
            }), []);
        }
    };
    /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    TocCurriculumComponent.prototype.isExpanded = /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    function (index, item) {
        return Boolean(index === 0 || item && item.mimeType !== MimeTypeMasterData.COLLECTION);
    };
    /**
     * @param {?} item
     * @param {?} index
     * @return {?}
     */
    TocCurriculumComponent.prototype.isShowBody = /**
     * @param {?} item
     * @param {?} index
     * @return {?}
     */
    function (item, index) {
        var _this = this;
        if (item) {
            /** @type {?} */
            var isShowAllMimeType = (/**
             * @return {?}
             */
            function () { return _this.activeMimeTypeFilter.indexOf('all') > -1; });
            /** @type {?} */
            var isCollection = (/**
             * @return {?}
             */
            function () { return item.mimeType === MimeTypeMasterData.COLLECTION; });
            /** @type {?} */
            var isMathchesMimeType = (/**
             * @return {?}
             */
            function () { return _this.activeMimeTypeFilter.indexOf(item.mimeType) > -1; });
            /** @type {?} */
            var isLastContent = (/**
             * @return {?}
             */
            function () { return _this.tocData.children.length === index + 1; });
            if (this.tocData && isShowAllMimeType() || (isCollection() || isMathchesMimeType())) {
                this.isMimeTypeFilterChanged = true;
                return true;
            }
            else if (this.activeMimeTypeFilter.indexOf(item.mimeType) < 0 && !isLastContent()) {
                return false;
            }
            else if (this.activeMimeTypeFilter.indexOf(item.mimeType) < 0 && isLastContent()) {
                if (this.isMimeTypeFilterChanged) {
                    return false;
                }
                this.isMimeTypeFilterChanged = false;
                return true;
            }
        }
        return false;
    };
    /**
     * @param {?} tree
     * @param {?} identifier
     * @return {?}
     */
    TocCurriculumComponent.prototype.getRollup = /**
     * @param {?} tree
     * @param {?} identifier
     * @return {?}
     */
    function (tree, identifier) {
        /** @type {?} */
        var rollup = [tree.identifier];
        if (tree.sbUniqueIdentifier === identifier) {
            return rollup;
        }
        if (!tree.children || !tree.children.length) {
            return [];
        }
        /** @type {?} */
        var notDone = true;
        /** @type {?} */
        var childRollup;
        /** @type {?} */
        var index = 0;
        while (notDone && tree.children[index]) {
            childRollup = this.getRollup(tree.children[index], identifier);
            if (childRollup && childRollup.length) {
                notDone = false;
            }
            index++;
        }
        if (childRollup && childRollup.length) {
            rollup.push.apply(rollup, tslib_1.__spread(childRollup));
            return rollup;
        }
        else {
            return [];
        }
    };
    /**
     * @param {?} tocData
     * @param {?} item
     * @return {?}
     */
    TocCurriculumComponent.prototype.createUniqueId = /**
     * @param {?} tocData
     * @param {?} item
     * @return {?}
     */
    function (tocData, item) {
        item['sbUniqueIdentifier'] = tocData.identifier + '_' + item.identifier;
    };
    /**
     * @param {?=} item
     * @return {?}
     */
    TocCurriculumComponent.prototype.fetchProgress = /**
     * @param {?=} item
     * @return {?}
     */
    function (item) {
        /** @type {?} */
        var bgColor = this.progressColor;
        /** @type {?} */
        var widthStyle = item.progressPercentage != null ? item.progressPercentage + "%" : "2%";
        return {
            width: widthStyle,
            'background-color': bgColor
        };
    };
    /**
     * @param {?=} item
     * @return {?}
     */
    TocCurriculumComponent.prototype.showCompleted = /**
     * @param {?=} item
     * @return {?}
     */
    function (item) {
        if (item != null && item.progressPercentage != null && item.progressPercentage === 100) {
            return true;
        }
        return false;
    };
    /**
     * @param {?} item
     * @return {?}
     */
    TocCurriculumComponent.prototype.fetchProgressShadow = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        /** @type {?} */
        var bgColor = this.shadowColor;
        /** @type {?} */
        var displayStatus = item.progressPercentage != null && item.progressPercentage != "0" ? 'block' : 'none';
        return {
            'background': bgColor,
            display: displayStatus
        };
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TocCurriculumComponent.prototype.onPlayButtonClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var rollup = this.getRollup(this.tocData, event.data.sbUniqueIdentifier);
        if (rollup.length) {
            rollup.pop();
        }
        this.tocCardClick.emit(tslib_1.__assign({}, event, { rollup: rollup }));
    };
    TocCurriculumComponent.decorators = [
        { type: Component, args: [{
                    selector: 'sb-toc-curriculum',
                    template: "<div *ngIf=\"isAccordion\">\r\n    <div class=\"\" *ngIf=\"tocData?.mimeType === MimeTypeMasterData?.COLLECTION\">\r\n      <sb-toc-item *ngIf=\"type\" [tocData]=\"tocData\" [type]=\"type\" [recogniseCollection]=\"true\"\r\n       (tocCardClick)=\"onTocCardClick($event)\" [contentStatus]=\"contentStatus\" (playButtonClick)=\"onPlayButtonClick($event)\">\r\n      </sb-toc-item>\r\n      <sb-toc-item *ngIf=\"!type\" [tocData]=\"tocData\" [recogniseCollection]=\"true\"></sb-toc-item>\r\n    </div>\r\n    <div class=\"\" *ngIf=\"tocData?.mimeType !== MimeTypeMasterData?.COLLECTION\">\r\n        <sb-toc-card *ngIf=\"type\" [content]=\"tocData\" [type]=\"type\" (tocCardClick)=\"onTocCardClick($event)\"[platform]=\"platform\"\r\n         [activeContent]=\"activeContent\" [contentStatus]=\"contentStatus\" [playBtnConfig]=\"playBtnConfig\" (playButtonClick)=\"onPlayButtonClick($event)\"\r\n         [trackableDefaultImage]=\"trackableDefaultImage\" [scoreLabel]=\"scoreLabel\" [maxAttempts]=\"maxAttempts\" [disabled]=\"disabled\">\r\n          </sb-toc-card>\r\n          <sb-toc-card *ngIf=\"!type\" [content]=\"tocData\"  (tocCardClick)=\"onTocCardClick($event)\" [platform]=\"platform\"\r\n            [activeContent]=\"activeContent\" [playBtnConfig]=\"playBtnConfig\" (playButtonClick)=\"onPlayButtonClick($event)\"\r\n            [trackableDefaultImage]=\"trackableDefaultImage\" [scoreLabel]=\"scoreLabel\" [maxAttempts]=\"maxAttempts\" [disabled]=\"disabled\">\r\n          </sb-toc-card>\r\n    </div>\r\n</div>\r\n<div  *ngIf=\"isChapterListing\">\r\n  <div class=\"sb-curiculum-responsive-grid\">\r\n    <div class=\"sb-curiculum__border\" *ngFor=\"let item of tocData?.children; let index = index;\" (click)=\"onTocChapterClick($event,item)\">\r\n      {{ createUniqueId(tocData, item) }}\r\n      <div class=\"sb-curiculum\" style=\"border:none;\">\r\n      <div class=\"sb--completed\" *ngIf=\"showCompleted(item)\">\r\n          <img alt=\"\" src=\"assets/common-consumption/images/completed.svg\" />\r\n      </div>\r\n      <div class=\"sb-curiculum__chapter\">\r\n        <div class=\"title\">{{item?.name}}</div>\r\n      </div>\r\n      </div>\r\n      <div class=\"sb--card__progressbar\" [ngStyle]=\"fetchProgressShadow(item)\">\r\n        <span [ngStyle]=\"fetchProgress(item)\"></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"\" *ngIf=\"!isAccordion && !isChapterListing\">\r\n  \r\n  <div class=\"\">\r\n      <div class=\"sb-curiculum\" *ngFor=\"let item of tocData?.children; let index = index;\">\r\n      {{ createUniqueId(tocData, item) }}\r\n      <div class=\"sb-curiculum__chapter\" *ngIf=\"item?.mimeType === MimeTypeMasterData?.COLLECTION && item?.contentType !== 'TextBook' && item?.contentType !== 'Course'\" \r\n         (click)=\"onTocChapterClick($event,item)\">\r\n        <div class=\"title\">{{item?.name}}</div>\r\n        <div *ngIf=\"item && (item | hasMimeType: activeMimeTypeFilter);else noContent\" #chapterContainer>\r\n          <ng-container *ngIf=\"item?.mimeType !== MimeTypeMasterData?.COLLECTION && !item?.children?.length\" >\r\n            <div class=\"child-content-padding\">\r\n              <sb-toc-card *ngIf=\"type\" [content]=\"item\" [type]=\"type\" (tocCardClick)=\"onTocCardClick($event)\" [platform]=\"platform\"\r\n               [activeContent]=\"activeContent\" [contentStatus]=\"contentStatus\" [playBtnConfig]=\"playBtnConfig\" (playButtonClick)=\"onPlayButtonClick($event)\"\r\n               [trackableDefaultImage]=\"trackableDefaultImage\" [scoreLabel]=\"scoreLabel\" [maxAttempts]=\"maxAttempts\" [disabled]=\"disabled\">\r\n              </sb-toc-card>\r\n              <sb-toc-card *ngIf=\"!type\" [content]=\"item\" (tocCardClick)=\"onTocCardClick($event)\" [platform]=\"platform\"\r\n                [activeContent]=\"activeContent\" [playBtnConfig]=\"playBtnConfig\" (playButtonClick)=\"onPlayButtonClick($event)\"\r\n                [trackableDefaultImage]=\"trackableDefaultImage\" [scoreLabel]=\"scoreLabel\" [maxAttempts]=\"maxAttempts\" [disabled]=\"disabled\">\r\n              </sb-toc-card>\r\n            </div>\r\n          </ng-container>\r\n          <ng-container *ngIf=\"item?.children?.length\">\r\n            <ng-container *ngFor=\"let child of item?.children; let j = index;\">\r\n              {{ createUniqueId(item, child) }}\r\n              <div class=\"sbchapter\" *ngIf=\"filterChildren(child) && child.item?.contentType === 'TextBook'\">\r\n                <sb-library-card></sb-library-card>\r\n              </div>\r\n              <div class=\"sbchapter\" *ngIf=\"filterChildren(child) && child.item?.contentType === 'Course'\">\r\n                <sb-course-card></sb-course-card>\r\n              </div>\r\n              <div class=\"sbchapter\" *ngIf=\"filterChildren(child)\">\r\n                <sb-toc-child-item *ngIf=\"type\" [childData]=\"child\" [type]=\"type\" [activeMimeTypeFilter]=\"activeMimeTypeFilter\"\r\n                  [activeContent]=\"activeContent\" [contentStatus]=\"contentStatus\" (tocCardClick)=\"onTocCardClick($event)\" \r\n                  [playBtnConfig]=\"playBtnConfig\" (playButtonClick)=\"onPlayButtonClick($event)\" [platform]=\"platform\"\r\n                  [trackableDefaultImage]=\"trackableDefaultImage\">\r\n                </sb-toc-child-item>\r\n                <sb-toc-child-item *ngIf=\"!type\" [childData]=\"child\" [activeMimeTypeFilter]=\"activeMimeTypeFilter\"\r\n                  [activeContent]=\"activeContent\" (tocCardClick)=\"onTocCardClick($event)\" [playBtnConfig]=\"playBtnConfig\"\r\n                  (playButtonClick)=\"onPlayButtonClick($event)\" [platform]=\"platform\" [trackableDefaultImage]=\"trackableDefaultImage\">\r\n                </sb-toc-child-item>\r\n              </div>\r\n            </ng-container>\r\n          </ng-container>\r\n        </div>\r\n        <ng-template #noContent>\r\n          <div class=\"heading\">{{noContentMessage}}</div>\r\n        </ng-template>\r\n      </div>\r\n      <div class=\"sb-curiculum__chapter\" *ngIf=\"item?.mimeType !== MimeTypeMasterData?.COLLECTION\">\r\n          <sb-toc-card *ngIf=\"type\" [content]=\"item\" [type]=\"type\" (tocCardClick)=\"onTocCardClick($event)\" [platform]=\"platform\"\r\n          [activeContent]=\"activeContent\" [contentStatus]=\"contentStatus\" [playBtnConfig]=\"playBtnConfig\" (playButtonClick)=\"onPlayButtonClick($event)\"\r\n          [trackableDefaultImage]=\"trackableDefaultImage\" [scoreLabel]=\"scoreLabel\" [maxAttempts]=\"maxAttempts\" [disabled]=\"disabled\">\r\n            </sb-toc-card>\r\n      </div>\r\n      <div class=\"sb-curiculum__chapter\" *ngIf=\"item?.mimeType === MimeTypeMasterData?.COLLECTION && item?.contentType === 'TextBook'\">\r\n          <sb-library-card [content]=\"item\"></sb-library-card>\r\n      </div>\r\n      <div class=\"sb-curiculum__chapter\" *ngIf=\"item?.mimeType === MimeTypeMasterData?.COLLECTION && item?.contentType === 'Course'\">\r\n          <sb-course-card [course]=\"item\"></sb-course-card>\r\n        </div>\r\n    </div>\r\n    </div>\r\n</div>",
                    styles: [".sb--card__progressbar{margin:1rem!important;width:unset!important}.sb-curiculum-responsive-grid{padding:.5rem .5rem 1rem;display:block}.sb-curiculum-responsive-grid .sb-curiculum__border{background:var(--white);box-shadow:0 2px 7px rgba(var(--rc-rgba-black),.16);margin:.5rem 0;padding:.125rem 0}.sb-curiculum-responsive-grid .sb-curiculum__border.active,.sb-curiculum-responsive-grid .sb-curiculum__border:active,.sb-curiculum-responsive-grid .sb-curiculum__border:hover{box-shadow:0 2px 7px rgba(var(--rc-009D53),.65)}.sb-curiculum-responsive-grid .sb-curiculum__border .sb-curiculum.active,.sb-curiculum-responsive-grid .sb-curiculum__border .sb-curiculum:active,.sb-curiculum-responsive-grid .sb-curiculum__border .sb-curiculum:hover{box-shadow:none}.sb-curiculum-responsive-grid .sb-curiculum{position:relative;border-radius:.5rem;padding:.5rem 2.125rem 0 1rem;border:1px solid var(--primary-200);background:var(--white);font-weight:700;display:flex;min-height:48px;flex-direction:column}.sb-curiculum-responsive-grid .sb-curiculum.active,.sb-curiculum-responsive-grid .sb-curiculum:active,.sb-curiculum-responsive-grid .sb-curiculum:hover{box-shadow:0 2px 7px rgba(var(--rc-009D53),.65)}.sb-curiculum-responsive-grid .sb-curiculum__chapter{display:flex;align-items:flex-start;flex:1}.sb-curiculum-responsive-grid .sb-curiculum__chapter .title{font-size:.875rem;color:#3a3a3a;line-height:1.25rem;display:-webkit-box;-webkit-line-clamp:3;overflow:hidden;text-overflow:ellipsis;word-break:break-all}.sb-curiculum-responsive-grid .sb--completed{position:absolute;top:.875rem;right:.5rem}", ".loading-animation{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:placeload;animation-name:placeload;-webkit-animation-timing-function:linear;animation-timing-function:linear;background:var(--lazyload-bg);background:var(--grey-nuance-lighter);background:linear-gradient(to right,var(--grey-nuance-lighter) 8%,var(--grey-nuance-darker) 18%,var(--grey-nuance-lighter) 33%);background-size:75rem 6.5rem;position:relative}@-webkit-keyframes placeload{0%{background-position:-29.25rem 0}100%{background-position:29.25rem 0}}@keyframes placeload{0%{background-position:-29.25rem 0}100%{background-position:29.25rem 0}}.sb--card--highlighter{height:.75rem;width:100%;margin-top:.3125rem}:host .layout-library{display:flex;flex-direction:column}:host .header{display:flex;flex-direction:row;padding:0;align-items:center}[dir=ltr] :host .header,[dir=rtl] :host .header{margin:1.5rem 0 1rem}:host .header .title{font-family:inherit;text-overflow:ellipsis;overflow:hidden;flex:1;height:1.5rem;color:var(--primary-color);font-size:1.125rem;font-weight:700;text-transform:capitalize;line-height:1.625rem;display:flex;align-items:center}:host .header .title i{vertical-align:middle;height:1.0625rem;width:.875rem;top:0}[dir=ltr] :host .header .title i{margin-right:.5rem}[dir=rtl] :host .header .title i{margin-left:.5rem}:host .header .title .badge{display:inline-block;background:var(--rc-d4d3d3);color:var(--gray-800);text-align:center;padding:0 .75rem;border-radius:.25rem;height:1.5rem;line-height:1.5rem;font-size:1rem;font-weight:400}[dir=ltr] :host .header .title .badge{margin-left:.5rem}[dir=rtl] :host .header .title .badge{margin-right:.5rem}:host .cards-containers{display:-ms-grid;display:grid;grid-template-columns:repeat(auto-fill,minmax(292px,1fr));grid-gap:1rem;grid-row-gap:1.5rem}:host .cards-containers--show-1{grid-template-columns:repeat(auto-fill,minmax(calc(100% / 1.5),1fr))}:host .cards-containers--show-2{grid-template-columns:repeat(auto-fill,minmax(calc(100% / 2.5),1fr))}:host .cards-containers--show-3{grid-template-columns:repeat(auto-fill,minmax(calc(100% / 3.5),1fr))}:host .cards-containers--show-4{grid-template-columns:repeat(auto-fill,minmax(calc(100% / 4.5),1fr))}:host .cards-containers--show-5{grid-template-columns:repeat(auto-fill,minmax(calc(100% / 5.5),1fr))}:host .cards-container{display:flex;flex-direction:row;flex-wrap:wrap;margin:-1.5rem -.5rem 0}:host .cards-container .item{box-sizing:border-box;margin-top:1.5rem}[dir=ltr] :host .cards-container .item,[dir=rtl] :host .cards-container .item{padding:0 .5rem}@media (max-width:767px){:host .cards-container .item{margin-top:1rem}}:host .cards-container .item.show-1{max-width:100%}:host .cards-container .item.show-2{flex:0 0 50%;max-width:50%}:host .cards-container .item.show-3{flex:0 0 33.33%;max-width:33.33%}:host .cards-container .item.show-4{flex:0 0 25%;max-width:25%}:host .cards-container .item.show-5{flex:0 0 20%;max-width:20%}@media (max-width:991px){:host .cards-containers--show-3,:host .cards-containers--show-4,:host .cards-containers--show-5{grid-template-columns:repeat(auto-fill,minmax(calc(100% / 2.5),1fr))}:host .cards-container .item.show-2,:host .cards-container .item.show-3,:host .cards-container .item.show-4,:host .cards-container .item.show-5{flex:0 0 50%;max-width:50%}}@media (max-width:575px){:host .cards-containers--show-2,:host .cards-containers--show-3,:host .cards-containers--show-4,:host .cards-containers--show-5{grid-template-columns:repeat(auto-fill,minmax(calc(100% / 1.5),1fr))}:host .cards-container .item.show-2,:host .cards-container .item.show-3,:host .cards-container .item.show-4,:host .cards-container .item.show-5{flex:0 0 100%;max-width:100%}}@media (min-width:992px) and (max-width:1279px){:host .cards-containers--show-4,:host .cards-containers--show-5{grid-template-columns:repeat(auto-fill,minmax(calc(100% / 3.5),1fr))}:host .cards-container .item.show-4,:host .cards-container .item.show-5{flex:0 0 33.33%;max-width:33.33%}}", ".loading-animation{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:placeload;animation-name:placeload;-webkit-animation-timing-function:linear;animation-timing-function:linear;background:var(--lazyload-bg);background:var(--grey-nuance-lighter);background:linear-gradient(to right,var(--grey-nuance-lighter) 8%,var(--grey-nuance-darker) 18%,var(--grey-nuance-lighter) 33%);background-size:75rem 6.5rem;position:relative}@-webkit-keyframes placeload{0%{background-position:-29.25rem 0}100%{background-position:29.25rem 0}}@keyframes placeload{0%{background-position:-29.25rem 0}100%{background-position:29.25rem 0}}.sb--card--highlighter{height:.75rem;width:100%;margin-top:.3125rem}:host .sb--card{width:100%;background-color:var(--white);display:flex;flex-direction:column;cursor:pointer;position:relative;margin-top:0;border:0;contain:content;border-radius:.125rem}:host .sb--card:hover{transform:translate(0,0);box-shadow:0 .125rem .4375rem 0 rgba(var(--rc-rgba-black),.16)}@media (max-width:767px){:host .sb--card{box-shadow:0 .125rem .4375rem rgba(var(--rc-rgba-black),.16)}}:host .sb--card__main-area{display:flex;flex-direction:row;align-items:center;height:5.5rem}:host .sb--card__img{height:4.5rem;width:4.5rem;overflow:hidden;flex:0 0 4.5rem;margin:.5rem}:host .sb--card__img .img-container{display:flex;align-items:center;background-color:var(--gray-100);height:4.5rem;width:4.5rem;justify-content:center}:host .sb--card__img .img-container img{max-width:100%}:host .sb--card__info{flex:1;overflow:hidden}[dir=ltr] :host .sb--card__info{padding-right:.5rem}[dir=rtl] :host .sb--card__info{padding-left:.5rem}:host .sb--card__title{color:var(--primary-color);font-size:.875rem;margin:0;line-height:1.25rem}:host .sb--card__meta1{color:var(--gray-800);font-size:.75rem;display:flex;flex-direction:row;align-items:center;flex:1;line-height:1.25rem;margin-top:.25rem}:host .sb--card .data_1{max-width:50%}:host .sb--card .data_2{flex:1}:host .sb--card .dot-divider{width:.25rem;height:.25rem;min-width:.25rem;max-width:.25rem;min-height:.25rem;max-height:.25rem;border-radius:100%;background-color:var(--gray-200);display:inline-block;margin:0 .5rem}:host .sb--card__moreinfo{border-radius:0 0 .125rem .125rem;background-color:var(--rc-FAFAFA);display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;min-height:3.5rem;border-top:0 solid #cacbce}:host .sb--card__meta2{color:var(--gray-800);font-size:.75rem;line-height:.875rem;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-around;padding:.5rem}:host .sb--card__meta2_data .label{font-weight:400}:host .sb--card__meta2_data .value{font-weight:700}:host .sb--card__org{color:var(--gray-200)}:host .sb--card__tags{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;flex:1}:host .sb--card__badge{display:flex}:host .sb--card__badge img{width:1.25rem;height:1.25rem}:host .sb--card__type{background:var(--gray-200);position:relative;height:1.25rem;color:var(--white);font-size:.625rem;display:flex;align-items:center}[dir=ltr] :host .sb--card__type{padding-left:.25rem;padding-right:.5rem;margin-left:1rem}[dir=rtl] :host .sb--card__type{padding-left:.5rem;padding-right:.25rem;margin-right:1rem}:host .sb--card__type:before{content:\"\";width:0;height:0;border-width:.625rem .3125rem;border-style:solid;border-color:var(--gray-200) var(--gray-200) var(--gray-200) transparent;position:absolute;left:-10px}html[dir=rtl] :host .sb--card__type:before{right:-.625rem;left:inherit;border-color:var(--gray-200) transparent var(--gray-200) var(--gray-200)}:host .sb--card--recently-viewed .sb--card__img{height:5.5rem;width:5.5rem;flex:0 0 5.5rem;margin:0}:host .sb--card--recently-viewed .sb--card__img .img-container{display:flex;align-items:center;background-color:var(--gray-100);height:5.5rem;width:5.5rem}:host .sb--card--recently-viewed .sb--card__info{padding:.5rem;flex:1}:host .sb--card.selected{border:1px solid #024f9d;border-radius:4px;background-color:rgba(2,79,157,.2)}:host .sb--card.offline .sb--card__img .img-container{display:flex;align-items:center;background-color:var(--tertiary-color);opacity:.5}:host .sb--card.offline .sb--card__img .img-container img{margin:auto;font-size:1.5rem;color:var(--white)}:host .sb--card.offline .sb--card__info,:host .sb--card.offline .sb--card__moreinfo{opacity:.5}:host .sb--card__progressbar{height:.25rem;margin:0;border-radius:0;box-shadow:inset 0 -.0625rem .0625rem rgba(var(--rc-rgba-white),.3);width:100%;background:var(--gray-100)}:host .sb--card__progressbar>span{display:block;height:100%;background-color:var(--secondary-200);background-image:-webkit-gradient(center bottom,var(--secondary-400),var(--secondary-200));box-shadow:inset 0 .125rem .5625rem var(--gray-100),inset 0 -.125rem .375rem rgba(var(--rc-rgba-black),.4);position:relative;overflow:hidden}:host .animate>span:after{content:\"\";position:absolute;top:0;left:0;bottom:0;right:0;background-image:-webkit-gradient(linear,0 0,100% 100%,color-stop(.25,rgba(var(--rc-rgba-white),.2)),color-stop(.25,transparent),color-stop(.5,transparent),color-stop(.5,rgba(var(--rc-rgba-white),.2)),color-stop(.75,rgba(var(--rc-rgba-white),.2)),color-stop(.75,transparent),to(transparent));z-index:1;background-size:3.125rem 3.125rem;overflow:hidden;-webkit-animation:2s linear infinite move;border-radius:1.25rem .5rem .5rem 1.25rem}@-webkit-keyframes move{0%{background-position:0 0}100%{background-position:3.125rem 3.125rem}}:host .completed>span{background-color:var(--secondary-color);background-image:-webkit-linear-gradient(var(--secondary-100),var(--secondary-400))}:host .inprogress>span{background-color:var(--tertiary-color);background-image:-webkit-linear-gradient(var(--tertiary-100),var(--tertiary-400))}:host .notcompleted>span{background-color:var(--red-100);background-image:-webkit-linear-gradient(var(--red-100),var(--red-400))}:host .nostripes>span,:host .nostripes>span:after{-webkit-animation:none;-moz-animation:none;background-image:none}:host .border-top-r-left-right{border-top-left-radius:0;border-top-right-radius:0}::ng-deep .card-hover{display:none;transition:.2s ease-in}::ng-deep .sb--card:hover .card-hover{display:block;z-index:1001}::ng-deep .sb--card:hover .card-hover .child-content{color:var(--white);position:absolute;left:0;right:0;top:0;bottom:0;opacity:.95;border-radius:.125rem;background-color:var(--primary-color);z-index:1;display:flex;align-items:center;transition:.2s ease-in;flex-direction:column;justify-content:space-evenly}::ng-deep .sb--card:hover .card-hover .action-container{display:flex;width:100%;justify-content:center;align-self:center;justify-self:center;flex:1;align-items:center}::ng-deep .sb--card:hover .card-hover .action-item{padding:0 1rem;flex:1;text-align:center}::ng-deep .sb--card:hover .card-hover .action-item .sb-btn.sb-btn-primary[disabled]{background-color:transparent;opacity:.5;border:0;color:var(--white)}::ng-deep .sb--card:hover .card-hover .action-item:not(:last-child){border-right:.0625rem solid rgba(var(--rc-rgba-white),.5)}::ng-deep .sb--card:hover .card-hover .hover-meta-info{font-size:.625rem;opacity:.8;color:var(--white);line-height:.75rem;flex:0 0 25%}.menu::after{content:'\\2807';font-size:1.5rem;color:var(--gray-200);text-align:center;align-items:center;display:flex;justify-content:center;border-radius:50%;padding-left:.375rem;cursor:pointer;width:2rem;height:2rem}.menu:hover::after{background:var(--gray-0)}"]
                }] }
    ];
    /** @nocollapse */
    TocCurriculumComponent.ctorParameters = function () { return []; };
    TocCurriculumComponent.propDecorators = {
        tocData: [{ type: Input }],
        activeMimeTypeFilter: [{ type: Input }],
        noContentMessage: [{ type: Input }],
        isAccordion: [{ type: Input }],
        isChapterListing: [{ type: Input }],
        type: [{ type: Input }],
        contentStatus: [{ type: Input }],
        shadowColor: [{ type: Input }],
        progressColor: [{ type: Input }],
        refresh: [{ type: Input }],
        layoutConfig: [{ type: Input }],
        playBtnConfig: [{ type: Input }],
        platform: [{ type: Input }],
        trackableDefaultImage: [{ type: Input }],
        maxAttempts: [{ type: Input }],
        disabled: [{ type: Input }],
        divs: [{ type: ViewChild, args: ['chapter', { static: false },] }],
        chapterContainer: [{ type: ViewChildren, args: ['chapterContainer',] }],
        activeContent: [{ type: Input }],
        tocCardClick: [{ type: Output }],
        noContent: [{ type: Output }],
        scoreLabel: [{ type: Input }]
    };
    return TocCurriculumComponent;
}());
export { TocCurriculumComponent };
if (false) {
    /** @type {?} */
    TocCurriculumComponent.prototype.tocData;
    /** @type {?} */
    TocCurriculumComponent.prototype.activeMimeTypeFilter;
    /** @type {?} */
    TocCurriculumComponent.prototype.noContentMessage;
    /** @type {?} */
    TocCurriculumComponent.prototype.isAccordion;
    /** @type {?} */
    TocCurriculumComponent.prototype.isChapterListing;
    /** @type {?} */
    TocCurriculumComponent.prototype.type;
    /** @type {?} */
    TocCurriculumComponent.prototype.contentStatus;
    /** @type {?} */
    TocCurriculumComponent.prototype.shadowColor;
    /** @type {?} */
    TocCurriculumComponent.prototype.progressColor;
    /** @type {?} */
    TocCurriculumComponent.prototype.refresh;
    /** @type {?} */
    TocCurriculumComponent.prototype.layoutConfig;
    /** @type {?} */
    TocCurriculumComponent.prototype.playBtnConfig;
    /** @type {?} */
    TocCurriculumComponent.prototype.platform;
    /** @type {?} */
    TocCurriculumComponent.prototype.trackableDefaultImage;
    /** @type {?} */
    TocCurriculumComponent.prototype.maxAttempts;
    /** @type {?} */
    TocCurriculumComponent.prototype.disabled;
    /** @type {?} */
    TocCurriculumComponent.prototype.divs;
    /** @type {?} */
    TocCurriculumComponent.prototype.chapterContainer;
    /** @type {?} */
    TocCurriculumComponent.prototype.activeContent;
    /** @type {?} */
    TocCurriculumComponent.prototype.tocCardClick;
    /** @type {?} */
    TocCurriculumComponent.prototype.noContent;
    /** @type {?} */
    TocCurriculumComponent.prototype.scoreLabel;
    /** @type {?} */
    TocCurriculumComponent.prototype.isMimeTypeFilterChanged;
    /**
     * @type {?}
     * @private
     */
    TocCurriculumComponent.prototype.isSameMimeTypeInChildren;
    /**
     * @type {?}
     * @private
     */
    TocCurriculumComponent.prototype.isSameMimeType;
    /**
     * @type {?}
     * @private
     */
    TocCurriculumComponent.prototype.isChildrenPresent;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9jLWN1cnJpY3VsdW0uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHByb2plY3Qtc3VuYmlyZC9jb21tb24tY29uc3VtcHRpb24tdjgvIiwic291cmNlcyI6WyJsaWIvY29udGVudC1kZXRhaWxzL3RvYy1jdXJyaWN1bHVtL3RvYy1jdXJyaWN1bHVtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkgsT0FBTyxFQUFnQixrQkFBa0IsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ2hGLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFHdEM7SUE0Q0U7UUFBQSxpQkFBaUI7UUFuQ1IsWUFBTyxHQUFHLFVBQVUsQ0FBQztRQUNyQix5QkFBb0IsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9CLHFCQUFnQixHQUFHLHNCQUFzQixDQUFDO1FBQzFDLGdCQUFXLEdBQVksS0FBSyxDQUFDO1FBQzdCLHFCQUFnQixHQUFZLEtBQUssQ0FBQztRQUNsQyxTQUFJLEdBQUcsU0FBUyxDQUFDO1FBQ2pCLGtCQUFhLEdBQUcsRUFBRSxDQUFDO1FBQ25CLGdCQUFXLEdBQUcsaUJBQWlCLENBQUM7UUFDaEMsa0JBQWEsR0FBRyxTQUFTLENBQUM7UUFFMUIsaUJBQVksR0FBRyxFQUFFLENBQUM7UUFLbEIsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUtiLGlCQUFZLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7UUFDckQsY0FBUyxHQUFzQixJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ25ELGVBQVUsR0FBRyxFQUFFLENBQUM7UUFJekIsNEJBQXVCLEdBQUcsS0FBSyxDQUFDO1FBRXhCLDZCQUF3QixHQUFHOzs7OztRQUFDLFVBQUMsY0FB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QThDOztpQkFJL0M7Ozs7OzBCQUdFLEtBQUs7dUNBQ0wsS0FBSzttQ0FDTCxLQUFLOzhCQUNMLEtBQUs7bUNBQ0wsS0FBSzt1QkFDTCxLQUFLO2dDQUNMLEtBQUs7OEJBQ0wsS0FBSztnQ0FDTCxLQUFLOzBCQUNMLEtBQUs7K0JBQ0wsS0FBSztnQ0FDTCxLQUFLOzJCQUNMLEtBQUs7d0NBQ0wsS0FBSzs4QkFDTCxLQUFLOzJCQUNMLEtBQUs7dUJBQ0wsU0FBUyxTQUFDLFNBQVMsRUFBQyxFQUFDLE1BQU0sRUFBQyxLQUFLLEVBQUM7bUNBQ2xDLFlBQVksU0FBQyxrQkFBa0I7Z0NBRS9CLEtBQUs7K0JBQ0wsTUFBTTs0QkFDTixNQUFNOzZCQUNOLEtBQUs7O0lBK0xSLDZCQUFDO0NBQUEsQUE5TkQsSUE4TkM7U0F2Tlksc0JBQXNCOzs7SUFFakMseUNBQThCOztJQUM5QixzREFBd0M7O0lBQ3hDLGtEQUFtRDs7SUFDbkQsNkNBQXNDOztJQUN0QyxrREFBMkM7O0lBQzNDLHNDQUEwQjs7SUFDMUIsK0NBQTRCOztJQUM1Qiw2Q0FBeUM7O0lBQ3pDLCtDQUFtQzs7SUFDbkMseUNBQTBCOztJQUMxQiw4Q0FBMkI7O0lBQzNCLCtDQUF1Qjs7SUFDdkIsMENBQWtCOztJQUNsQix1REFBK0I7O0lBQy9CLDZDQUFxQjs7SUFDckIsMENBQXVCOztJQUN2QixzQ0FBMEQ7O0lBQzFELGtEQUFtRTs7SUFFbkUsK0NBQXVCOztJQUN2Qiw4Q0FBK0Q7O0lBQy9ELDJDQUE0RDs7SUFDNUQsNENBQXlCOztJQUl6Qix5REFBZ0M7Ozs7O0lBRWhDLDBEQUdHOzs7OztJQUNILGdEQUE4SDs7Ozs7SUFDOUgsbURBQW1IIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBWaWV3Q2hpbGQsIFZpZXdDaGlsZHJlbiwgUXVlcnlMaXN0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNaW1lVHlwZVBpcGUsIE1pbWVUeXBlTWFzdGVyRGF0YSB9IGZyb20gJy4uLy4uL3BpcGVzLW1vZHVsZS9taW1lLXR5cGUnO1xyXG5pbXBvcnQge3N0YXRpY0RhdGF9IGZyb20gJy4vdG9jLWRhdGEnO1xyXG5pbXBvcnQgeyBpc05nVGVtcGxhdGUgfSBmcm9tICdAYW5ndWxhci9jb21waWxlcic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3NiLXRvYy1jdXJyaWN1bHVtJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vdG9jLWN1cnJpY3VsdW0uY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3RvYy1jdXJyaWN1bHVtLmNvbXBvbmVudC5zY3NzJyxcclxuICAnLi4vLi4vbGF5b3V0L2xpYnJhcnktY2FyZHMtZ3JpZC9saWJyYXJ5LWNhcmRzLWdyaWQuY29tcG9uZW50LnNjc3MnLFxyXG4gICcuLi8uLi9jYXJkL2xpYnJhcnktY2FyZC9saWJyYXJ5LWNhcmQuY29tcG9uZW50LnNjc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVG9jQ3VycmljdWx1bUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gIEBJbnB1dCgpIHRvY0RhdGEgPSBzdGF0aWNEYXRhO1xyXG4gIEBJbnB1dCgpIGFjdGl2ZU1pbWVUeXBlRmlsdGVyID0gWydhbGwnXTtcclxuICBASW5wdXQoKSBub0NvbnRlbnRNZXNzYWdlID0gJ05vIGNvbnRlbnQgYXZhaWxhYmxlJztcclxuICBASW5wdXQoKSBpc0FjY29yZGlvbjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIGlzQ2hhcHRlckxpc3Rpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKSB0eXBlID0gdW5kZWZpbmVkO1xyXG4gIEBJbnB1dCgpIGNvbnRlbnRTdGF0dXMgPSBbXTtcclxuICBASW5wdXQoKSBzaGFkb3dDb2xvciA9IFwiaHNsKDAsIDAlLCA4MCUpXCI7XHJcbiAgQElucHV0KCkgcHJvZ3Jlc3NDb2xvciA9IFwiIzAyNGY5ZFwiO1xyXG4gIEBJbnB1dCgpIHJlZnJlc2g6IGJvb2xlYW47XHJcbiAgQElucHV0KCkgbGF5b3V0Q29uZmlnID0ge307XHJcbiAgQElucHV0KCkgcGxheUJ0bkNvbmZpZztcclxuICBASW5wdXQoKSBwbGF0Zm9ybTtcclxuICBASW5wdXQoKSB0cmFja2FibGVEZWZhdWx0SW1hZ2U7XHJcbiAgQElucHV0KCkgbWF4QXR0ZW1wdHM7XHJcbiAgQElucHV0KCkgZGlzYWJsZWQgPSAnJztcclxuICBAVmlld0NoaWxkKCdjaGFwdGVyJyx7c3RhdGljOmZhbHNlfSkgZGl2czogUXVlcnlMaXN0PGFueT47XHJcbiAgQFZpZXdDaGlsZHJlbignY2hhcHRlckNvbnRhaW5lcicpIGNoYXB0ZXJDb250YWluZXI6IFF1ZXJ5TGlzdDxhbnk+O1xyXG5cclxuICBASW5wdXQoKSBhY3RpdmVDb250ZW50O1xyXG4gIEBPdXRwdXQoKSB0b2NDYXJkQ2xpY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBPdXRwdXQoKSBub0NvbnRlbnQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBJbnB1dCgpIHNjb3JlTGFiZWwgPSAnJztcclxuXHJcbiAgZ2V0IE1pbWVUeXBlTWFzdGVyRGF0YSgpIHsgcmV0dXJuIE1pbWVUeXBlTWFzdGVyRGF0YTsgfVxyXG5cclxuICBpc01pbWVUeXBlRmlsdGVyQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICBwcml2YXRlIGlzU2FtZU1pbWVUeXBlSW5DaGlsZHJlbiA9ICgobWltZVR5cGVzQ291bnQsIGFjdGl2ZU1pbWVUeXBlKSA9PiB7XHJcbiAgICBjb25zdCBjb250ZW50TWltZVR5cGUgPSBPYmplY3Qua2V5cyhKU09OLnBhcnNlKG1pbWVUeXBlc0NvdW50KSk7XHJcbiAgICByZXR1cm4gQm9vbGVhbihhY3RpdmVNaW1lVHlwZS5maWx0ZXIodmFsdWUgPT4gY29udGVudE1pbWVUeXBlLmluY2x1ZGVzKHZhbHVlKSkubGVuZ3RoKTtcclxuICB9KTtcclxuICBwcml2YXRlIGlzU2FtZU1pbWVUeXBlID0gKGN1cnJlbnRDb250ZW50KSA9PiB0aGlzLmFjdGl2ZU1pbWVUeXBlRmlsdGVyLmZpbmQobWltZVR5cGUgPT4gbWltZVR5cGUgPT09IGN1cnJlbnRDb250ZW50Lm1pbWVUeXBlKTtcclxuICBwcml2YXRlIGlzQ2hpbGRyZW5QcmVzZW50ID0gKGN1cnJlbnRDb250ZW50KSA9PiBCb29sZWFuKGN1cnJlbnRDb250ZW50LmNoaWxkcmVuICYmIGN1cnJlbnRDb250ZW50LmNoaWxkcmVuLmxlbmd0aCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5zZXRBY3RpdmVDb250ZW50KCk7XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XHJcbiAgICBpZiAoY2hhbmdlcy5hY3RpdmVNaW1lVHlwZUZpbHRlcikge1xyXG4gICAgICB0aGlzLmlzTWltZVR5cGVGaWx0ZXJDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICB9IGVsc2UgaWYgKGNoYW5nZXMudG9jRGF0YSkge1xyXG4gICAgICB0aGlzLnNldEFjdGl2ZUNvbnRlbnQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEFjdGl2ZUNvbnRlbnQoKSB7XHJcbiAgICBpZiAodGhpcy50b2NEYXRhICYmIHRoaXMudG9jRGF0YS5jaGlsZHJlbikge1xyXG4gICAgICBjb25zdCBmbGF0dGVuRGVlcENvbnRlbnRzID0gdGhpcy5mbGF0dGVuRGVlcCh0aGlzLnRvY0RhdGEuY2hpbGRyZW4pO1xyXG4gICAgICB0aGlzLmFjdGl2ZUNvbnRlbnQgPSB0aGlzLmZpcnN0Tm9uQ29sbGVjdGlvbkNvbnRlbnQoZmxhdHRlbkRlZXBDb250ZW50cyk7XHJcblxyXG4gICAgICBpZiAoIXRoaXMuYWN0aXZlQ29udGVudCkge1xyXG4gICAgICAgIHRoaXMubm9Db250ZW50LmVtaXQoeyBtZXNzYWdlOiAnTm8gQ29udGVudCBBdmFpbGFibGUnIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZmlsdGVyQ2hpbGRyZW4oY29udGVudCkge1xyXG4gICAgLy8gQ2hlY2sgZm9yIHRoZSBBY3RpdmVNaW1lVHlwZVxyXG4gICAgaWYgKHRoaXMuYWN0aXZlTWltZVR5cGVGaWx0ZXIuaW5jbHVkZXMoJ2FsbCcpKSB7XHJcbiAgICAgIGlmIChjb250ZW50Lm1pbWVUeXBlID09PSBNaW1lVHlwZU1hc3RlckRhdGEuQ09MTEVDVElPTikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzU2hvd0NvbnRlbnQoY29udGVudCwgdHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7IC8vIFJldHVybiB0cnVlIGZvciBhbGwgdGhlIGNvbnRlbnQgZXhjZXB0IGNvbGxlY3Rpb24gbWltZVR5cGVcclxuICAgIH0gZWxzZSBpZiAoY29udGVudC5taW1lVHlwZSAmJiB0aGlzLmlzU2FtZU1pbWVUeXBlKGNvbnRlbnQpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIGlmIChjb250ZW50Lm1pbWVUeXBlID09PSBNaW1lVHlwZU1hc3RlckRhdGEuQ09MTEVDVElPTikge1xyXG4gICAgICByZXR1cm4gdGhpcy5pc1Nob3dDb250ZW50KGNvbnRlbnQsIGZhbHNlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNTaG93Q29udGVudChjb250ZW50LCBpc0FjdGl2ZUZpbHRlckFsbCkge1xyXG4gICAgaWYgKGNvbnRlbnQubWltZVR5cGVzQ291bnQgJiYgIWlzQWN0aXZlRmlsdGVyQWxsKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmlzU2FtZU1pbWVUeXBlSW5DaGlsZHJlbihjb250ZW50Lm1pbWVUeXBlc0NvdW50LCB0aGlzLmFjdGl2ZU1pbWVUeXBlRmlsdGVyKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5pc0NoaWxkcmVuUHJlc2VudChjb250ZW50KSkge1xyXG4gICAgICBjb25zdCBjb250ZW50TGlzdCA9IHRoaXMuZmxhdHRlbkRlZXAoY29udGVudC5jaGlsZHJlbik7XHJcbiAgICAgIHJldHVybiBpc0FjdGl2ZUZpbHRlckFsbCA/IGNvbnRlbnRMaXN0LnNvbWUoKGMpID0+IGMubWltZVR5cGUgIT09IE1pbWVUeXBlTWFzdGVyRGF0YS5DT0xMRUNUSU9OKSA6XHJcbiAgICAgICAgY29udGVudExpc3Quc29tZSgoYykgPT4gdGhpcy5pc1NhbWVNaW1lVHlwZShjKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25Ub2NDaGFwdGVyQ2xpY2soZXZlbnQsaXRlbSkge1xyXG4gICAgLypjb25zdCByb2xsdXAgPSB0aGlzLmdldFJvbGx1cCh0aGlzLnRvY0RhdGEsIGV2ZW50LmRhdGEuc2JVbmlxdWVJZGVudGlmaWVyKTtcclxuICAgIGlmIChyb2xsdXAubGVuZ3RoKSB7XHJcbiAgICAgIHJvbGx1cC5wb3AoKTtcclxuICAgIH0qL1xyXG4gICAgdGhpcy50b2NDYXJkQ2xpY2suZW1pdCh7IC4uLmV2ZW50LCBpdGVtIH0pO1xyXG4gIH1cclxuICBwdWJsaWMgb25Ub2NDYXJkQ2xpY2soZXZlbnQpIHtcclxuICAgIGNvbnN0IHJvbGx1cCA9IHRoaXMuZ2V0Um9sbHVwKHRoaXMudG9jRGF0YSwgZXZlbnQuZGF0YS5zYlVuaXF1ZUlkZW50aWZpZXIpO1xyXG4gICAgaWYgKHJvbGx1cC5sZW5ndGgpIHtcclxuICAgICAgcm9sbHVwLnBvcCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy50b2NDYXJkQ2xpY2suZW1pdCh7IC4uLmV2ZW50LCByb2xsdXAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY29sbGFwc2VkQ2hhbmdlSGFuZGxlcihldmVudCkge1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBmaXJzdE5vbkNvbGxlY3Rpb25Db250ZW50KGNvbnRlbnRzKSB7XHJcbiAgICByZXR1cm4gY29udGVudHMuZmluZCgoY29udGVudCkgPT4gY29udGVudC5taW1lVHlwZSAhPT0gJ2FwcGxpY2F0aW9uL3ZuZC5la3N0ZXAuY29udGVudC1jb2xsZWN0aW9uJyk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGZsYXR0ZW5EZWVwKGNvbnRlbnRzKSB7XHJcbiAgICBpZiAoY29udGVudHMpIHtcclxuICAgICAgcmV0dXJuIGNvbnRlbnRzLnJlZHVjZSgoYWNjLCB2YWwpID0+IHtcclxuICAgICAgICBpZiAodmFsLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICBhY2MucHVzaCh2YWwpO1xyXG4gICAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQodGhpcy5mbGF0dGVuRGVlcCh2YWwuY2hpbGRyZW4pKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQodmFsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIFtdKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzRXhwYW5kZWQoaW5kZXg6IG51bWJlciwgaXRlbSkge1xyXG4gICAgcmV0dXJuIEJvb2xlYW4oaW5kZXggPT09IDAgfHwgaXRlbSAmJiBpdGVtLm1pbWVUeXBlICE9PSBNaW1lVHlwZU1hc3RlckRhdGEuQ09MTEVDVElPTik7XHJcbiAgfVxyXG5cclxuICBpc1Nob3dCb2R5KGl0ZW0sIGluZGV4KSB7XHJcbiAgICBpZiAoaXRlbSkge1xyXG4gICAgICBjb25zdCBpc1Nob3dBbGxNaW1lVHlwZSA9ICgpID0+IHRoaXMuYWN0aXZlTWltZVR5cGVGaWx0ZXIuaW5kZXhPZignYWxsJykgPiAtMTtcclxuICAgICAgY29uc3QgaXNDb2xsZWN0aW9uID0gKCkgPT4gaXRlbS5taW1lVHlwZSA9PT0gTWltZVR5cGVNYXN0ZXJEYXRhLkNPTExFQ1RJT047XHJcbiAgICAgIGNvbnN0IGlzTWF0aGNoZXNNaW1lVHlwZSA9ICgpID0+IHRoaXMuYWN0aXZlTWltZVR5cGVGaWx0ZXIuaW5kZXhPZihpdGVtLm1pbWVUeXBlKSA+IC0xO1xyXG4gICAgICBjb25zdCBpc0xhc3RDb250ZW50ID0gKCkgPT4gdGhpcy50b2NEYXRhLmNoaWxkcmVuLmxlbmd0aCA9PT0gaW5kZXggKyAxO1xyXG5cclxuICAgICAgaWYgKHRoaXMudG9jRGF0YSAmJiBpc1Nob3dBbGxNaW1lVHlwZSgpIHx8IChpc0NvbGxlY3Rpb24oKSB8fCBpc01hdGhjaGVzTWltZVR5cGUoKSkpIHtcclxuICAgICAgICB0aGlzLmlzTWltZVR5cGVGaWx0ZXJDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZU1pbWVUeXBlRmlsdGVyLmluZGV4T2YoaXRlbS5taW1lVHlwZSkgPCAwICYmICFpc0xhc3RDb250ZW50KCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmVNaW1lVHlwZUZpbHRlci5pbmRleE9mKGl0ZW0ubWltZVR5cGUpIDwgMCAmJiBpc0xhc3RDb250ZW50KCkpIHtcclxuICAgICAgICBpZiAodGhpcy5pc01pbWVUeXBlRmlsdGVyQ2hhbmdlZCkge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzTWltZVR5cGVGaWx0ZXJDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRSb2xsdXAodHJlZSwgaWRlbnRpZmllcikge1xyXG4gICAgbGV0IHJvbGx1cCA9IFt0cmVlLmlkZW50aWZpZXJdO1xyXG4gICAgaWYgKHRyZWUuc2JVbmlxdWVJZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XHJcbiAgICAgIHJldHVybiByb2xsdXA7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRyZWUuY2hpbGRyZW4gfHwgIXRyZWUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIGxldCBub3REb25lID0gdHJ1ZTtcclxuICAgIGxldCBjaGlsZFJvbGx1cDogYW55O1xyXG4gICAgbGV0IGluZGV4ID0gMDtcclxuICAgIHdoaWxlIChub3REb25lICYmIHRyZWUuY2hpbGRyZW5baW5kZXhdKSB7XHJcbiAgICAgIGNoaWxkUm9sbHVwID0gdGhpcy5nZXRSb2xsdXAodHJlZS5jaGlsZHJlbltpbmRleF0sIGlkZW50aWZpZXIpO1xyXG4gICAgICBpZiAoY2hpbGRSb2xsdXAgJiYgY2hpbGRSb2xsdXAubGVuZ3RoKSB7XHJcbiAgICAgICAgbm90RG9uZSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGluZGV4Kys7XHJcbiAgICB9XHJcbiAgICBpZiAoY2hpbGRSb2xsdXAgJiYgY2hpbGRSb2xsdXAubGVuZ3RoKSB7XHJcbiAgICAgIHJvbGx1cC5wdXNoKC4uLmNoaWxkUm9sbHVwKTtcclxuICAgICAgcmV0dXJuIHJvbGx1cDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNyZWF0ZVVuaXF1ZUlkKHRvY0RhdGEsIGl0ZW0pIHtcclxuICAgIGl0ZW1bJ3NiVW5pcXVlSWRlbnRpZmllciddID0gdG9jRGF0YS5pZGVudGlmaWVyICsgJ18nICsgaXRlbS5pZGVudGlmaWVyO1xyXG4gIH1cclxuXHJcbiAgZmV0Y2hQcm9ncmVzcyhpdGVtPykge1xyXG4gICAgdmFyIGJnQ29sb3IgPSB0aGlzLnByb2dyZXNzQ29sb3I7XHJcbiAgICBsZXQgd2lkdGhTdHlsZSA9IGl0ZW0ucHJvZ3Jlc3NQZXJjZW50YWdlIT1udWxsP2l0ZW0ucHJvZ3Jlc3NQZXJjZW50YWdlK1wiJVwiOlwiMiVcIjtcclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2lkdGg6IHdpZHRoU3R5bGUsXHJcbiAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzpiZ0NvbG9yXHJcbiAgICB9O1xyXG4gIH1cclxuICBzaG93Q29tcGxldGVkKGl0ZW0/KSB7XHJcbiAgICBpZihpdGVtIT1udWxsICYmIGl0ZW0ucHJvZ3Jlc3NQZXJjZW50YWdlIT1udWxsICYmIGl0ZW0ucHJvZ3Jlc3NQZXJjZW50YWdlID09PSAxMDApIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIGZldGNoUHJvZ3Jlc3NTaGFkb3coaXRlbSkge1xyXG4gICAgdmFyIGJnQ29sb3IgPSB0aGlzLnNoYWRvd0NvbG9yO1xyXG4gICAgbGV0IGRpc3BsYXlTdGF0dXMgPSBpdGVtLnByb2dyZXNzUGVyY2VudGFnZSE9bnVsbCAmJiBpdGVtLnByb2dyZXNzUGVyY2VudGFnZSAhPSBcIjBcIj8nYmxvY2snOidub25lJztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICdiYWNrZ3JvdW5kJzpiZ0NvbG9yLFxyXG4gICAgICBkaXNwbGF5OiBkaXNwbGF5U3RhdHVzXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgb25QbGF5QnV0dG9uQ2xpY2soZXZlbnQpIHtcclxuICAgIGNvbnN0IHJvbGx1cCA9IHRoaXMuZ2V0Um9sbHVwKHRoaXMudG9jRGF0YSwgZXZlbnQuZGF0YS5zYlVuaXF1ZUlkZW50aWZpZXIpO1xyXG4gICAgaWYgKHJvbGx1cC5sZW5ndGgpIHtcclxuICAgICAgcm9sbHVwLnBvcCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy50b2NDYXJkQ2xpY2suZW1pdCh7IC4uLmV2ZW50LCByb2xsdXAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=