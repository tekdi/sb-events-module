/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ContentChildren, Input, Output, EventEmitter, QueryList } from '@angular/core';
import { PillBorder, PillShape, PillsViewType, SelectMode, PillsMultiRow, ShowMoreViewType } from '../models';
import { PillItemComponent } from '../pill-item/pill-item.component';
var PillsGridComponent = /** @class */ (function () {
    function PillsGridComponent() {
        this.visiblePillItems = [];
        this.visiblePillTemplateRefs = [];
        this.pillShape = PillShape.DEFAULT;
        this.pillsViewType = PillsViewType.NONE;
        this.pillBorder = PillBorder.NONE;
        this.selectMode = SelectMode.SINGLE;
        this.pillsMultiRow = PillsMultiRow.DEFAULT;
        this.showMoreViewType = ShowMoreViewType.EXPAND;
        this.select = new EventEmitter();
        this.viewMorePillList = new EventEmitter();
    }
    Object.defineProperty(PillsGridComponent.prototype, "PillShape", {
        get: /**
         * @return {?}
         */
        function () { return PillShape; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PillsGridComponent.prototype, "PillsViewType", {
        get: /**
         * @return {?}
         */
        function () { return PillsViewType; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PillsGridComponent.prototype, "PillBorder", {
        get: /**
         * @return {?}
         */
        function () { return PillBorder; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PillsGridComponent.prototype, "PillsMultiRow", {
        get: /**
         * @return {?}
         */
        function () { return PillsMultiRow; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PillsGridComponent.prototype, "ShowMoreViewType", {
        get: /**
         * @return {?}
         */
        function () { return ShowMoreViewType; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    PillsGridComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.assignDefaultPillsConfig();
    };
    /**
     * @return {?}
     */
    PillsGridComponent.prototype.assignDefaultPillsConfig = /**
     * @return {?}
     */
    function () {
        this.pillShape = this.pillShape || PillShape.DEFAULT;
        this.pillsViewType = this.pillsViewType || PillsViewType.NONE;
        this.pillBorder = this.pillBorder || PillBorder.NONE;
        this.selectMode = this.selectMode || SelectMode.SINGLE;
        this.pillsMultiRow = this.pillsMultiRow || PillsMultiRow.DEFAULT;
        if (this.minDisplayCount !== null && this.minDisplayCount !== undefined) {
            this.viewMoreText = this.viewMoreText || 'View More';
            this.viewLessText = this.viewLessText || 'View Less';
            this.showMoreViewType = this.showMoreViewType || ShowMoreViewType.EXPAND;
        }
    };
    /**
     * @return {?}
     */
    PillsGridComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.viewCount = (this.minDisplayCount) ? this.minDisplayCount : this.pillItems.length;
        this.visiblePillItems = this.pillItems.toArray().slice(0, this.viewCount);
        this.visiblePillTemplateRefs = this.visiblePillItems.map((/**
         * @param {?} p
         * @return {?}
         */
        function (p) { return p.template; }));
        /** @type {?} */
        var onSelect = (/**
         * @param {?} pill
         * @param {?} event
         * @return {?}
         */
        function (pill, event) {
            if (_this.selectMode === SelectMode.SINGLE && pill.selected) {
                _this.visiblePillItems.forEach((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) {
                    if (e !== pill) {
                        e.selected = false;
                    }
                }));
                pill.selected = false;
                _this.select.emit({ event: event, data: [{ name: pill.name, value: pill.value }] });
            }
            else {
                _this.select.emit({
                    event: event,
                    data: _this.visiblePillItems
                        .filter((/**
                     * @param {?} p
                     * @return {?}
                     */
                    function (p) { return p.selected; }))
                        .map((/**
                     * @param {?} p
                     * @return {?}
                     */
                    function (p) { return ({ name: p.name, value: p.value }); }))
                });
            }
        });
        this.visiblePillItems.forEach((/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return e.onSelect = onSelect; }));
    };
    /**
     * @return {?}
     */
    PillsGridComponent.prototype.viewMore = /**
     * @return {?}
     */
    function () {
        this.viewCount = this.pillItems.length;
        this.visiblePillItems = this.pillItems.toArray().slice(0, this.viewCount);
        this.visiblePillTemplateRefs = this.visiblePillItems.map((/**
         * @param {?} p
         * @return {?}
         */
        function (p) { return p.template; }));
    };
    /**
     * @return {?}
     */
    PillsGridComponent.prototype.viewLess = /**
     * @return {?}
     */
    function () {
        this.viewCount = this.minDisplayCount;
        this.visiblePillItems = this.pillItems.toArray().slice(0, this.viewCount);
        this.visiblePillTemplateRefs = this.visiblePillItems.map((/**
         * @param {?} p
         * @return {?}
         */
        function (p) { return p.template; }));
    };
    /**
     * @param {?} event
     * @return {?}
     */
    PillsGridComponent.prototype.viewMoreInNewScreen = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.viewMorePillList.emit({ event: event, data: (this.pillItems && this.pillItems.toArray()) });
    };
    PillsGridComponent.decorators = [
        { type: Component, args: [{
                    selector: 'sb-pills-grid',
                    template: "<div class=\"sb-label-grid show-icon\" [ngClass]=\"{\r\n  'sb-box-grid':((pillShape === PillShape.BOX)||(pillShape === PillShape.CIRCLE)||(pillShape === PillShape.IMAGE_OVERLAP)), \r\n  'sb-pills-grid':(pillShape === PillShape.DEFAULT), \r\n  'show-circle':(pillShape === PillShape.CIRCLE), \r\n  'icon-header':(pillShape === PillShape.IMAGE_OVERLAP),\r\n  'hscroll': (pillsViewType === PillsViewType.SCROLL), \r\n  'border-radius':(pillBorder === PillBorder.ROUNDED),\r\n  'two-rows-grid':(pillsMultiRow === PillsMultiRow.DOUBLE_VIEW_COLUMN) || (pillsMultiRow === PillsMultiRow.DOUBLE_VIEW_ROW) || (pillsMultiRow === PillsMultiRow.SINGLE),\r\n  'one-row-grid':(pillsMultiRow === PillsMultiRow.SINGLE),\r\n  'column-sequence':(pillsMultiRow === PillsMultiRow.DOUBLE_VIEW_COLUMN),\r\n  'row-sequence':(pillsMultiRow === PillsMultiRow.DOUBLE_VIEW_ROW)\r\n}\">\r\n  <ng-container *ngFor=\"let ref of visiblePillTemplateRefs\">\r\n    <ng-container *ngTemplateOutlet=\"ref\"></ng-container>\r\n  </ng-container>\r\n</div>\r\n\r\n<div class=\"sb-view-more-less pb-16\" *ngIf=\"minDisplayCount && (pillItems?.length > minDisplayCount)\">\r\n  <div *ngIf=\"showMoreViewType===ShowMoreViewType.EXPAND\">\r\n    <button class=\"sb-btn sb-btn-normal view-more\" *ngIf=\"viewCount < pillItems?.length\" (click)=\"viewMore()\">{{viewMoreText}}</button>\r\n    <button class=\"sb-btn sb-btn-normal view-less\" *ngIf=\"viewCount === pillItems?.length\"  (click)=\"viewLess()\">{{viewLessText}}</button>\r\n  </div>\r\n\r\n  <div *ngIf=\"showMoreViewType===ShowMoreViewType.NEW_SCREEN\">\r\n    <button class=\"sb-btn sb-btn-normal view-all\" (click)=\"viewMoreInNewScreen($event)\">{{viewMoreText}}</button>\r\n  </div>\r\n</div>\r\n",
                    styles: [".sb-view-more-less{text-align:center}"]
                }] }
    ];
    PillsGridComponent.propDecorators = {
        pillItems: [{ type: ContentChildren, args: [PillItemComponent,] }],
        pillShape: [{ type: Input }],
        pillsViewType: [{ type: Input }],
        pillBorder: [{ type: Input }],
        selectMode: [{ type: Input }],
        pillsMultiRow: [{ type: Input }],
        minDisplayCount: [{ type: Input }],
        viewMoreText: [{ type: Input }],
        viewLessText: [{ type: Input }],
        showMoreViewType: [{ type: Input }],
        select: [{ type: Output }],
        viewMorePillList: [{ type: Output }]
    };
    return PillsGridComponent;
}());
export { PillsGridComponent };
if (false) {
    /** @type {?} */
    PillsGridComponent.prototype.pillItems;
    /** @type {?} */
    PillsGridComponent.prototype.visiblePillItems;
    /** @type {?} */
    PillsGridComponent.prototype.visiblePillTemplateRefs;
    /** @type {?} */
    PillsGridComponent.prototype.pillShape;
    /** @type {?} */
    PillsGridComponent.prototype.pillsViewType;
    /** @type {?} */
    PillsGridComponent.prototype.pillBorder;
    /** @type {?} */
    PillsGridComponent.prototype.selectMode;
    /** @type {?} */
    PillsGridComponent.prototype.pillsMultiRow;
    /** @type {?} */
    PillsGridComponent.prototype.minDisplayCount;
    /** @type {?} */
    PillsGridComponent.prototype.viewMoreText;
    /** @type {?} */
    PillsGridComponent.prototype.viewLessText;
    /** @type {?} */
    PillsGridComponent.prototype.showMoreViewType;
    /** @type {?} */
    PillsGridComponent.prototype.select;
    /** @type {?} */
    PillsGridComponent.prototype.viewMorePillList;
    /** @type {?} */
    PillsGridComponent.prototype.viewCount;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGlsbHMtZ3JpZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcHJvamVjdC1zdW5iaXJkL2NvbW1vbi1jb25zdW1wdGlvbi12OC8iLCJzb3VyY2VzIjpbImxpYi9waWxscy1ncmlkL3BpbGxzLWdyaWQvcGlsbHMtZ3JpZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBb0IsU0FBUyxFQUFFLGVBQWUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQXVCLE1BQU0sZUFBZSxDQUFDO0FBQzFJLE9BQU8sRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLGFBQWEsRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQzlHLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBRXJFO0lBQUE7UUFTSSxxQkFBZ0IsR0FBd0IsRUFBRSxDQUFDO1FBQzNDLDRCQUF1QixHQUF1QixFQUFFLENBQUM7UUFFeEMsY0FBUyxHQUFjLFNBQVMsQ0FBQyxPQUFPLENBQUM7UUFDekMsa0JBQWEsR0FBa0IsYUFBYSxDQUFDLElBQUksQ0FBQztRQUNsRCxlQUFVLEdBQWUsVUFBVSxDQUFDLElBQUksQ0FBQztRQUN6QyxlQUFVLEdBQWUsVUFBVSxDQUFDLE1BQU0sQ0FBQztRQUMzQyxrQkFBYSxHQUFrQixhQUFhLENBQUMsT0FBTyxDQUFDO1FBSXJELHFCQUFnQixHQUFxQixnQkFBZ0IsQ0FBQyxNQUFNLENBQUE7UUFFM0QsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFDakMscUJBQWdCLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztJQW9FekQsQ0FBQztJQWpFRyxzQkFBSSx5Q0FBUzs7OztRQUFiLGNBQWtCLE9BQU8sU0FBUyxDQUFDLENBQUMsQ0FBQzs7O09BQUE7SUFDckMsc0JBQUksNkNBQWE7Ozs7UUFBakIsY0FB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LENBQUM7UUFDMUUsSUFBSSxDQUFDLHVCQUF1QixHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHOzs7O1FBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsUUFBUSxFQUFWLENBQVUsRUFBQyxDQUFDO0lBQzlFLENBQUM7Ozs7O0lBRUQsZ0RBQW1COzs7O0lBQW5CLFVBQW9CLEtBQUs7UUFDckIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssT0FBQSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM5RixDQUFDOztnQkF6RkosU0FBUyxTQUFDO29CQUNQLFFBQVEsRUFBRSxlQUFlO29CQUN6Qixtc0RBQTBDOztpQkFFN0M7Ozs0QkFJSSxlQUFlLFNBQUMsaUJBQWlCOzRCQUlqQyxLQUFLO2dDQUNMLEtBQUs7NkJBQ0wsS0FBSzs2QkFDTCxLQUFLO2dDQUNMLEtBQUs7a0NBQ0wsS0FBSzsrQkFDTCxLQUFLOytCQUNMLEtBQUs7bUNBQ0wsS0FBSzt5QkFFTCxNQUFNO21DQUNOLE1BQU07O0lBb0VYLHlCQUFDO0NBQUEsQUEzRkQsSUEyRkM7U0FyRlksa0JBQWtCOzs7SUFFM0IsdUNBQTRFOztJQUM1RSw4Q0FBMkM7O0lBQzNDLHFEQUFpRDs7SUFFakQsdUNBQWtEOztJQUNsRCwyQ0FBMkQ7O0lBQzNELHdDQUFrRDs7SUFDbEQsd0NBQW9EOztJQUNwRCwyQ0FBOEQ7O0lBQzlELDZDQUFpQzs7SUFDakMsMENBQThCOztJQUM5QiwwQ0FBOEI7O0lBQzlCLDhDQUFxRTs7SUFFckUsb0NBQTJDOztJQUMzQyw4Q0FBcUQ7O0lBQ3JELHVDQUFrQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFmdGVyQ29udGVudEluaXQsIENvbXBvbmVudCwgQ29udGVudENoaWxkcmVuLCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFF1ZXJ5TGlzdCwgVGVtcGxhdGVSZWYsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBQaWxsQm9yZGVyLCBQaWxsU2hhcGUsIFBpbGxzVmlld1R5cGUsIFNlbGVjdE1vZGUsIFBpbGxzTXVsdGlSb3csIFNob3dNb3JlVmlld1R5cGUgfSBmcm9tICcuLi9tb2RlbHMnO1xyXG5pbXBvcnQgeyBQaWxsSXRlbUNvbXBvbmVudCB9IGZyb20gJy4uL3BpbGwtaXRlbS9waWxsLWl0ZW0uY29tcG9uZW50JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdzYi1waWxscy1ncmlkJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9waWxscy1ncmlkLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL3BpbGxzLWdyaWQuY29tcG9uZW50LnNjc3MnXVxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIFBpbGxzR3JpZENvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQsIE9uSW5pdCB7XHJcblxyXG4gICAgQENvbnRlbnRDaGlsZHJlbihQaWxsSXRlbUNvbXBvbmVudCkgcGlsbEl0ZW1zOiBRdWVyeUxpc3Q8UGlsbEl0ZW1Db21wb25lbnQ+O1xyXG4gICAgdmlzaWJsZVBpbGxJdGVtczogUGlsbEl0ZW1Db21wb25lbnRbXSA9IFtdO1xyXG4gICAgdmlzaWJsZVBpbGxUZW1wbGF0ZVJlZnM6IFRlbXBsYXRlUmVmPGFueT5bXSA9IFtdO1xyXG5cclxuICAgIEBJbnB1dCgpIHBpbGxTaGFwZTogUGlsbFNoYXBlID0gUGlsbFNoYXBlLkRFRkFVTFQ7XHJcbiAgICBASW5wdXQoKSBwaWxsc1ZpZXdUeXBlOiBQaWxsc1ZpZXdUeXBlID0gUGlsbHNWaWV3VHlwZS5OT05FO1xyXG4gICAgQElucHV0KCkgcGlsbEJvcmRlcjogUGlsbEJvcmRlciA9IFBpbGxCb3JkZXIuTk9ORTtcclxuICAgIEBJbnB1dCgpIHNlbGVjdE1vZGU6IFNlbGVjdE1vZGUgPSBTZWxlY3RNb2RlLlNJTkdMRTtcclxuICAgIEBJbnB1dCgpIHBpbGxzTXVsdGlSb3c6IFBpbGxzTXVsdGlSb3cgPSBQaWxsc011bHRpUm93LkRFRkFVTFQ7XHJcbiAgICBASW5wdXQoKSBtaW5EaXNwbGF5Q291bnQ6IG51bWJlcjtcclxuICAgIEBJbnB1dCgpIHZpZXdNb3JlVGV4dDogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgdmlld0xlc3NUZXh0OiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBzaG93TW9yZVZpZXdUeXBlOiBTaG93TW9yZVZpZXdUeXBlID0gU2hvd01vcmVWaWV3VHlwZS5FWFBBTkRcclxuXHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICBAT3V0cHV0KCkgdmlld01vcmVQaWxsTGlzdCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgdmlld0NvdW50OiBudW1iZXI7XHJcblxyXG4gICAgZ2V0IFBpbGxTaGFwZSgpIHsgcmV0dXJuIFBpbGxTaGFwZTsgfVxyXG4gICAgZ2V0IFBpbGxzVmlld1R5cGUoKSB7IHJldHVybiBQaWxsc1ZpZXdUeXBlOyB9XHJcbiAgICBnZXQgUGlsbEJvcmRlcigpIHsgcmV0dXJuIFBpbGxCb3JkZXI7IH1cclxuICAgIGdldCBQaWxsc011bHRpUm93KCkgeyByZXR1cm4gUGlsbHNNdWx0aVJvdzsgfVxyXG4gICAgZ2V0IFNob3dNb3JlVmlld1R5cGUoKSB7IHJldHVybiBTaG93TW9yZVZpZXdUeXBlOyB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25EZWZhdWx0UGlsbHNDb25maWcoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3NpZ25EZWZhdWx0UGlsbHNDb25maWcoKSB7XHJcbiAgICAgICAgdGhpcy5waWxsU2hhcGUgPSB0aGlzLnBpbGxTaGFwZSB8fCBQaWxsU2hhcGUuREVGQVVMVDtcclxuICAgICAgICB0aGlzLnBpbGxzVmlld1R5cGUgPSB0aGlzLnBpbGxzVmlld1R5cGUgfHwgUGlsbHNWaWV3VHlwZS5OT05FO1xyXG4gICAgICAgIHRoaXMucGlsbEJvcmRlciA9IHRoaXMucGlsbEJvcmRlciB8fCBQaWxsQm9yZGVyLk5PTkU7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RNb2RlID0gdGhpcy5zZWxlY3RNb2RlIHx8IFNlbGVjdE1vZGUuU0lOR0xFO1xyXG4gICAgICAgIHRoaXMucGlsbHNNdWx0aVJvdyA9IHRoaXMucGlsbHNNdWx0aVJvdyB8fCBQaWxsc011bHRpUm93LkRFRkFVTFQ7XHJcbiAgICAgICAgaWYgKHRoaXMubWluRGlzcGxheUNvdW50ICE9PSBudWxsICYmIHRoaXMubWluRGlzcGxheUNvdW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3TW9yZVRleHQgPSB0aGlzLnZpZXdNb3JlVGV4dCB8fCAnVmlldyBNb3JlJztcclxuICAgICAgICAgICAgdGhpcy52aWV3TGVzc1RleHQgPSB0aGlzLnZpZXdMZXNzVGV4dCB8fCAnVmlldyBMZXNzJztcclxuICAgICAgICAgICAgdGhpcy5zaG93TW9yZVZpZXdUeXBlID0gdGhpcy5zaG93TW9yZVZpZXdUeXBlIHx8IFNob3dNb3JlVmlld1R5cGUuRVhQQU5EO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XHJcbiAgICAgICAgdGhpcy52aWV3Q291bnQgPSAodGhpcy5taW5EaXNwbGF5Q291bnQpID8gdGhpcy5taW5EaXNwbGF5Q291bnQgOiB0aGlzLnBpbGxJdGVtcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHRoaXMudmlzaWJsZVBpbGxJdGVtcyA9IHRoaXMucGlsbEl0ZW1zLnRvQXJyYXkoKS5zbGljZSgwLCB0aGlzLnZpZXdDb3VudCk7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUGlsbFRlbXBsYXRlUmVmcyA9IHRoaXMudmlzaWJsZVBpbGxJdGVtcy5tYXAocCA9PiBwLnRlbXBsYXRlKTtcclxuICAgICAgICBjb25zdCBvblNlbGVjdCA9IChwaWxsOiBQaWxsSXRlbUNvbXBvbmVudCwgZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0TW9kZSA9PT0gU2VsZWN0TW9kZS5TSU5HTEUgJiYgcGlsbC5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlUGlsbEl0ZW1zLmZvckVhY2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgIT09IHBpbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcGlsbC5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QuZW1pdCh7ZXZlbnQsIGRhdGE6IFt7IG5hbWU6IHBpbGwubmFtZSwgdmFsdWU6IHBpbGwudmFsdWUgfV19KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0LmVtaXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMudmlzaWJsZVBpbGxJdGVtc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHAgPT4gcC5zZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChwID0+ICh7IG5hbWU6IHAubmFtZSwgdmFsdWU6IHAudmFsdWUgfSkpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUGlsbEl0ZW1zLmZvckVhY2goZSA9PiBlLm9uU2VsZWN0ID0gb25TZWxlY3QpO1xyXG4gICAgfVxyXG5cclxuICAgIHZpZXdNb3JlKCkge1xyXG4gICAgICAgIHRoaXMudmlld0NvdW50ID0gdGhpcy5waWxsSXRlbXMubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVBpbGxJdGVtcyA9IHRoaXMucGlsbEl0ZW1zLnRvQXJyYXkoKS5zbGljZSgwLCB0aGlzLnZpZXdDb3VudCk7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUGlsbFRlbXBsYXRlUmVmcyA9IHRoaXMudmlzaWJsZVBpbGxJdGVtcy5tYXAocCA9PiBwLnRlbXBsYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICB2aWV3TGVzcygpIHtcclxuICAgICAgICB0aGlzLnZpZXdDb3VudCA9IHRoaXMubWluRGlzcGxheUNvdW50O1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVBpbGxJdGVtcyA9IHRoaXMucGlsbEl0ZW1zLnRvQXJyYXkoKS5zbGljZSgwLCB0aGlzLnZpZXdDb3VudCk7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUGlsbFRlbXBsYXRlUmVmcyA9IHRoaXMudmlzaWJsZVBpbGxJdGVtcy5tYXAocCA9PiBwLnRlbXBsYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICB2aWV3TW9yZUluTmV3U2NyZWVuKGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy52aWV3TW9yZVBpbGxMaXN0LmVtaXQoeyBldmVudCwgZGF0YTogKHRoaXMucGlsbEl0ZW1zICYmIHRoaXMucGlsbEl0ZW1zLnRvQXJyYXkoKSkgfSk7XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==