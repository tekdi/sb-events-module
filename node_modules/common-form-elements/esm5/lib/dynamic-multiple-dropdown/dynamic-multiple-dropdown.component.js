/**
 * @fileoverview added by tsickle
 * Generated from: lib/dynamic-multiple-dropdown/dynamic-multiple-dropdown.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { ChangeDetectorRef, Component, Input, HostListener } from '@angular/core';
import { FormControl, FormGroup } from '@angular/forms';
import { from, Subject, merge } from 'rxjs';
import { takeUntil, tap } from 'rxjs/operators';
import { fromJS, List, Map, Set } from 'immutable';
import * as _ from 'lodash-es';
var DynamicMultipleDropdownComponent = /** @class */ (function () {
    function DynamicMultipleDropdownComponent(changeDetectionRef) {
        this.changeDetectionRef = changeDetectionRef;
        this.isMultiple = true;
        this.platform = 'web';
        this.dependencyTerms = [];
        this._ = _;
        this.showModal = false;
        this.tempValue = Set();
        this.resolvedOptions = List();
        this.optionValueToOptionLabelMap = Map();
        this.fromJS = fromJS;
        this.dispose$ = new Subject();
    }
    /**
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.docClick = /**
     * @return {?}
     */
    function () {
        if (this.showModal) {
            this.showModal = false;
        }
    };
    /**
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.field && this.field.range) {
            this.options = this.field.range;
        }
        if (!_.isEmpty(this.depends)) {
            merge.apply(void 0, tslib_1.__spread(_.map(this.depends, (/**
             * @param {?} depend
             * @return {?}
             */
            function (depend) { return depend.valueChanges; })))).pipe(tap((/**
             * @return {?}
             */
            function () {
                _this.formControlRef.patchValue(null);
                _this.resetTempValue();
            })), takeUntil(this.dispose$)).subscribe();
            merge.apply(void 0, tslib_1.__spread(_.map(this.depends, (/**
             * @param {?} depend
             * @return {?}
             */
            function (depend) { return depend.statusChanges; })))).pipe(tap((/**
             * @return {?}
             */
            function () {
                _this.isDependsInvalid = _.includes(_.map(_this.depends, (/**
                 * @param {?} depend
                 * @return {?}
                 */
                function (depend) { return depend.invalid; })), true);
            })), takeUntil(this.dispose$)).subscribe();
            this.isDependsInvalid = _.includes(_.map(this.depends, (/**
             * @param {?} depend
             * @return {?}
             */
            function (depend) { return depend.invalid; })), true);
        }
        this.formControlRef.valueChanges.pipe(tap((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            _this.setTempValue(value);
            _this.changeDetectionRef.detectChanges();
        })), takeUntil(this.dispose$)).subscribe();
        this.setupOptions();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (!changes['options'] || !changes['options'].currentValue) {
            return;
        }
    };
    /**
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.onSubmit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var finalValue = this.tempValue.toList().toJS();
        this.formControlRef.patchValue(this.isMultiple ? finalValue : finalValue[0]);
        this.formControlRef.markAsDirty();
        this.showModal = false;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.openModal = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.context && this.context.invalid) {
            return;
        }
        if (this.disabled === true || this.isDependsInvalid) {
            return;
        }
        this.setTempValue(this.formControlRef.value);
        /** @type {?} */
        var htmlCollection = document.getElementsByClassName('sb-modal-dropdown-web');
        /** @type {?} */
        var modalElements = Array.from(htmlCollection);
        /** @type {?} */
        var isModalAlreadyOpened = modalElements.some((/**
         * @param {?} element
         * @return {?}
         */
        function (element) { return element.hidden === false; }));
        if (this.platform === 'web' && isModalAlreadyOpened && !this.showModal) {
            modalElements.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item.hidden = true;
            }));
        }
        if (this.platform === 'web' && this.showModal) {
            this.showModal = false;
        }
        else {
            this.showModal = true;
        }
        event.stopPropagation();
    };
    /**
     * @param {?} option
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.addSelected = /**
     * @param {?} option
     * @return {?}
     */
    function (option) {
        if (this.isMultiple) {
            if (this.field.output) {
                if (this.tempValue.includes(option.get(this.field.output))) {
                    this.tempValue = this.tempValue.remove(option.get(this.field.output));
                }
                else {
                    this.tempValue = this.tempValue.add(option.get(this.field.output));
                }
            }
            else if (this.tempValue.includes(option.get('name'))) {
                this.tempValue = this.tempValue.remove(option.get('name'));
            }
            else if (this.tempValue.includes(option.get('identifier'))) {
                this.tempValue = this.tempValue.remove(option.get('identifier'));
            }
            else {
                this.tempValue = this.tempValue.add(option.get('name'));
            }
        }
        else {
            if (this.field.output) {
                this.tempValue = this.tempValue.clear();
                this.tempValue = this.tempValue.add(option.get(this.field.output));
            }
            else {
                this.tempValue = this.tempValue.clear();
                this.tempValue = this.tempValue.add(option.get('name'));
            }
        }
    };
    /**
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.onCancel = /**
     * @return {?}
     */
    function () {
        this.formControlRef.markAsDirty();
        this.showModal = false;
    };
    /**
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.dispose$.next(null);
        this.dispose$.complete();
    };
    /**
     * @private
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.isOptionsArray = /**
     * @private
     * @return {?}
     */
    function () {
        return Array.isArray(this.options);
    };
    /**
     * @private
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.isOptionsClosure = /**
     * @private
     * @return {?}
     */
    function () {
        return typeof this.options === 'function';
    };
    /**
     * @private
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.isOptionsMap = /**
     * @private
     * @return {?}
     */
    function () {
        return !Array.isArray(this.options) && typeof this.options === 'object';
    };
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.setTempValue = /**
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value) {
            if (Array.isArray(value)) {
                this.tempValue = Set(fromJS(value));
            }
            else {
                this.tempValue = Set(fromJS([value]));
            }
            // this.onSubmit();
        }
    };
    /**
     * @private
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.resetTempValue = /**
     * @private
     * @return {?}
     */
    function () {
        this.tempValue = Set(null);
    };
    /**
     * @private
     * @return {?}
     */
    DynamicMultipleDropdownComponent.prototype.setupOptions = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.options) {
            this.options = [];
            this.resolvedOptions = this.resolvedOptions.clear();
        }
        if (this.isOptionsArray()) {
            /** @type {?} */
            var optionMap = _.map(this.options, (/**
             * @param {?} option
             * @return {?}
             */
            function (option) {
                return {
                    identifier: option.value || option.identifier || option.name || option,
                    name: option.label || option.name || option.value || option,
                };
            }));
            this.resolvedOptions = fromJS(optionMap);
        }
        else if (this.isOptionsMap()) {
            this.resolvedOptions = (this.depends) ?
                fromJS(this.options[this.context.value]) :
                this.resolvedOptions;
        }
        else if (this.isOptionsClosure()) {
            from(((/** @type {?} */ (this.options)))(this.formControlRef, this.depends, this.formGroup, (/**
             * @return {?}
             */
            function () { return _this.dataLoadStatusDelegate.next('LOADING'); }), (/**
             * @return {?}
             */
            function () { return _this.dataLoadStatusDelegate.next('LOADED'); }))).pipe(tap((/**
             * @param {?=} options
             * @return {?}
             */
            function (options) {
                if (options === void 0) { options = []; }
                _this.resolvedOptions = fromJS(options);
                _this.resolvedOptions.forEach((/**
                 * @param {?} option
                 * @return {?}
                 */
                function (option) {
                    /** @type {?} */
                    var value = !_.isEmpty(_this.field.output) ? option.get(_this.field.output) :
                        option.get('name') || option.get('identifier') || option.get('value') || option;
                    /** @type {?} */
                    var labelVal = option.get('name') || option.get('label') || option;
                    _this.optionValueToOptionLabelMap = _this.optionValueToOptionLabelMap.set(value, labelVal);
                }));
                _this.setTempValue(_this.default);
                _this.changeDetectionRef.detectChanges();
            })), takeUntil(this.dispose$)).subscribe();
        }
        this.resolvedOptions.forEach((/**
         * @param {?} option
         * @return {?}
         */
        function (option) {
            /** @type {?} */
            var value = !_.isEmpty(_this.field.output) ? option.get(_this.field.output) :
                option.get('name') || option.get('identifier') || option.get('value') || option;
            /** @type {?} */
            var labelVal = option.get('name') || option.get('label') || option;
            _this.optionValueToOptionLabelMap = _this.optionValueToOptionLabelMap.set(value, labelVal);
        }));
        this.setTempValue(this.default);
    };
    DynamicMultipleDropdownComponent.decorators = [
        { type: Component, args: [{
                    selector: 'sb-dynamic-multiple-dropdown',
                    template: "<div class=\"multi-select-section-app\">\n  <label class=\"input-label\" *ngIf=\"label\">{{label}}</label>\n  <!-- <div *ngIf=\"labelHtml\" [innerHTML]=\"labelHtml | transposeHtml\"></div> -->\n  <div class=\"multi-select-container\">\n    <sb-caret-down class=\"caret-down\" [ngClass]=\"{'disabled': disabled === true ? true : ( depends ? (isDependsInvalid ? true : null) : null ) }\" (click)=\"openModal($event)\" [attr.disabled]=\"disabled ? true : ( depends ? (isDependsInvalid ? true : null) : null )\">\n    </sb-caret-down>\n    <div class=\"list-border\" (click)=\"openModal($event)\">\n      <ul [ngClass]=\"{'disabled': disabled === true ? true : ( depends ? (isDependsInvalid ? true : null) : null ) }\" [attr.disabled]=\"disabled ? true : ( depends ? (isDependsInvalid ? true : null) : null )\">\n        <ng-container *ngIf=\"isMultiple\">\n          <li *ngIf=\"!formControlRef.value || !formControlRef.value?.length\" class=\"placeholder\">{{placeholder}}</li>\n          <ng-container *ngIf=\"formControlRef.value?.length\">\n            <span *ngFor=\"let value of formControlRef.value; let index=index\">\n              {{optionValueToOptionLabelMap.get(fromJS(value))}}\n              <span *ngIf=\"index < formControlRef.value?.length - 1\">,\n              </span>\n            </span>\n          </ng-container>\n        </ng-container>\n\n        <ng-container *ngIf=\"!isMultiple\">\n          <li *ngIf=\"!formControlRef.value\" class=\"placeholder\">{{placeholder}}</li>\n\n          <span *ngIf=\"formControlRef.value\">{{optionValueToOptionLabelMap.get(fromJS(formControlRef.value))}}</span>\n        </ng-container>\n      </ul>\n    </div>\n    <div class=\"sb-modal-container\" *ngIf=\"platform === 'mobile'\" [hidden]=\"!showModal\" (click)=\"showModal=false;\">\n      <div class=\"sb-modal-overlay\">\n        <div class=\"sb-modal\" (click)=\"$event.stopPropagation()\">\n          <div class=\"header\">\n            {{placeholder}}\n          </div>\n          <div class=\"body\">\n            <ul>\n              <li *ngFor=\"let option of resolvedOptions; let i=index\">\n                <div (click)=\"addSelected(option)\" class=\"row\">\n                  <label class=\"container\" style=\"pointer-events: none\">\n                    <input [checked]=\"!_.isEmpty(field.output) ? tempValue.includes(option.get(field.output)) : tempValue.includes(option.get('name'))\" class=\"sb-checkbox\" type=\"checkbox\">\n                    <span class=\"checkmark\"></span>\n                  </label>\n                  <span>{{option.get('name')}}</span>\n                </div>\n              </li>\n            </ul>\n          </div>\n          <div class=\"footer\">\n            <div class=\"sb-form-button\">\n              <button class=\"sb-btn-primary-outline\" (click)=\"onCancel()\">cancel</button>\n            </div>\n            <div class=\"sb-form-button\">\n              <button class=\"sb-btn-primary\" (click)=\"onSubmit()\">submit</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"sb-modal-dropdown-web\" *ngIf=\"platform === 'web'\"  [hidden]=\"!showModal\" (click)=\"showModal=false;\">\n      <ul>\n        <li *ngFor=\"let option of resolvedOptions; let i=index\" [ngClass]=\"{'selected-option': !_.isEmpty(field.output) ? tempValue.includes(option.get(field.output)) : tempValue.includes(option.get('name'))}\">\n          <div (click)=\"addSelected(option); onSubmit()\">\n            <span class=\"cursor-pointer\">{{option.get('name')}}</span>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n",
                    styles: [".multi-select-section-app{margin:1rem 0}label{font-size:14px;font-weight:400;margin:0}.multi-select-container{position:relative;margin-bottom:8px}.multi-select-container .caret-down{position:absolute;top:12px;right:19px;z-index:0}.multi-select-container .list-border .placeholder{margin:0;color:var(--gray-100)}.multi-select-container .list-border ul[disabled]{opacity:.3;pointer-events:none}.multi-select-container .list-border ul{list-style-type:none;position:absolute;margin:0;font-size:14px;font-weight:700}.multi-select-container .list-border{border:.5px solid var(--gray-400);padding:1.3rem;cursor:pointer;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;left:0;height:40px}.multi-select-container .list-border li{float:left;font-size:12px;font-weight:700;margin-left:4px}.multi-select-container .dropdown li{cursor:pointer;padding:8px;border:1px solid var(--white)}.multi-select-container .dropdown ul{list-style-type:none;margin:0;padding:0}.multi-select-container .row{display:-ms-grid;display:grid;-ms-grid-columns:1fr 10fr;grid-template-columns:1fr 10fr;grid-gap:0}.multi-select-container .footer{display:-ms-grid;display:grid;-ms-grid-columns:1fr 1fr;grid-template-columns:1fr 1fr;grid-gap:0;padding-left:8px;padding-bottom:8px;padding-top:8px}.multi-select-container .sb-modal-container{position:fixed;height:100vh;overflow:hidden;width:100%;left:0;top:0;right:0;z-index:10}.multi-select-container .sb-modal-overlay{position:absolute;width:100%;height:100%;top:0;background:rgba(0,0,0,.6);left:0;z-index:10}.multi-select-container .fa .fa-close{float:right}.multi-select-container .sb-modal{display:block;position:absolute;bottom:0;width:100%;--border-top:0.5px solid var(--white);z-index:11;background:var(--white)}.multi-select-container .sb-modal ul{list-style-type:none}.multi-select-container .sb-modal li{cursor:pointer;padding-bottom:8px;padding-top:8px;padding-left:16px}.value-label{width:270px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.multi-select-container .sb-forms-radio{margin-top:6px}.multi-select-container .sb-form-button{display:inline;padding:10px}.multi-select-container .sb-btn-primary-outline{color:var(--primary-color);background-color:transparent;border:.5px solid var(--primary-color);border-radius:4px;padding:10px 40px;font-size:16px;text-transform:uppercase;width:100%}.multi-select-container .sb-btn-primary{color:var(--white);background-color:var(--primary-color);border:.5px solid var(--primary-color);border-radius:4px;padding:10px 40px;font-size:16px;text-transform:uppercase;width:100%}.multi-select-container .header{padding:16px;margin-left:8px;font-weight:700}.multi-select-container .body{padding-top:8px;border-bottom:.5px solid var(--gray-100);border-top:.5px solid var(--gray-100);max-height:300px;overflow:scroll}.list-with-ellipsis:nth-child(3){float:left;font-size:12px;font-weight:700;margin-left:4px;width:50px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.list-with-ellipsis:nth-child(n+4){visibility:hidden}.multi-select-container .container{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.container input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark{position:absolute;top:3px;left:0;height:15px;width:15px;border:.4px solid var(--black)}.container:hover input~.checkmark{background-color:var(--white)}.container input:checked~.checkmark{background-color:var(--primary-600)}.checkmark:after{content:\"\";position:absolute;display:none}.container input:checked~.checkmark:after{display:block}.container .checkmark:after{left:5px;top:0;width:5px;height:10px;border:solid var(--white);border-width:0 2px 2px 0;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.sb-modal-dropdown-web ul{list-style-type:none;display:block;position:absolute;top:38px;left:0;background-color:#fff;width:100%;z-index:999;box-shadow:2px 2px 2px 2px #f0f8ff;border:2px solid #80a7ce;max-height:314px;overflow:scroll}.sb-modal-dropdown-web ul li{margin-top:10px;margin-bottom:8px;padding:8px;font-size:13px}.sb-modal-dropdown-web .selected-option{font-weight:700;background-color:#eee}::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#888}::-webkit-scrollbar-thumb:hover{background:#555}.cursor-pointer{cursor:pointer}"]
                }] }
    ];
    /** @nocollapse */
    DynamicMultipleDropdownComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef }
    ]; };
    DynamicMultipleDropdownComponent.propDecorators = {
        disabled: [{ type: Input }],
        field: [{ type: Input }],
        options: [{ type: Input }],
        label: [{ type: Input }],
        labelHtml: [{ type: Input }],
        placeholder: [{ type: Input }],
        isMultiple: [{ type: Input }],
        context: [{ type: Input }],
        formControlRef: [{ type: Input }],
        formGroup: [{ type: Input }],
        platform: [{ type: Input }],
        default: [{ type: Input }],
        contextData: [{ type: Input }],
        dataLoadStatusDelegate: [{ type: Input }],
        depends: [{ type: Input }],
        dependencyTerms: [{ type: Input }],
        docClick: [{ type: HostListener, args: ['document:click',] }]
    };
    return DynamicMultipleDropdownComponent;
}());
export { DynamicMultipleDropdownComponent };
if (false) {
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.disabled;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.field;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.options;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.label;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.labelHtml;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.placeholder;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.isMultiple;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.context;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.formControlRef;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.formGroup;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.platform;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.default;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.contextData;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.dataLoadStatusDelegate;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.depends;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.dependencyTerms;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype._;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.isDependsInvalid;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.showModal;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.tempValue;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.resolvedOptions;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.optionValueToOptionLabelMap;
    /** @type {?} */
    DynamicMultipleDropdownComponent.prototype.fromJS;
    /**
     * @type {?}
     * @private
     */
    DynamicMultipleDropdownComponent.prototype.dispose$;
    /**
     * @type {?}
     * @private
     */
    DynamicMultipleDropdownComponent.prototype.changeDetectionRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1pYy1tdWx0aXBsZS1kcm9wZG93bi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9jb21tb24tZm9ybS1lbGVtZW50cy8iLCJzb3VyY2VzIjpbImxpYi9keW5hbWljLW11bHRpcGxlLWRyb3Bkb3duL2R5bmFtaWMtbXVsdGlwbGUtZHJvcGRvd24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE9BQU8sRUFBMkIsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFDNUMsWUFBWSxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBQ3hFLE9BQU8sRUFBQyxXQUFXLEVBQUUsU0FBUyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDdEQsT0FBTyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBRTFDLE9BQU8sRUFBQyxTQUFTLEVBQUUsR0FBRyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDOUMsT0FBTyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUNqRCxPQUFPLEtBQUssQ0FBQyxNQUFNLFdBQVcsQ0FBQztBQUMvQjtJQTRDRSwwQ0FDVSxrQkFBcUM7UUFBckMsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFtQjtRQWhDdEMsZUFBVSxHQUFHLElBQUksQ0FBQztRQUlsQixhQUFRLEdBQVEsS0FBSyxDQUFDO1FBS3RCLG9CQUFlLEdBQVMsRUFBRSxDQUFDO1FBRXBDLE1BQUMsR0FBUSxDQUFDLENBQUM7UUFLWCxjQUFTLEdBQUcsS0FBSyxDQUFDO1FBQ2xCLGNBQVMsR0FBRyxHQUFHLEVBQU8sQ0FBQztRQUN2QixvQkFBZSxHQUFHLElBQUksRUFBdUIsQ0FBQztRQUM5QyxnQ0FBMkIsR0FBRyxHQUFHLEVBQWUsQ0FBQztRQUVqRCxXQUFNLEdBQUcsTUFBTSxDQUFDO1FBRVIsYUFBUSxHQUFHLElBQUksT0FBTyxFQUFhLENBQUM7SUFXNUMsQ0FBQzs7OztJQVJELG1EQUFROzs7SUFEUjtRQUVFLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNsQixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztTQUN4QjtJQUNILENBQUM7Ozs7SUFLRCxtREFBUTs7O0lBQVI7UUFBQSxpQkFnQ0M7UUEvQkMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFO1lBQ2xDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7U0FDakM7UUFFRCxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDNUIsS0FBSyxnQ0FBSSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPOzs7O1lBQUUsVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsWUFBWSxFQUFuQixDQUFtQixFQUFDLEdBQUUsSUFBSSxDQUMvRCxHQUFHOzs7WUFBQztnQkFDRixLQUFJLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDckMsS0FBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ3hCLENBQUMsRUFBQyxFQUNGLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQ3pCLENBQUMsU0FBUyxFQUFFLENBQUM7WUFFZCxLQUFLLGdDQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU87Ozs7WUFBRSxVQUFBLE1BQU0sSUFBSSxPQUFBLE1BQU0sQ0FBQyxhQUFhLEVBQXBCLENBQW9CLEVBQUMsR0FBRSxJQUFJLENBQ2hFLEdBQUc7OztZQUFDO2dCQUNGLEtBQUksQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSSxDQUFDLE9BQU87Ozs7Z0JBQUUsVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsT0FBTyxFQUFkLENBQWMsRUFBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQzFGLENBQUMsRUFBQyxFQUNGLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQ3pCLENBQUMsU0FBUyxFQUFFLENBQUM7WUFFZCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPOzs7O1lBQUUsVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsT0FBTyxFQUFkLENBQWMsRUFBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ3pGO1FBRUQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUNuQyxHQUFHOzs7O1FBQUMsVUFBQyxLQUFLO1lBQ1IsS0FBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QixLQUFJLENBQUMsa0JBQWtCLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDMUMsQ0FBQyxFQUFDLEVBQ0YsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FDekIsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNkLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN0QixDQUFDOzs7OztJQUVELHNEQUFXOzs7O0lBQVgsVUFBWSxPQUFzQjtRQUNoQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFlBQVksRUFBRTtZQUMzRCxPQUFPO1NBQ1I7SUFDSCxDQUFDOzs7O0lBRUQsbURBQVE7OztJQUFSOztZQUNRLFVBQVUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksRUFBRTtRQUNqRCxJQUFJLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxjQUFjLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7SUFDekIsQ0FBQzs7Ozs7SUFFRCxvREFBUzs7OztJQUFULFVBQVUsS0FBSztRQUNiLElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRTtZQUN4QyxPQUFPO1NBQ1I7UUFDRCxJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssSUFBSSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUNuRCxPQUFPO1NBQ1I7UUFFRCxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7O1lBQ3ZDLGNBQWMsR0FBRyxRQUFRLENBQUMsc0JBQXNCLENBQUMsdUJBQXVCLENBQUM7O1lBQ3pFLGFBQWEsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQzs7WUFDMUMsb0JBQW9CLEdBQUcsYUFBYSxDQUFDLElBQUk7Ozs7UUFBQyxVQUFDLE9BQW9CLElBQUssT0FBQSxPQUFPLENBQUMsTUFBTSxLQUFLLEtBQUssRUFBeEIsQ0FBd0IsRUFBRTtRQUVwRyxJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssS0FBSyxJQUFJLG9CQUFvQixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUN0RSxhQUFhLENBQUMsT0FBTzs7OztZQUFDLFVBQUMsSUFBaUI7Z0JBQ3RDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQ3JCLENBQUMsRUFBQyxDQUFDO1NBQ0o7UUFFRCxJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssS0FBSyxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDN0MsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7U0FDeEI7YUFBTTtZQUNMLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1NBQ3ZCO1FBRUQsS0FBSyxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQzFCLENBQUM7Ozs7O0lBRUQsc0RBQVc7Ozs7SUFBWCxVQUFZLE1BQTJCO1FBQ3JDLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNuQixJQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFO2dCQUNwQixJQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFO29CQUN6RCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2lCQUN2RTtxQkFBTTtvQkFDTCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2lCQUNwRTthQUNGO2lCQUFNLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFO2dCQUN0RCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQzthQUM1RDtpQkFBTSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsRUFBRTtnQkFDNUQsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7YUFDbEU7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7YUFDekQ7U0FDRjthQUFNO1lBQ0wsSUFBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRTtnQkFDcEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUN4QyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFBO2FBQ25FO2lCQUFNO2dCQUNMLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDeEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7YUFDekQ7U0FDRjtJQUNILENBQUM7Ozs7SUFFRCxtREFBUTs7O0lBQVI7UUFDRSxJQUFJLENBQUMsY0FBYyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO0lBQ3pCLENBQUM7Ozs7SUFFRCxzREFBVzs7O0lBQVg7UUFDRSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQzNCLENBQUM7Ozs7O0lBRU8seURBQWM7Ozs7SUFBdEI7UUFDRSxPQUFPLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3JDLENBQUM7Ozs7O0lBRU8sMkRBQWdCOzs7O0lBQXhCO1FBQ0UsT0FBTyxPQUFPLElBQUksQ0FBQyxPQUFPLEtBQUssVUFBVSxDQUFDO0lBQzVDLENBQUM7Ozs7O0lBRU8sdURBQVk7Ozs7SUFBcEI7UUFDRSxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksT0FBTyxJQUFJLENBQUMsT0FBTyxLQUFLLFFBQVEsQ0FBQztJQUMxRSxDQUFDOzs7Ozs7SUFFTyx1REFBWTs7Ozs7SUFBcEIsVUFBcUIsS0FBVTtRQUM3QixJQUFJLEtBQUssRUFBRTtZQUNULElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDeEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7YUFDckM7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3ZDO1lBQ0QsbUJBQW1CO1NBQ3BCO0lBQ0gsQ0FBQzs7Ozs7SUFFTyx5REFBYzs7OztJQUF0QjtRQUNFLElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdCLENBQUM7Ozs7O0lBRU8sdURBQVk7Ozs7SUFBcEI7UUFBQSxpQkF1REM7UUF0REMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDakIsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7WUFDbEIsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ3JEO1FBRUQsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFLEVBQUU7O2dCQUNuQixTQUFTLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTzs7OztZQUFFLFVBQUEsTUFBTTtnQkFDMUMsT0FBTztvQkFDTCxVQUFVLEVBQUUsTUFBTSxDQUFDLEtBQUssSUFBSSxNQUFNLENBQUMsVUFBVSxJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksTUFBTTtvQkFDdEUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLElBQUksSUFBSSxNQUFNLENBQUMsS0FBSyxJQUFJLE1BQU07aUJBQzVELENBQUM7WUFDSixDQUFDLEVBQUM7WUFDRixJQUFJLENBQUMsZUFBZSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUMxQzthQUFNLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFO1lBQzlCLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDckMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzFDLElBQUksQ0FBQyxlQUFlLENBQUM7U0FDeEI7YUFBTSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFO1lBQ2xDLElBQUksQ0FBQyxDQUFDLG1CQUFBLElBQUksQ0FBQyxPQUFPLEVBQXlDLENBQUMsQ0FDMUQsSUFBSSxDQUFDLGNBQWMsRUFDbkIsSUFBSSxDQUFDLE9BQU8sRUFDWixJQUFJLENBQUMsU0FBUzs7O1lBQ2QsY0FBTSxPQUFBLEtBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQTNDLENBQTJDOzs7WUFDakQsY0FBTSxPQUFBLEtBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQTFDLENBQTBDLEVBQ2pELENBQUMsQ0FBQyxJQUFJLENBQ0wsR0FBRzs7OztZQUFDLFVBQUMsT0FBWTtnQkFBWix3QkFBQSxFQUFBLFlBQVk7Z0JBQ2YsS0FBSSxDQUFDLGVBQWUsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBRXZDLEtBQUksQ0FBQyxlQUFlLENBQUMsT0FBTzs7OztnQkFBQyxVQUFDLE1BQU07O3dCQUM1QixLQUFLLEdBQVEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO3dCQUNqRixNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxNQUFNOzt3QkFDMUUsUUFBUSxHQUFRLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxNQUFNO29CQUV6RSxLQUFJLENBQUMsMkJBQTJCLEdBQUcsS0FBSSxDQUFDLDJCQUEyQixDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7Z0JBQzNGLENBQUMsRUFBQyxDQUFDO2dCQUVILEtBQUksQ0FBQyxZQUFZLENBQUMsS0FBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUVoQyxLQUFJLENBQUMsa0JBQWtCLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDMUMsQ0FBQyxFQUFDLEVBQ0YsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FDekIsQ0FBQyxTQUFTLEVBQUUsQ0FBQztTQUNmO1FBRUQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPOzs7O1FBQUMsVUFBQyxNQUFNOztnQkFDNUIsS0FBSyxHQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDbEYsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTTs7Z0JBRXpFLFFBQVEsR0FBUSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTTtZQUV6RSxLQUFJLENBQUMsMkJBQTJCLEdBQUcsS0FBSSxDQUFDLDJCQUEyQixDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDM0YsQ0FBQyxFQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNsQyxDQUFDOztnQkFqUEYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSw4QkFBOEI7b0JBQ3hDLHdrSEFBeUQ7O2lCQUUxRDs7OztnQkFaaUMsaUJBQWlCOzs7MkJBZWhELEtBQUs7d0JBQ0wsS0FBSzswQkFDTCxLQUFLO3dCQUNMLEtBQUs7NEJBQ0wsS0FBSzs4QkFDTCxLQUFLOzZCQUNMLEtBQUs7MEJBQ0wsS0FBSztpQ0FDTCxLQUFLOzRCQUNMLEtBQUs7MkJBQ0wsS0FBSzswQkFDTCxLQUFLOzhCQUNMLEtBQUs7eUNBQ0wsS0FBSzswQkFDTCxLQUFLO2tDQUNMLEtBQUs7MkJBZ0JMLFlBQVksU0FBQyxnQkFBZ0I7O0lBNk1oQyx1Q0FBQztDQUFBLEFBblBELElBbVBDO1NBOU9ZLGdDQUFnQzs7O0lBRTNDLG9EQUE0Qjs7SUFDNUIsaURBQW9DOztJQUNwQyxtREFBc0I7O0lBQ3RCLGlEQUF3Qjs7SUFDeEIscURBQXdCOztJQUN4Qix1REFBOEI7O0lBQzlCLHNEQUEyQjs7SUFDM0IsbURBQStCOztJQUMvQiwwREFBc0M7O0lBQ3RDLHFEQUErQjs7SUFDL0Isb0RBQStCOztJQUMvQixtREFBdUI7O0lBQ3ZCLHVEQUEwQjs7SUFDMUIsa0VBQStEOztJQUMvRCxtREFBaUM7O0lBQ2pDLDJEQUFvQzs7SUFFcEMsNkNBQVc7O0lBR1gsNERBQTZCOztJQUU3QixxREFBa0I7O0lBQ2xCLHFEQUF1Qjs7SUFDdkIsMkRBQThDOztJQUM5Qyx1RUFBaUQ7O0lBRWpELGtEQUFnQjs7Ozs7SUFFaEIsb0RBQTRDOzs7OztJQVMxQyw4REFBNkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgSW5wdXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LFxuICBPbkluaXQsIFNpbXBsZUNoYW5nZXMsIEhvc3RMaXN0ZW5lciwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0Zvcm1Db250cm9sLCBGb3JtR3JvdXB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7ZnJvbSwgU3ViamVjdCwgbWVyZ2V9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtGaWVsZENvbmZpZywgRmllbGRDb25maWdPcHRpb25zQnVpbGRlciwgRHluYW1pY0ZpZWxkQ29uZmlnT3B0aW9uc0J1aWxkZXJ9IGZyb20gJy4uL2NvbW1vbi1mb3JtLWNvbmZpZyc7XG5pbXBvcnQge3Rha2VVbnRpbCwgdGFwfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQge2Zyb21KUywgTGlzdCwgTWFwLCBTZXR9IGZyb20gJ2ltbXV0YWJsZSc7XG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaC1lcyc7XG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdzYi1keW5hbWljLW11bHRpcGxlLWRyb3Bkb3duJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2R5bmFtaWMtbXVsdGlwbGUtZHJvcGRvd24uY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9keW5hbWljLW11bHRpcGxlLWRyb3Bkb3duLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBEeW5hbWljTXVsdGlwbGVEcm9wZG93bkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xuXG4gIEBJbnB1dCgpIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgQElucHV0KCkgZmllbGQ6IEZpZWxkQ29uZmlnPFN0cmluZz47XG4gIEBJbnB1dCgpIG9wdGlvbnM6IGFueTtcbiAgQElucHV0KCkgbGFiZWw/OiBzdHJpbmc7XG4gIEBJbnB1dCgpIGxhYmVsSHRtbDogYW55O1xuICBASW5wdXQoKSBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgQElucHV0KCkgaXNNdWx0aXBsZSA9IHRydWU7XG4gIEBJbnB1dCgpIGNvbnRleHQ/OiBGb3JtQ29udHJvbDtcbiAgQElucHV0KCkgZm9ybUNvbnRyb2xSZWY/OiBGb3JtQ29udHJvbDtcbiAgQElucHV0KCkgZm9ybUdyb3VwPzogRm9ybUdyb3VwO1xuICBASW5wdXQoKSBwbGF0Zm9ybTogYW55ID0gJ3dlYic7XG4gIEBJbnB1dCgpIGRlZmF1bHQ/OiBhbnk7XG4gIEBJbnB1dCgpIGNvbnRleHREYXRhOiBhbnk7XG4gIEBJbnB1dCgpIGRhdGFMb2FkU3RhdHVzRGVsZWdhdGU6IFN1YmplY3Q8J0xPQURJTkcnIHwgJ0xPQURFRCc+O1xuICBASW5wdXQoKSBkZXBlbmRzPzogRm9ybUNvbnRyb2xbXTtcbiAgQElucHV0KCkgZGVwZW5kZW5jeVRlcm1zPzogYW55ID0gW107XG5cbiAgXzogYW55ID0gXztcblxuXG4gIHB1YmxpYyBpc0RlcGVuZHNJbnZhbGlkOiBhbnk7XG5cbiAgc2hvd01vZGFsID0gZmFsc2U7XG4gIHRlbXBWYWx1ZSA9IFNldDxhbnk+KCk7XG4gIHJlc29sdmVkT3B0aW9ucyA9IExpc3Q8TWFwPHN0cmluZywgc3RyaW5nPj4oKTtcbiAgb3B0aW9uVmFsdWVUb09wdGlvbkxhYmVsTWFwID0gTWFwPGFueSwgc3RyaW5nPigpO1xuXG4gIGZyb21KUyA9IGZyb21KUztcblxuICBwcml2YXRlIGRpc3Bvc2UkID0gbmV3IFN1YmplY3Q8dW5kZWZpbmVkPigpO1xuXG4gIEBIb3N0TGlzdGVuZXIoJ2RvY3VtZW50OmNsaWNrJylcbiAgZG9jQ2xpY2soKSB7XG4gICAgaWYgKHRoaXMuc2hvd01vZGFsKSB7XG4gICAgICB0aGlzLnNob3dNb2RhbCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGNoYW5nZURldGVjdGlvblJlZjogQ2hhbmdlRGV0ZWN0b3JSZWZcbiAgKSB7XG4gIH1cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHRoaXMuZmllbGQgJiYgdGhpcy5maWVsZC5yYW5nZSkge1xuICAgICAgdGhpcy5vcHRpb25zID0gdGhpcy5maWVsZC5yYW5nZTtcbiAgICB9XG5cbiAgICBpZiAoIV8uaXNFbXB0eSh0aGlzLmRlcGVuZHMpKSB7XG4gICAgICBtZXJnZSguLi5fLm1hcCh0aGlzLmRlcGVuZHMsIGRlcGVuZCA9PiBkZXBlbmQudmFsdWVDaGFuZ2VzKSkucGlwZShcbiAgICAgICAgdGFwKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmZvcm1Db250cm9sUmVmLnBhdGNoVmFsdWUobnVsbCk7XG4gICAgICAgICAgdGhpcy5yZXNldFRlbXBWYWx1ZSgpO1xuICAgICAgICB9KSxcbiAgICAgICAgdGFrZVVudGlsKHRoaXMuZGlzcG9zZSQpXG4gICAgICApLnN1YnNjcmliZSgpO1xuXG4gICAgICBtZXJnZSguLi5fLm1hcCh0aGlzLmRlcGVuZHMsIGRlcGVuZCA9PiBkZXBlbmQuc3RhdHVzQ2hhbmdlcykpLnBpcGUoXG4gICAgICAgIHRhcCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5pc0RlcGVuZHNJbnZhbGlkID0gXy5pbmNsdWRlcyhfLm1hcCh0aGlzLmRlcGVuZHMsIGRlcGVuZCA9PiBkZXBlbmQuaW52YWxpZCksIHRydWUpO1xuICAgICAgICB9KSxcbiAgICAgICAgdGFrZVVudGlsKHRoaXMuZGlzcG9zZSQpXG4gICAgICApLnN1YnNjcmliZSgpO1xuXG4gICAgICB0aGlzLmlzRGVwZW5kc0ludmFsaWQgPSBfLmluY2x1ZGVzKF8ubWFwKHRoaXMuZGVwZW5kcywgZGVwZW5kID0+IGRlcGVuZC5pbnZhbGlkKSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5mb3JtQ29udHJvbFJlZi52YWx1ZUNoYW5nZXMucGlwZShcbiAgICAgIHRhcCgodmFsdWUpID0+IHtcbiAgICAgICAgdGhpcy5zZXRUZW1wVmFsdWUodmFsdWUpO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdGlvblJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICB9KSxcbiAgICAgIHRha2VVbnRpbCh0aGlzLmRpc3Bvc2UkKVxuICAgICkuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy5zZXR1cE9wdGlvbnMoKTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICBpZiAoIWNoYW5nZXNbJ29wdGlvbnMnXSB8fCAhY2hhbmdlc1snb3B0aW9ucyddLmN1cnJlbnRWYWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIG9uU3VibWl0KCkge1xuICAgIGNvbnN0IGZpbmFsVmFsdWUgPSB0aGlzLnRlbXBWYWx1ZS50b0xpc3QoKS50b0pTKCk7XG4gICAgdGhpcy5mb3JtQ29udHJvbFJlZi5wYXRjaFZhbHVlKHRoaXMuaXNNdWx0aXBsZSA/IGZpbmFsVmFsdWUgOiBmaW5hbFZhbHVlWzBdKTtcbiAgICB0aGlzLmZvcm1Db250cm9sUmVmLm1hcmtBc0RpcnR5KCk7XG4gICAgdGhpcy5zaG93TW9kYWwgPSBmYWxzZTtcbiAgfVxuXG4gIG9wZW5Nb2RhbChldmVudCkge1xuICAgIGlmICh0aGlzLmNvbnRleHQgJiYgdGhpcy5jb250ZXh0LmludmFsaWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQgPT09IHRydWUgfHwgdGhpcy5pc0RlcGVuZHNJbnZhbGlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXRUZW1wVmFsdWUodGhpcy5mb3JtQ29udHJvbFJlZi52YWx1ZSk7XG4gICAgY29uc3QgaHRtbENvbGxlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzYi1tb2RhbC1kcm9wZG93bi13ZWInKTtcbiAgICBjb25zdCBtb2RhbEVsZW1lbnRzID0gQXJyYXkuZnJvbShodG1sQ29sbGVjdGlvbik7XG4gICAgY29uc3QgaXNNb2RhbEFscmVhZHlPcGVuZWQgPSBtb2RhbEVsZW1lbnRzLnNvbWUoKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiBlbGVtZW50LmhpZGRlbiA9PT0gZmFsc2UgKTtcblxuICAgIGlmICh0aGlzLnBsYXRmb3JtID09PSAnd2ViJyAmJiBpc01vZGFsQWxyZWFkeU9wZW5lZCAmJiAhdGhpcy5zaG93TW9kYWwpIHtcbiAgICAgIG1vZGFsRWxlbWVudHMuZm9yRWFjaCgoaXRlbTogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgaXRlbS5oaWRkZW4gPSB0cnVlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGxhdGZvcm0gPT09ICd3ZWInICYmIHRoaXMuc2hvd01vZGFsKSB7XG4gICAgICB0aGlzLnNob3dNb2RhbCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNob3dNb2RhbCA9IHRydWU7XG4gICAgfVxuXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICBhZGRTZWxlY3RlZChvcHRpb246IE1hcDxzdHJpbmcsIHN0cmluZz4pIHtcbiAgICBpZiAodGhpcy5pc011bHRpcGxlKSB7XG4gICAgICBpZih0aGlzLmZpZWxkLm91dHB1dCkge1xuICAgICAgICBpZih0aGlzLnRlbXBWYWx1ZS5pbmNsdWRlcyhvcHRpb24uZ2V0KHRoaXMuZmllbGQub3V0cHV0KSkpIHtcbiAgICAgICAgICB0aGlzLnRlbXBWYWx1ZSA9IHRoaXMudGVtcFZhbHVlLnJlbW92ZShvcHRpb24uZ2V0KHRoaXMuZmllbGQub3V0cHV0KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50ZW1wVmFsdWUgPSB0aGlzLnRlbXBWYWx1ZS5hZGQob3B0aW9uLmdldCh0aGlzLmZpZWxkLm91dHB1dCkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMudGVtcFZhbHVlLmluY2x1ZGVzKG9wdGlvbi5nZXQoJ25hbWUnKSkpIHtcbiAgICAgICAgdGhpcy50ZW1wVmFsdWUgPSB0aGlzLnRlbXBWYWx1ZS5yZW1vdmUob3B0aW9uLmdldCgnbmFtZScpKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50ZW1wVmFsdWUuaW5jbHVkZXMob3B0aW9uLmdldCgnaWRlbnRpZmllcicpKSkge1xuICAgICAgICB0aGlzLnRlbXBWYWx1ZSA9IHRoaXMudGVtcFZhbHVlLnJlbW92ZShvcHRpb24uZ2V0KCdpZGVudGlmaWVyJykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50ZW1wVmFsdWUgPSB0aGlzLnRlbXBWYWx1ZS5hZGQob3B0aW9uLmdldCgnbmFtZScpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYodGhpcy5maWVsZC5vdXRwdXQpIHtcbiAgICAgICAgdGhpcy50ZW1wVmFsdWUgPSB0aGlzLnRlbXBWYWx1ZS5jbGVhcigpO1xuICAgICAgICB0aGlzLnRlbXBWYWx1ZSA9IHRoaXMudGVtcFZhbHVlLmFkZChvcHRpb24uZ2V0KHRoaXMuZmllbGQub3V0cHV0KSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGVtcFZhbHVlID0gdGhpcy50ZW1wVmFsdWUuY2xlYXIoKTtcbiAgICAgICAgdGhpcy50ZW1wVmFsdWUgPSB0aGlzLnRlbXBWYWx1ZS5hZGQob3B0aW9uLmdldCgnbmFtZScpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbkNhbmNlbCgpIHtcbiAgICB0aGlzLmZvcm1Db250cm9sUmVmLm1hcmtBc0RpcnR5KCk7XG4gICAgdGhpcy5zaG93TW9kYWwgPSBmYWxzZTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuZGlzcG9zZSQubmV4dChudWxsKTtcbiAgICB0aGlzLmRpc3Bvc2UkLmNvbXBsZXRlKCk7XG4gIH1cblxuICBwcml2YXRlIGlzT3B0aW9uc0FycmF5KCkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHRoaXMub3B0aW9ucyk7XG4gIH1cblxuICBwcml2YXRlIGlzT3B0aW9uc0Nsb3N1cmUoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLm9wdGlvbnMgPT09ICdmdW5jdGlvbic7XG4gIH1cblxuICBwcml2YXRlIGlzT3B0aW9uc01hcCgpIHtcbiAgICByZXR1cm4gIUFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zKSAmJiB0eXBlb2YgdGhpcy5vcHRpb25zID09PSAnb2JqZWN0JztcbiAgfVxuXG4gIHByaXZhdGUgc2V0VGVtcFZhbHVlKHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB0aGlzLnRlbXBWYWx1ZSA9IFNldChmcm9tSlModmFsdWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGVtcFZhbHVlID0gU2V0KGZyb21KUyhbdmFsdWVdKSk7XG4gICAgICB9XG4gICAgICAvLyB0aGlzLm9uU3VibWl0KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZXNldFRlbXBWYWx1ZSgpIHtcbiAgICB0aGlzLnRlbXBWYWx1ZSA9IFNldChudWxsKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBPcHRpb25zKCkge1xuICAgIGlmICghdGhpcy5vcHRpb25zKSB7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBbXTtcbiAgICAgIHRoaXMucmVzb2x2ZWRPcHRpb25zID0gdGhpcy5yZXNvbHZlZE9wdGlvbnMuY2xlYXIoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc09wdGlvbnNBcnJheSgpKSB7XG4gICAgICBjb25zdCBvcHRpb25NYXAgPSBfLm1hcCh0aGlzLm9wdGlvbnMsIG9wdGlvbiA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWRlbnRpZmllcjogb3B0aW9uLnZhbHVlIHx8IG9wdGlvbi5pZGVudGlmaWVyIHx8IG9wdGlvbi5uYW1lIHx8IG9wdGlvbixcbiAgICAgICAgICBuYW1lOiBvcHRpb24ubGFiZWwgfHwgb3B0aW9uLm5hbWUgfHwgb3B0aW9uLnZhbHVlIHx8IG9wdGlvbixcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5yZXNvbHZlZE9wdGlvbnMgPSBmcm9tSlMob3B0aW9uTWFwKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNPcHRpb25zTWFwKCkpIHtcbiAgICAgIHRoaXMucmVzb2x2ZWRPcHRpb25zID0gKHRoaXMuZGVwZW5kcykgP1xuICAgICAgICBmcm9tSlModGhpcy5vcHRpb25zW3RoaXMuY29udGV4dC52YWx1ZV0pIDpcbiAgICAgICAgdGhpcy5yZXNvbHZlZE9wdGlvbnM7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzT3B0aW9uc0Nsb3N1cmUoKSkge1xuICAgICAgZnJvbSgodGhpcy5vcHRpb25zIGFzIER5bmFtaWNGaWVsZENvbmZpZ09wdGlvbnNCdWlsZGVyPGFueT4pKFxuICAgICAgICB0aGlzLmZvcm1Db250cm9sUmVmLFxuICAgICAgICB0aGlzLmRlcGVuZHMsXG4gICAgICAgIHRoaXMuZm9ybUdyb3VwLFxuICAgICAgICAoKSA9PiB0aGlzLmRhdGFMb2FkU3RhdHVzRGVsZWdhdGUubmV4dCgnTE9BRElORycpLFxuICAgICAgICAoKSA9PiB0aGlzLmRhdGFMb2FkU3RhdHVzRGVsZWdhdGUubmV4dCgnTE9BREVEJylcbiAgICAgICkpLnBpcGUoXG4gICAgICAgIHRhcCgob3B0aW9ucyA9IFtdKSA9PiB7XG4gICAgICAgICAgdGhpcy5yZXNvbHZlZE9wdGlvbnMgPSBmcm9tSlMob3B0aW9ucyk7XG5cbiAgICAgICAgICB0aGlzLnJlc29sdmVkT3B0aW9ucy5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlOiBhbnkgPSAhXy5pc0VtcHR5KHRoaXMuZmllbGQub3V0cHV0KSA/IG9wdGlvbi5nZXQodGhpcy5maWVsZC5vdXRwdXQpIDpcbiAgICAgICAgICAgICBvcHRpb24uZ2V0KCduYW1lJykgfHwgb3B0aW9uLmdldCgnaWRlbnRpZmllcicpIHx8IG9wdGlvbi5nZXQoJ3ZhbHVlJykgfHwgb3B0aW9uO1xuICAgICAgICAgICAgY29uc3QgbGFiZWxWYWw6IGFueSA9IG9wdGlvbi5nZXQoJ25hbWUnKSB8fCBvcHRpb24uZ2V0KCdsYWJlbCcpIHx8IG9wdGlvbjtcblxuICAgICAgICAgICAgdGhpcy5vcHRpb25WYWx1ZVRvT3B0aW9uTGFiZWxNYXAgPSB0aGlzLm9wdGlvblZhbHVlVG9PcHRpb25MYWJlbE1hcC5zZXQodmFsdWUsIGxhYmVsVmFsKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRoaXMuc2V0VGVtcFZhbHVlKHRoaXMuZGVmYXVsdCk7XG5cbiAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdGlvblJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIH0pLFxuICAgICAgICB0YWtlVW50aWwodGhpcy5kaXNwb3NlJClcbiAgICAgICkuc3Vic2NyaWJlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXNvbHZlZE9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZTogYW55ID0gIV8uaXNFbXB0eSh0aGlzLmZpZWxkLm91dHB1dCkgPyBvcHRpb24uZ2V0KHRoaXMuZmllbGQub3V0cHV0KSA6XG4gICAgICBvcHRpb24uZ2V0KCduYW1lJykgfHwgb3B0aW9uLmdldCgnaWRlbnRpZmllcicpIHx8IG9wdGlvbi5nZXQoJ3ZhbHVlJykgfHwgb3B0aW9uO1xuXG4gICAgICBjb25zdCBsYWJlbFZhbDogYW55ID0gb3B0aW9uLmdldCgnbmFtZScpIHx8IG9wdGlvbi5nZXQoJ2xhYmVsJykgfHwgb3B0aW9uO1xuXG4gICAgICB0aGlzLm9wdGlvblZhbHVlVG9PcHRpb25MYWJlbE1hcCA9IHRoaXMub3B0aW9uVmFsdWVUb09wdGlvbkxhYmVsTWFwLnNldCh2YWx1ZSwgbGFiZWxWYWwpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRUZW1wVmFsdWUodGhpcy5kZWZhdWx0KTtcbiAgfVxuXG59XG4iXX0=