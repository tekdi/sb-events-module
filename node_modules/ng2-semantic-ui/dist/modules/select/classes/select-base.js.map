{"version":3,"file":"select-base.js","sourceRoot":"","sources":["../../../../src/modules/select/classes/select-base.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    ViewChild, HostBinding, ElementRef, HostListener, Input, ContentChildren, QueryList,\n    AfterContentInit, TemplateRef, ViewContainerRef, ContentChild, EventEmitter, Output, OnDestroy, Renderer2\n} from \"@angular/core\";\nimport { Subscription } from \"rxjs/Subscription\";\nimport { DropdownService, SuiDropdownMenu } from \"../../dropdown/index\";\nimport { SearchService, LookupFn, FilterFn } from \"../../search/index\";\nimport { Util, ITemplateRefContext, HandledEvent, KeyCode, IFocusEvent } from \"../../../misc/util/index\";\nimport { ISelectLocaleValues, RecursivePartial, SuiLocalizationService } from \"../../../behaviors/localization/index\";\nimport { SuiSelectOption } from \"../components/select-option\";\nimport { SuiSelectSearch } from \"../directives/select-search\";\n\nexport interface IOptionContext<T> extends ITemplateRefContext<T> {\n    query?:string;\n}\n\n// We use generic type T to specify the type of the options we are working with,\n// and U to specify the type of the property of the option used as the value.\nexport abstract class SuiSelectBase<T, U> implements AfterContentInit, OnDestroy {\n    public dropdownService:DropdownService;\n    public searchService:SearchService<T, U>;\n\n    @ViewChild(SuiDropdownMenu)\n    protected _menu:SuiDropdownMenu;\n\n    // Keep track of all of the rendered select options. (Rendered by the user using *ngFor).\n    @ContentChildren(SuiSelectOption, { descendants: true })\n    protected _renderedOptions:QueryList<SuiSelectOption<T>>;\n\n    // Keep track of all of the subscriptions to the selected events on the rendered options.\n    private _renderedSubscriptions:Subscription[];\n\n    // Sets the Semantic UI classes on the host element.\n    @HostBinding(\"class.ui\")\n    @HostBinding(\"class.dropdown\")\n    private _selectClasses:boolean;\n\n    @HostBinding(\"class.active\")\n    public get isActive():boolean {\n        return this.dropdownService.isOpen;\n    }\n\n    @HostBinding(\"class.visible\")\n    public get isVisible():boolean {\n        return this._menu.isVisible;\n    }\n\n    @Input()\n    public isSearchable:boolean;\n\n    public isSearchExternal:boolean;\n\n    @HostBinding(\"class.search\")\n    private get _searchClass():boolean {\n        return this.isSearchable && !this.isSearchExternal;\n    }\n\n    @HostBinding(\"class.loading\")\n    public get isSearching():boolean {\n        return this.searchService.isSearching;\n    }\n\n    @ViewChild(SuiSelectSearch)\n    private _internalSearch?:SuiSelectSearch;\n\n    @ContentChild(SuiSelectSearch)\n    private _manualSearch?:SuiSelectSearch;\n\n    public get searchInput():SuiSelectSearch | undefined {\n        return this._manualSearch || this._internalSearch;\n    }\n\n    @Input(\"tabindex\")\n    private _tabIndex?:number;\n\n    @HostBinding(\"attr.tabindex\")\n    public get tabIndex():number {\n        if (this.isDisabled) {\n            // If disabled, remove from tabindex.\n            return -1;\n        }\n        if (this.dropdownService.isOpen && this.isSearchExternal) {\n            // If open & in menu search, remove from tabindex (as input always autofocusses).\n            return -1;\n        }\n        if (this._tabIndex != undefined) {\n            // If custom tabindex, default to that.\n            return this._tabIndex;\n        }\n        if (this._searchClass) {\n            // If search input enabled, tab goes to input.\n            return -1;\n        }\n        // Otherwise, return default of 0.\n        return 0;\n    }\n\n    @HostBinding(\"class.disabled\")\n    @Input()\n    public get isDisabled():boolean {\n        return this.dropdownService.isDisabled;\n    }\n\n    public set isDisabled(value:boolean) {\n        this.dropdownService.isDisabled = !!value;\n    }\n\n    @Input()\n    public set options(options:T[]) {\n        if (options) {\n            this.searchService.options = options;\n\n            this.optionsUpdateHook();\n        }\n    }\n\n    @Input()\n    public set optionsFilter(filter:FilterFn<T> | undefined) {\n        if (filter) {\n            this.searchService.optionsFilter = filter;\n\n            this.optionsUpdateHook();\n        }\n    }\n\n    @Input()\n    public set optionsLookup(lookup:LookupFn<T, U> | undefined) {\n        if (lookup) {\n            this.searchService.optionsLookup = lookup;\n\n            this.optionsUpdateHook();\n        }\n    }\n\n    public get filteredOptions():T[] {\n        return this.searchService.results;\n    }\n\n    // Deprecated\n    public get availableOptions():T[] {\n        return this.filteredOptions;\n    }\n\n    public get query():string | undefined {\n        return this.isSearchable ? this.searchService.query : undefined;\n    }\n\n    public set query(query:string | undefined) {\n        if (query != undefined) {\n            this.queryUpdateHook();\n            this.updateQuery(query);\n            // Update the rendered text as query has changed.\n            this._renderedOptions.forEach(ro => this.initialiseRenderedOption(ro));\n\n            if (this.searchInput) {\n                this.searchInput.query = query;\n            }\n        }\n    }\n\n    @Input()\n    public get labelField():string | undefined {\n        return this.searchService.optionsField;\n    }\n\n    public set labelField(field:string | undefined) {\n        this.searchService.optionsField = field;\n    }\n\n    public get labelGetter():(obj:T) => string {\n        // Helper function to retrieve the label from an item.\n        return (obj:T) => {\n            const label = Util.Object.readValue<T, string>(obj, this.labelField);\n            if (label != undefined) {\n                return label.toString();\n            }\n            return \"\";\n        };\n    }\n\n    @Input()\n    public valueField:string;\n\n    public get valueGetter():(obj:T) => U {\n        // Helper function to retrieve the value from an item.\n        return (obj:T) => Util.Object.readValue<T, U>(obj, this.valueField);\n    }\n\n    @Input()\n    public optionTemplate:TemplateRef<IOptionContext<T>>;\n\n    private _optionFormatter?:(o:T, q?:string) => string;\n\n    public get configuredFormatter():(option:T) => string {\n        if (this._optionFormatter) {\n            return o => this._optionFormatter!(o, this.isSearchable ? this.query : undefined);\n        } else if (this.searchService.optionsLookup) {\n            return o => this.labelGetter(o);\n        } else {\n            return o => this.searchService.highlightMatches(this.labelGetter(o), this.query || \"\");\n        }\n    }\n\n    @Input()\n    public set optionFormatter(formatter:((option:T, query?:string) => string) | undefined) {\n        this._optionFormatter = formatter;\n    }\n\n    private _localeValues:ISelectLocaleValues;\n    public localeOverrides:RecursivePartial<ISelectLocaleValues>;\n\n    public get localeValues():ISelectLocaleValues {\n        return this._localizationService.override<\"select\">(this._localeValues, this.localeOverrides);\n    }\n\n    @Input()\n    public icon:string;\n\n    @Input()\n    public transition:string;\n\n    @Input()\n    public transitionDuration:number;\n\n    @Output(\"touched\")\n    public onTouched:EventEmitter<void>;\n\n    private _documentKeyDownListener:() => void;\n\n    constructor(private _element:ElementRef, renderer:Renderer2, protected _localizationService:SuiLocalizationService) {\n        this.dropdownService = new DropdownService();\n        // We do want an empty query to return all results.\n        this.searchService = new SearchService<T, U>(true);\n\n        this.isSearchable = false;\n\n        this.onLocaleUpdate();\n        this._localizationService.onLanguageUpdate.subscribe(() => this.onLocaleUpdate());\n        this._renderedSubscriptions = [];\n\n        this.icon = \"dropdown\";\n        this.transition = \"slide down\";\n        this.transitionDuration = 200;\n\n        this.onTouched = new EventEmitter<void>();\n        this._documentKeyDownListener = renderer.listen(\"document\", \"keydown\", (e:KeyboardEvent) => this.onDocumentKeyDown(e));\n\n        this._selectClasses = true;\n    }\n\n    public ngAfterContentInit():void {\n        this._menu.service = this.dropdownService;\n        // We manually specify the menu items to the menu because the @ContentChildren doesn't pick up our dynamically rendered items.\n        this._menu.items = this._renderedOptions;\n\n        if (this._manualSearch) {\n            this.isSearchable = true;\n            this.isSearchExternal = true;\n        }\n\n        if (this.searchInput) {\n            this.searchInput.onQueryUpdated.subscribe((q:string) => this.query = q);\n            this.searchInput.onQueryKeyDown.subscribe((e:KeyboardEvent) => this.onQueryInputKeydown(e));\n        }\n\n        // We must call this immediately as changes doesn't fire when you subscribe.\n        this.onAvailableOptionsRendered();\n        this._renderedOptions.changes.subscribe(() => this.onAvailableOptionsRendered());\n    }\n\n    private onLocaleUpdate():void {\n        this._localeValues = this._localizationService.get().select;\n    }\n\n    // Hook is here since Typescript doesn't yet support overriding getters & setters while still calling the superclass.\n    protected optionsUpdateHook():void {}\n\n    // Hook is here since Typescript doesn't yet support overriding getters & setters while still calling the superclass.\n    protected queryUpdateHook():void {}\n\n    protected updateQuery(query:string):void {\n        // Update the query then open the dropdown, as after keyboard input it should always be open.\n        this.searchService.updateQuery(query, () =>\n            this.dropdownService.setOpenState(true));\n    }\n\n    protected resetQuery(delayed:boolean = true):void {\n        // The search delay is set to the transition duration to ensure results\n        // aren't rendered as the select closes as that causes a sudden flash.\n        if (delayed) {\n            this.searchService.searchDelay = this._menu.menuTransitionDuration;\n            this.searchService.updateQueryDelayed(\"\");\n        } else {\n            this.searchService.updateQuery(\"\");\n        }\n\n        if (this.searchInput) {\n            this.searchInput.query = \"\";\n        }\n    }\n\n    protected onAvailableOptionsRendered():void {\n        // Unsubscribe from all previous subscriptions to avoid memory leaks on large selects.\n        this._renderedSubscriptions.forEach(rs => rs.unsubscribe());\n        this._renderedSubscriptions = [];\n\n        this._renderedOptions.forEach(ro => {\n            // Slightly delay initialisation to avoid change after checked errors. TODO - look into avoiding this!\n            setTimeout(() => this.initialiseRenderedOption(ro));\n\n            this._renderedSubscriptions.push(ro.onSelected.subscribe(() => this.selectOption(ro.value)));\n        });\n\n        // If no options have been provided, autogenerate them from the rendered ones.\n        if (this.searchService.options.length === 0 && !this.searchService.optionsLookup) {\n            this.options = this._renderedOptions.map(ro => ro.value);\n        }\n    }\n\n    protected initialiseRenderedOption(option:SuiSelectOption<T>):void {\n        option.usesTemplate = !!this.optionTemplate;\n        option.formatter = this.configuredFormatter;\n\n        if (option.usesTemplate) {\n            this.drawTemplate(option.templateSibling, option.value);\n        }\n\n        option.changeDetector.markForCheck();\n    }\n\n    public abstract selectOption(option:T):void;\n\n    protected findOption(options:T[], value:U):T | undefined {\n        // Tries to find an option in options array\n        return options.find(o => value === this.valueGetter(o));\n    }\n\n    public onCaretClick(e:HandledEvent):void {\n        if (!e.eventHandled) {\n            e.eventHandled = true;\n\n            if (!this.dropdownService.isAnimating) {\n                this.dropdownService.setOpenState(!this.dropdownService.isOpen);\n\n                this.focus();\n            }\n        }\n    }\n\n    @HostListener(\"click\", [\"$event\"])\n    public onClick(e:HandledEvent):void {\n        if (!e.eventHandled && !this.dropdownService.isAnimating) {\n            e.eventHandled = true;\n\n            // If the dropdown is searchable, clicking should keep it open, otherwise we toggle the open state.\n            this.dropdownService.setOpenState(this.isSearchable ? true : !this.dropdownService.isOpen);\n\n            // Immediately focus the search input whenever clicking on the select.\n            this.focus();\n        }\n    }\n\n    @HostListener(\"focusin\")\n    private onFocusIn():void {\n        if (!this.dropdownService.isOpen && !this.dropdownService.isAnimating) {\n            this.dropdownService.setOpenState(true);\n\n            this.focus();\n        }\n    }\n\n    @HostListener(\"focusout\", [\"$event\"])\n    private onFocusOut(e:IFocusEvent):void {\n        if (!this._element.nativeElement.contains(e.relatedTarget)) {\n            this.dropdownService.setOpenState(false);\n            this.onTouched.emit();\n        }\n    }\n\n    @HostListener(\"keypress\", [\"$event\"])\n    public onKeyPress(e:KeyboardEvent):void {\n        if (e.keyCode === KeyCode.Enter) {\n            // Enables support for focussing and opening with the keyboard alone.\n            // Using directly because Renderer2 doesn't have invokeElementMethod method anymore.\n            this._element.nativeElement.click();\n        }\n    }\n\n    public onDocumentKeyDown(e:KeyboardEvent):void {\n        if (this._element.nativeElement.contains(e.target) &&\n            !this.dropdownService.isOpen &&\n            e.keyCode === KeyCode.Down) {\n\n            // Enables support for focussing and opening with the keyboard alone.\n            // Using directly because Renderer2 doesn't have invokeElementMethod method anymore.\n            this._element.nativeElement.click();\n\n            e.preventDefault();\n        }\n    }\n\n    public onQueryInputKeydown(event:KeyboardEvent):void {}\n\n    protected focus():void {\n        if (this.isSearchable && this.searchInput) {\n            // Focusses the search input only when searchable.\n            // Using directly because Renderer2 doesn't have invokeElementMethod method anymore.\n            this.searchInput.focus();\n        } else {\n            this._element.nativeElement.focus();\n        }\n    }\n\n    // Helper that draws the provided template beside the provided ViewContainerRef.\n    protected drawTemplate(siblingRef:ViewContainerRef, value:T):void {\n        siblingRef.clear();\n        // Use of `$implicit` means use of <ng-template let-option> syntax is supported.\n        siblingRef.createEmbeddedView(this.optionTemplate, {\n            $implicit: value,\n            query: this.query\n        });\n    }\n\n    public ngOnDestroy():void {\n        this._renderedSubscriptions.forEach(s => s.unsubscribe());\n        this._documentKeyDownListener();\n    }\n}\n"]}