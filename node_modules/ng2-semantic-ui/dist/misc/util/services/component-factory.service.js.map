{"version":3,"file":"component-factory.service.js","sourceRoot":"","sources":["../../../../src/misc/util/services/component-factory.service.ts"],"names":[],"mappings":"AAAA,OAAO,EACH,UAAU,EAAE,cAAc,EAAE,wBAAwB,EAAE,QAAQ,EAC9D,kBAAkB,EACrB,MAAM,eAAe,CAAC;;IAQnB,6BAAoB,eAA8B,EAC9B,yBAAkD,EAClD,SAAkB;QAFlB,oBAAe,GAAf,eAAe,CAAe;QAC9B,8BAAyB,GAAzB,yBAAyB,CAAyB;QAClD,cAAS,GAAT,SAAS,CAAS;KAAI;IAEnC,6CAAe,GAAtB,UAA0B,IAAY,EAAE,SAAyB;QAAzB,0BAAA,EAAA,cAAyB;;QAE7D,IAAM,OAAO,GAAG,IAAI,CAAC,yBAAyB,CAAC,uBAAuB,CAAC,IAAe,CAAC,CAAC;;QAGxF,IAAM,QAAQ,GAAG,kBAAkB,CAAC,gBAAgB,CAChD,SAAS,EACT,IAAI,CAAC,SAAS,CACjB,CAAC;;QAGF,IAAM,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAE9C,MAAM,CAAC,YAAY,CAAC;KACvB;IAEM,wCAAU,GAAjB,UAAoD,aAA8B,EAAE,QAAuB,EAAE,OAAS;QAClH,aAAa,CAAC,kBAAkB,CAAI,QAAQ,EAAE,OAAO,CAAC,CAAC;KAC1D;IAED,2DAA2D;;IACpD,0CAAY;;IAAnB,UAAuB,YAA4B,EAAE,aAA8B;QAC/E,aAAa,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;KAClD;IAED,sDAAsD;;IAC/C,iDAAmB;;IAA1B,UAA8B,YAA4B;QACtD,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;KAC1D;IAED,yDAAyD;;IAClD,mDAAqB;;IAA5B,UAAgC,YAA4B;QACxD,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;KAC1D;IAED,oDAAoD;;IAC7C,2CAAa;;IAApB,UAAwB,YAA4B,EAAE,OAAe;QACjE,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;KAC5D;IAED,4CAA4C;;IACrC,gDAAkB;;IAAzB,UAA6B,YAA4B;QACrD,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,CAAA,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAE,CAAA,CAAC,CAAC;KACrE;IAEM,gDAAkB,GAAzB,UAA6B,YAA4B;QACrD,IAAM,OAAO,GAAG,YAAY,CAAC,QAAQ,CAAC,aAAwB,CAAC;;QAE/D,EAAE,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;YACrB,OAAO,CAAC,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;SAC3C;KACJ;;gBAzDJ,UAAU;;;;gBARK,cAAc;gBAAE,wBAAwB;gBAAE,QAAQ;;8BADlE;;SAUa,mBAAmB","sourcesContent":["import {\n    Injectable, ApplicationRef, ComponentFactoryResolver, Injector, ComponentRef,\n    ReflectiveInjector, Provider, Type, ViewContainerRef, TemplateRef\n} from \"@angular/core\";\n\nexport interface IImplicitContext<T> {\n    $implicit?:T;\n}\n\n@Injectable()\nexport class SuiComponentFactory {\n    constructor(private _applicationRef:ApplicationRef,\n                private _componentFactoryResolver:ComponentFactoryResolver,\n                private _injector:Injector) {}\n\n    public createComponent<T>(type:Type<T>, providers:Provider[] = []):ComponentRef<T> {\n        // Resolve a factory for creating components of type `type`.\n        const factory = this._componentFactoryResolver.resolveComponentFactory(type as Type<T>);\n\n        // Resolve and create an injector with the specified providers.\n        const injector = ReflectiveInjector.resolveAndCreate(\n            providers,\n            this._injector\n        );\n\n        // Create a component using the previously resolved factory & injector.\n        const componentRef = factory.create(injector);\n\n        return componentRef;\n    }\n\n    public createView<T, U extends IImplicitContext<T>>(viewContainer:ViewContainerRef, template:TemplateRef<U>, context:U):void {\n        viewContainer.createEmbeddedView<U>(template, context);\n    }\n\n    // Inserts the component into the specified view container.\n    public attachToView<T>(componentRef:ComponentRef<T>, viewContainer:ViewContainerRef):void {\n        viewContainer.insert(componentRef.hostView, 0);\n    }\n\n    // Inserts the component in the root application node.\n    public attachToApplication<T>(componentRef:ComponentRef<T>):void {\n        this._applicationRef.attachView(componentRef.hostView);\n    }\n\n    // Detaches the component from the root application node.\n    public detachFromApplication<T>(componentRef:ComponentRef<T>):void {\n        this._applicationRef.detachView(componentRef.hostView);\n    }\n\n    // Moves the component to the specified DOM element.\n    public moveToElement<T>(componentRef:ComponentRef<T>, element:Element):void {\n        element.appendChild(componentRef.location.nativeElement);\n    }\n\n    // Moves the component to the document body.\n    public moveToDocumentBody<T>(componentRef:ComponentRef<T>):void {\n        this.moveToElement(componentRef, document.querySelector(\"body\")!);\n    }\n\n    public detachFromDocument<T>(componentRef:ComponentRef<T>):void {\n        const element = componentRef.location.nativeElement as Element;\n        // We can't use `element.remove()` due to lack of IE11 support.\n        if (element.parentNode) {\n            element.parentNode.removeChild(element);\n        }\n    }\n}\n"]}