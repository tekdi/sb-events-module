{"version":3,"sources":["../../node_modules/tslib/tslib.es6.js","ng://ngx-chips/core/pipes/highlight.pipe.ts","ng://ngx-chips/core/constants/index.ts","ng://ngx-chips/core/providers/drag-provider.ts","ng://ngx-chips/defaults.ts","ng://ngx-chips/core/providers/options-provider.ts","ng://ngx-chips/core/accessor.ts","ng://ngx-chips/core/helpers/listen.ts","ng://ngx-chips/components/tag-input-form/tag-input-form.component.ts","ng://ngx-chips/components/tag/tag-ripple.component.ts","ng://ngx-chips/components/tag/tag.component.ts","ng://ngx-chips/components/tag-input/animations.ts","ng://ngx-chips/components/dropdown/tag-input-dropdown.component.ts","ng://ngx-chips/components/tag-input/tag-input.ts","ng://ngx-chips/components/icon/icon.ts","ng://ngx-chips/tag-input.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__assign","assign","t","s","i","n","arguments","length","prototype","call","apply","this","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__read","o","m","ar","error","escape","replace","HighlightPipe","transform","arg","trim","regex","RegExp","Pipe","name","ACTIONS_KEYS","KEY_PRESS_ACTIONS","8","46","37","39","9","DragProvider","state","dragging","dropping","index","undefined","setDraggedItem","event","tag","dataTransfer","setData","JSON","stringify","getDraggedItem","data","getData","parse","_a","setSender","sender","setReceiver","receiver","onTagDropped","indexDragged","indexDropped","onDragEnd","onRemoveRequested","onAddingRequested","setState","getState","Injectable","defaults","tagInput","separatorKeys","separatorKeyCodes","maxItems","Infinity","placeholder","secondaryPlaceholder","validators","asyncValidators","onlyFromAutocomplete","errorMessages","theme","onTextChangeDebounce","inputId","inputClass","clearOnBlur","hideForm","addOnBlur","addOnPaste","pasteSplitPattern","blinkIfDupe","removable","editable","allowDupes","modelAsStrings","trimTags","ripple","tabIndex","disable","dragZone","onRemoving","onAdding","displayBy","identifyBy","animationDuration","enter","leave","dropdown","appendToBody","offset","focusFirstElement","showDropdownIfEmpty","minimumTextLength","limitItemsTo","keepOpen","dynamicUpdate","zIndex","matchingFn","targetValue","toString","toLowerCase","indexOf","OptionsProvider","setOptions","options","isObject","obj","TagInputAccessor","_items","items","_onChangeCallback","onTouched","_onTouchedCallback","writeValue","registerOnChange","fn","registerOnTouched","getItemValue","item","fromDropdown","property","getItemDisplay","getItemsWithout","filter","position","Input","Directive","listen","listenerType","action","condition","listeners","Error","TagInputForm","onSubmit","EventEmitter","onBlur","onFocus","onKeyup","onKeydown","inputTextChange","tabindex","disabled","FormControl","text","setValue","emit","ngOnInit","setValidators","setAsyncValidators","form","FormGroup","ngOnChanges","changes","firstChange","currentValue","controls","enable","get","isInputFocused","doc","document","activeElement","input","nativeElement","getErrorMessages","messages","_this","keys","err","hasError","map","hasErrors","dirty","valid","focus","blur","getElementPosition","getBoundingClientRect","destroy","parentElement","removeChild","onKeyDown","$event","inputText","submit","onKeyUp","preventDefault","Output","ViewChild","Component","selector","template","TagRipple","animations","trigger","style","width","opacity","transition","animate","keyframes","borderRadius","navigator","window","userAgent","vendor","isChrome","test","TagComponent","element","renderer","cdRef","onSelect","onRemove","onTagEdited","editing","rippleState","model","readonly","select","stopPropagation","remove","move","moving","keydown","keyCode","disableEditMode","blink","classList","add","setTimeout","toggleEditMode","activateEditMode","onBlurred","innerText","getDisplayValue","hasRipple","getContentEditableText","storeNewValue","detectChanges","setContentEditableText","isDeleteIconVisible","getContentEditable","canAddTag","querySelector","ElementRef","Renderer2","ChangeDetectorRef","HostBinding","HostListener","TagInputDropdown","injector","TagInputComponent","_autocompleteItems","show","maxItemsReached","getFormValue","hasMinimumText","calculatePosition","getMatchingItems","hasItems","isHidden","isVisible","isDisabled","shouldShow","shouldHide","autocompleteObservable","getItemsFromObservable","hide","setItems","requestAdding","createTagModel","catch","resetItems","setLoadingState","pipe","first","subscribe","populateItems","ngAfterViewInit","onItemClicked","onHide","KEEP_OPEN","onTextChange","asObservable","distinctUntilChanged","debounceTime","updatePosition","inputForm","menu","dropdownState","menuState","selectedItem","scrollListener","onWindowBlur","formValue","display","dupesAllowed","autocompleteItems","hasValue","tags","some","slice","isLoading","Injector","Ng2Dropdown","ContentChildren","TemplateRef","CUSTOM_ACCESSOR","DragEvent","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","dragProvider","_super","onAdd","onPaste","onValidationError","inputTextValue","errors","appendTag","concat","__spread","createTag","val","isTagValid","fromAutocomplete","dupe","findDupe","find","isFromAutocomplete","assertions","Boolean","onPasteCallback","isIE","clipboardData","type","getText","requests","split","setInputValue","resetInput","all","__","constructor","create","__extends","setUpKeypressListeners","setupSeparatorKeysListener","setUpInputKeydownListeners","observers","setUpTextChangeSubscriber","setUpOnBlurSubscriber","setUpOnPasteListener","statusChanges$","statusChanges","status","isProgressBarVisible$","console","warn","setAnimationMetadata","subscribeFn","removeItem","giveupFocus","addItem","selectItem","selectedTag","fireEvents","eventName","forEach","listener","handleKeydown","which","shiftKey","constants.KEY_PRESS_ACTIONS","constants.ACTIONS_KEYS","moveToTag","isFirstTag","isLastTag","onFormSubmit","_b","emitEvent","getControl","applyFocus","displayAutocomplete","hasCustomTemplate","templates","menuTemplate","onDragStarted","zone","onDragOver","isDropping","isReceiver","onTagBlurred","changedElement","trackBy","updateEditedTag","direction","isLast","isFirst","getTagIndex","getTagAtIndex","last","toArray","findIndex","reset","appendItem","statusUpdate","useSeparatorKeys","hasKeyCode","hasKey","isIMEProcessing","valueChanges","id","animationMetadata","params","ContentChild","descendants","ViewChildren","providers","DeleteIconComponent","optionsProvider","TagInputModule","withDefaults","NgModule","imports","CommonModule","ReactiveFormsModule","FormsModule","Ng2DropdownModule","declarations","exports","COMPOSITION_BUFFER_MODE","useValue"],"mappings":";;;;;;;;;;;;;;oFAgBA,IAAIA,EAAgB,SAASC,EAAGC,GAI5B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IASrB,IAAIO,EAAW,WAQlB,OAPAA,EAAWN,OAAOO,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAIN,KADTK,EAAIG,UAAUF,GACOV,OAAOc,UAAUT,eAAeU,KAAKN,EAAGL,KAAII,EAAEJ,GAAKK,EAAEL,IAE9E,OAAOI,IAEKQ,MAAMC,KAAML,YAezB,SAASM,EAAWC,EAAYC,EAAQC,EAAKC,GAChD,IAA2HxB,EAAvHyB,EAAIX,UAAUC,OAAQW,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOtB,OAAOyB,yBAAyBL,EAAQC,GAAOC,EACrH,GAAuB,iBAAZI,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASR,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIZ,EAAIS,EAAWN,OAAS,EAAGH,GAAK,EAAGA,KAASZ,EAAIqB,EAAWT,MAAIc,GAAKD,EAAI,EAAIzB,EAAE0B,GAAKD,EAAI,EAAIzB,EAAEsB,EAAQC,EAAKG,GAAK1B,EAAEsB,EAAQC,KAASG,GAChJ,OAAOD,EAAI,GAAKC,GAAKxB,OAAO4B,eAAeR,EAAQC,EAAKG,GAAIA,EAWzD,SAASK,EAAUC,EAASC,EAAYC,EAAGC,GAE9C,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,OAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUjB,MAAMc,EAASC,GAAc,KAAKS,WAI/D,SAASM,EAAYhB,EAASiB,GACjC,IAAsGC,EAAGC,EAAGzC,EAAG0C,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP7C,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO8C,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEV,KAAMgB,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BT,EAAES,OAAOC,UAAY,WAAa,OAAO3C,OAAUiC,EACvJ,SAASM,EAAK7C,GAAK,OAAO,SAAUkD,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOZ,GAAG,IACN,GAAIH,EAAI,EAAGC,IAAMzC,EAAY,EAARsD,EAAG,GAASb,EAAU,OAAIa,EAAG,GAAKb,EAAS,SAAOzC,EAAIyC,EAAU,SAAMzC,EAAEO,KAAKkC,GAAI,GAAKA,EAAET,SAAWhC,EAAIA,EAAEO,KAAKkC,EAAGa,EAAG,KAAKlB,KAAM,OAAOpC,EAE3J,OADIyC,EAAI,EAAGzC,IAAGsD,EAAK,CAAS,EAARA,EAAG,GAAQtD,EAAE8B,QACzBwB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGtD,EAAIsD,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAEd,MAAOwB,EAAG,GAAIlB,MAAM,GAChD,KAAK,EAAGO,EAAEC,QAASH,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIS,MAAOb,EAAEG,KAAKU,MAAO,SACxC,QACI,KAAMxD,EAAI2C,EAAEG,MAAM9C,EAAIA,EAAEK,OAAS,GAAKL,EAAEA,EAAEK,OAAS,KAAkB,IAAViD,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,SACjG,GAAc,IAAVW,EAAG,MAActD,GAAMsD,EAAG,GAAKtD,EAAE,IAAMsD,EAAG,GAAKtD,EAAE,IAAM,CAAE2C,EAAEC,MAAQU,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQ5C,EAAE,GAAI,CAAE2C,EAAEC,MAAQ5C,EAAE,GAAIA,EAAIsD,EAAI,MAC7D,GAAItD,GAAK2C,EAAEC,MAAQ5C,EAAE,GAAI,CAAE2C,EAAEC,MAAQ5C,EAAE,GAAI2C,EAAEI,IAAIU,KAAKH,GAAK,MACvDtD,EAAE,IAAI2C,EAAEI,IAAIS,MAChBb,EAAEG,KAAKU,MAAO,SAEtBF,EAAKf,EAAKhC,KAAKe,EAASqB,GAC1B,MAAOV,GAAKqB,EAAK,CAAC,EAAGrB,GAAIQ,EAAI,EAAI,QAAWD,EAAIxC,EAAI,EACtD,GAAY,EAARsD,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAExB,MAAOwB,EAAG,GAAKA,EAAG,QAAK,EAAQlB,MAAM,GArB9BL,CAAK,CAAC5B,EAAGkD,MA8CtD,SAASK,EAAOC,EAAGxD,GACtB,IAAIyD,EAAsB,mBAAXT,QAAyBQ,EAAER,OAAOC,UACjD,IAAKQ,EAAG,OAAOD,EACf,IAAmB3C,EAAYiB,EAA3B/B,EAAI0D,EAAErD,KAAKoD,GAAOE,EAAK,GAC3B,IACI,WAAc,IAAN1D,GAAgBA,KAAM,MAAQa,EAAId,EAAE8B,QAAQI,MAAMyB,EAAGJ,KAAKzC,EAAEc,OAExE,MAAOgC,GAAS7B,EAAI,CAAE6B,MAAOA,GACjC,QACQ,IACQ9C,IAAMA,EAAEoB,OAASwB,EAAI1D,EAAU,SAAI0D,EAAErD,KAAKL,GAE1D,QAAkB,GAAI+B,EAAG,MAAMA,EAAE6B,OAE7B,OAAOD,EC1IX,IAAME,EAAS,SAAA9D,GAAK,OAAAA,EAAE+D,QAAQ,yBAA0B,sBAKxD,SAAAC,KAkBA,OAZWA,EAAA3D,UAAA4D,UAAP,SAAiBpC,EAAeqC,GAC5B,IAAKA,EAAIC,OACL,OAAOtC,EAGX,IACI,IAAMuC,EAAQ,IAAIC,OAAO,IAAIP,EAAOI,GAAI,IAAK,KAC7C,OAAOrC,EAAMkC,QAAQK,EAAO,aAC9B,MAAOpC,GACL,OAAOH,IAfNmC,EAAavD,EAAA,CAHzB6D,EAAAA,KAAK,CACFC,KAAM,eAEGP,MCIAQ,EACD,SADCA,EAEI,cAFJA,EAGI,cAHJA,EAIJ,MAGIC,EAAoB,CAC7BC,EAAGF,EACHG,GAAIH,EACJI,GAAIJ,EACJK,GAAIL,EACJM,EAAGN,gBCDP,SAAAO,IAIWvE,KAAAwE,MAAe,CAClBC,UAAU,EACVC,UAAU,EACVC,WAAOC,GAoFf,OA5EWL,EAAA1E,UAAAgF,eAAP,SAAsBC,EAAkBC,GAChCD,GAASA,EAAME,cACfF,EAAME,aAAaC,QDbE,OCayBC,KAAKC,UAAUJ,KAQ9DR,EAAA1E,UAAAuF,eAAP,SAAsBN,GAClB,GAAIA,GAASA,EAAME,aAAc,CAC7B,IAAMK,EAAOP,EAAME,aAAaM,QDvBX,QCwBrB,IACI,OAAOJ,KAAKK,MAAMF,GACpB,MAAAG,GACE,UASLjB,EAAA1E,UAAA4F,UAAP,SAAiBC,GACb1F,KAAK0F,OAASA,GAOXnB,EAAA1E,UAAA8F,YAAP,SAAmBC,GACf5F,KAAK4F,SAAWA,GASbrB,EAAA1E,UAAAgG,aAAP,SAAoBd,EAAee,EAAsBC,GACrD/F,KAAKgG,YAELhG,KAAK0F,OAAOO,kBAAkBlB,EAAKe,GACnC9F,KAAK4F,SAASM,mBAAkB,EAAOnB,EAAKgB,IAOzCxB,EAAA1E,UAAAsG,SAAP,SAAgB3B,GACZxE,KAAKwE,MAAKnF,EAAAA,EAAA,GAAQW,KAAKwE,OAAUA,IAO9BD,EAAA1E,UAAAuG,SAAP,SAAgBhG,GACZ,OAAOA,EAAMJ,KAAKwE,MAAMpE,GAAOJ,KAAKwE,OAMjCD,EAAA1E,UAAAmG,UAAP,WACIhG,KAAKmG,SAAS,CACV1B,UAAU,EACVC,UAAU,EACVC,WAAOC,KAxFNL,EAAYtE,EAAA,CADxBoG,EAAAA,cACY9B,MCuCA+B,EAAW,CACpBC,SAA2B,CACvBC,cAAe,GACfC,kBAAmB,GACnBC,SAAUC,EAAAA,EACVC,YF9DmB,QE+DnBC,qBF9D6B,kBE+D7BC,WAAY,GACZC,gBAAiB,GACjBC,sBAAsB,EACtBC,cAAe,GACfC,MAAO,GACPC,qBAAsB,IACtBC,QAAS,KACTC,WAAY,GACZC,aAAa,EACbC,UAAU,EACVC,WAAW,EACXC,YAAY,EACZC,kBAAmB,IACnBC,aAAa,EACbC,WAAW,EACXC,UAAU,EACVC,YAAY,EACZC,gBAAgB,EAChBC,UAAU,EACVC,QAAQ,EACRC,SAAU,GACVC,SAAS,EACTC,SAAU,GACVC,gBAAYzD,EACZ0D,cAAU1D,EACV2D,UAAW,UACXC,WAAY,QACZC,kBAAmB,CACfC,MAAO,QACPC,MAAO,UAGfC,SAAmC,CAC/BL,UAAW,UACXC,WAAY,QACZK,cAAc,EACdC,OAAQ,OACRC,mBAAmB,EACnBC,qBAAqB,EACrBC,kBAAmB,EACnBC,aAAcvC,EAAAA,EACdwC,UAAU,EACVC,eAAe,EACfC,OAAQ,IACRC,WAUR,SAA4CjI,EAAelB,GACvD,IAAMoJ,EAAcpJ,EAAOH,KAAKuI,WAAWiB,WAE3C,OAAOD,GAAeA,EACjBE,cACAC,QAAQrI,EAAMoI,gBAAkB,KCpHzC,IAAAE,EAAA,WAAA,SAAAA,KAOA,OAJWA,EAAA9J,UAAA+J,WAAP,SAAkBC,GACdF,EAAgBrD,SAASC,SAAQlH,EAAAA,EAAA,GAAOiH,EAASC,UAAasD,EAAQtD,UACtEoD,EAAgBrD,SAASsC,SAAQvJ,EAAAA,EAAA,GAAOiH,EAASsC,UAAaiB,EAAQjB,WAJ5De,EAAArD,SAAWA,EAM7BqD,EAPA,YCAgBG,EAASC,GACrB,OAAOA,IAAQhL,OAAOgL,oBAI1B,SAAAC,IACYhK,KAAAiK,OAAqB,GASbjK,KAAAuI,UAAoBoB,EAAgBrD,SAASC,SAASgC,UAKtDvI,KAAAwI,WAAqBmB,EAAgBrD,SAASC,SAASiC,WAsD3E,OApDIzJ,OAAA4B,eAAWqJ,EAAAnK,UAAA,QAAK,KAAhB,WACI,OAAOG,KAAKiK,YAGhB,SAAiBC,GACblK,KAAKiK,OAASC,EACdlK,KAAKmK,kBAAkBnK,KAAKiK,yCAGzBD,EAAAnK,UAAAuK,UAAP,WACIpK,KAAKqK,sBAGFL,EAAAnK,UAAAyK,WAAP,SAAkBJ,GACdlK,KAAKiK,OAASC,GAAS,IAGpBF,EAAAnK,UAAA0K,iBAAP,SAAwBC,GACpBxK,KAAKmK,kBAAoBK,GAGtBR,EAAAnK,UAAA4K,kBAAP,SAAyBD,GACrBxK,KAAKqK,mBAAqBG,GAQvBR,EAAAnK,UAAA6K,aAAP,SAAoBC,EAAgBC,QAAA,IAAAA,IAAAA,GAAA,GAChC,IAAMC,EAAWD,GAAgB5K,KAAK4I,SAAW5I,KAAK4I,SAASJ,WAAaxI,KAAKwI,WACjF,OAAOsB,EAASa,GAAQA,EAAKE,GAAYF,GAQtCX,EAAAnK,UAAAiL,eAAP,SAAsBH,EAAgBC,QAAA,IAAAA,IAAAA,GAAA,GAClC,IAAMC,EAAWD,GAAgB5K,KAAK4I,SAAW5I,KAAK4I,SAASL,UAAYvI,KAAKuI,UAChF,OAAOuB,EAASa,GAAQA,EAAKE,GAAYF,GAOnCX,EAAAnK,UAAAkL,gBAAV,SAA0BpG,GACtB,OAAO3E,KAAKkK,MAAMc,QAAO,SAACL,EAAMM,GAAa,OAAAA,IAAatG,MAzDrD1E,EAAA,CAARiL,EAAAA,yCAKQjL,EAAA,CAARiL,EAAAA,0CAfQlB,EAAgB/J,EAAA,CAD5BkL,EAAAA,aACYnB,eCTGoB,EAAOC,EAAsBC,EAAmBC,GAE5D,QAF4D,IAAAA,IAAAA,GAAA,IAEvDvL,KAAKwL,UAAUpM,eAAeiM,GAC/B,MAAM,IAAII,MAAM,kCAIfF,GAKLvL,KAAKwL,UAAUH,GAAcrI,KAAKsI,oBCXtC,SAAAI,IAIqB1L,KAAA2L,SAA8B,IAAIC,EAAAA,aAKlC5L,KAAA6L,OAA4B,IAAID,EAAAA,aAKhC5L,KAAA8L,QAA6B,IAAIF,EAAAA,aAKjC5L,KAAA+L,QAA6B,IAAIH,EAAAA,aAKjC5L,KAAAgM,UAA+B,IAAIJ,EAAAA,aAKnC5L,KAAAiM,gBAAwC,IAAIL,EAAAA,aAY7C5L,KAAA8G,WAA4B,GAM5B9G,KAAA+G,gBAAsC,GAgBtC/G,KAAAkM,SAAW,GAKXlM,KAAAmM,UAAW,EA8BVnM,KAAA2K,KAAoB,IAAIyB,EAAAA,YAAY,CAAE/K,MAAO,GAAI8K,SAAUnM,KAAKmM,WAkHrF,OAhIIpN,OAAA4B,eAAW+K,EAAA7L,UAAA,YAAS,KAApB,WACI,OAAOG,KAAK2K,KAAKtJ,WAOrB,SAAqBgL,GACjBrM,KAAK2K,KAAK2B,SAASD,GAEnBrM,KAAKiM,gBAAgBM,KAAKF,oCAK9BX,EAAA7L,UAAA2M,SAAA,WACIxM,KAAK2K,KAAK8B,cAAczM,KAAK8G,YAC7B9G,KAAK2K,KAAK+B,mBAAmB1M,KAAK+G,iBAGlC/G,KAAK2M,KAAO,IAAIC,EAAAA,UAAU,CACtBjC,KAAM3K,KAAK2K,QAInBe,EAAA7L,UAAAgN,YAAA,SAAYC,GACJA,EAAQX,WAAaW,EAAQX,SAASY,cAClCD,EAAQX,SAASa,aACjBhN,KAAK2M,KAAKM,SAAe,KAAE9E,UAE3BnI,KAAK2M,KAAKM,SAAe,KAAEC,WAQvCnO,OAAA4B,eAAW+K,EAAA7L,UAAA,QAAK,KAAhB,WACI,OAAOG,KAAK2M,KAAKQ,IAAI,yCAMlBzB,EAAA7L,UAAAuN,eAAP,WACI,IAAMC,EAA0B,oBAAbC,SAA2BA,cAAW1I,EACzD,QAAOyI,GAAMA,EAAIE,gBAAkBvN,KAAKwN,MAAMC,eAO3C/B,EAAA7L,UAAA6N,iBAAP,SAAwBC,GAAxB,IAAAC,EAAA5N,KACI,OAAOjB,OAAO8O,KAAKF,GACd3C,QAAO,SAAA8C,GAAO,OAAAF,EAAKvM,MAAM0M,SAASD,MAClCE,KAAI,SAAAF,GAAO,OAAAH,EAASG,OAMtBpC,EAAA7L,UAAAoO,UAAP,WACU,IAAAzI,EAAAxF,KAAA2M,KAAEuB,EAAA1I,EAAA0I,MAAO7M,EAAAmE,EAAAnE,MAAO8M,EAAA3I,EAAA2I,MACtB,OAAOD,GAAS7M,EAAMsJ,OAASwD,GAM5BzC,EAAA7L,UAAAuO,MAAP,WACIpO,KAAKwN,MAAMC,cAAcW,SAMtB1C,EAAA7L,UAAAwO,KAAP,WACIrO,KAAKwN,MAAMC,cAAcY,QAMtB3C,EAAA7L,UAAAyO,mBAAP,WACI,OAAOtO,KAAKwN,MAAMC,cAAcc,yBAO7B7C,EAAA7L,UAAA2O,QAAP,WACI,IAAMhB,EAAQxN,KAAKwN,MAAMC,cACzBD,EAAMiB,cAAcC,YAAYlB,IAO7B9B,EAAA7L,UAAA8O,UAAP,SAAiBC,GAEb,GADA5O,KAAK6O,UAAY7O,KAAKqB,MAAMA,MACT,UAAfuN,EAAOxO,IAGT,OAAOJ,KAAKgM,UAAUO,KAAKqC,GAFzB5O,KAAK8O,OAAOF,IAUblD,EAAA7L,UAAAkP,QAAP,SAAeH,GAEX,OADA5O,KAAK6O,UAAY7O,KAAKqB,MAAMA,MACrBrB,KAAK+L,QAAQQ,KAAKqC,IAMtBlD,EAAA7L,UAAAiP,OAAP,SAAcF,GACVA,EAAOI,iBACPhP,KAAK2L,SAASY,KAAKqC,IA9Mb3O,EAAA,CAATgP,EAAAA,yCAKShP,EAAA,CAATgP,EAAAA,uCAKShP,EAAA,CAATgP,EAAAA,wCAKShP,EAAA,CAATgP,EAAAA,wCAKShP,EAAA,CAATgP,EAAAA,0CAKShP,EAAA,CAATgP,EAAAA,gDAOQhP,EAAA,CAARiL,EAAAA,2CAKQjL,EAAA,CAARiL,EAAAA,0CAMQjL,EAAA,CAARiL,EAAAA,+CAKQjL,EAAA,CAARiL,EAAAA,uCAKQjL,EAAA,CAARiL,EAAAA,0CAMQjL,EAAA,CAARiL,EAAAA,wCAKQjL,EAAA,CAARiL,EAAAA,wCAKmBjL,EAAA,CAAnBiP,EAAAA,UAAU,sCAWXjP,EAAA,CADCiL,EAAAA,uCAnFQQ,EAAYzL,EAAA,CALxBkP,EAAAA,UAAU,CACPC,SAAU,iBAEVC,SAAA,+nJAES3D,mBC2Cb,SAAA4D,IACoBtP,KAAAwE,MAAQ,OAC5B,OADavE,EAAA,CAARiL,EAAAA,qCADQoE,EAASrP,EAAA,CApCrBkP,EAAAA,UAAU,CACPC,SAAU,aAmBVC,SAAU,gEAGVE,WAAY,CACRC,EAAAA,QAAQ,MAAO,CACXhL,EAAAA,MAAM,OAAQiL,EAAAA,MAAM,CAACC,MAAO,EAAGC,QAAS,KACxCC,EAAAA,WAAW,kBAAmB,CAC1BC,EAAAA,QAAQ,IAAKC,EAAAA,UAAU,CACnBL,EAAAA,MAAM,CAACE,QAAS,EAAG7G,OAAQ,EAAG4G,MAAO,MAAOK,aAAc,SAC1DN,EAAAA,MAAM,CAACE,QAAS,EAAG7G,OAAQ,GAAK4G,MAAO,QACvCD,EAAAA,MAAM,CAACE,QAAS,GAAK7G,OAAQ,EAAG4G,MAAO,OAAQK,aAAc,yBA5BpE,+ZAkCAT,MChCPU,EAA8B,oBAAXC,OAAyBA,OAAOD,UAAY,CACjEE,UAAW,SACXC,OAAQ,cAGNC,EAAW,SAASC,KAAKL,EAAUE,YAAc,aAAaG,KAAKL,EAAUG,qBA+H/E,SAAAG,EACWC,EACAC,EACCC,GAFDzQ,KAAAuQ,QAAAA,EACAvQ,KAAAwQ,SAAAA,EACCxQ,KAAAyQ,MAAAA,EAtELzQ,KAAAmM,UAAW,EAYXnM,KAAA0Q,SAAmC,IAAI9E,EAAAA,aAMvC5L,KAAA2Q,SAAmC,IAAI/E,EAAAA,aAMvC5L,KAAA6L,OAAiC,IAAID,EAAAA,aAMrC5L,KAAA2O,UAA+B,IAAI/C,EAAAA,aAMnC5L,KAAA4Q,YAAsC,IAAIhF,EAAAA,aAY1C5L,KAAA6Q,SAAU,EAWV7Q,KAAA8Q,YAAc,OAsOzB,OAxPI/R,OAAA4B,eAAW2P,EAAAzQ,UAAA,WAAQ,KAAnB,WACI,MAA6B,iBAAfG,KAAK+Q,QAA8C,IAAxB/Q,KAAK+Q,MAAMC,0CAkCjDV,EAAAzQ,UAAAoR,OAAP,SAAcrC,GACN5O,KAAKgR,UAAYhR,KAAKmM,WAItByC,GACAA,EAAOsC,kBAGXlR,KAAKoO,QAELpO,KAAK0Q,SAASnE,KAAKvM,KAAK+Q,SAMrBT,EAAAzQ,UAAAsR,OAAP,SAAcvC,GACVA,EAAOsC,kBACPlR,KAAK2Q,SAASpE,KAAKvM,OAMhBsQ,EAAAzQ,UAAAuO,MAAP,WACIpO,KAAKuQ,QAAQ9C,cAAcW,SAGxBkC,EAAAzQ,UAAAuR,KAAP,WACIpR,KAAKqR,QAAS,GAQXf,EAAAzQ,UAAAyR,QAAP,SAAexM,GACX,GAAI9E,KAAK6Q,SACL,GAAsB,KAAlB/L,EAAMyM,QACN,OAAOvR,KAAKwR,gBAAgB1M,QAGhC9E,KAAK2O,UAAUpC,KAAK,CAAEzH,MAAKA,EAAEiM,MAAO/Q,KAAK+Q,SAO1CT,EAAAzQ,UAAA4R,MAAP,WACI,IAAMC,EAAY1R,KAAKuQ,QAAQ9C,cAAciE,UAC7CA,EAAUC,IAAI,SAEdC,YAAW,WAAM,OAAAF,EAAUP,OAAO,WAAU,KAMzCb,EAAAzQ,UAAAgS,eAAP,WACI,GAAI7R,KAAK6H,SACL,OAAO7H,KAAK6Q,aAAUjM,EAAY5E,KAAK8R,oBAQxCxB,EAAAzQ,UAAAkS,UAAP,SAAiBjN,SAGb,GAAK9E,KAAK6H,SAAV,CAIA7H,KAAKwR,kBAEL,IAAMnQ,EAAgByD,EAAM3E,OAAO6R,UAC7BtQ,EACoB,iBAAf1B,KAAK+Q,MACN1P,SACKrB,KAAK+Q,SAAKvL,EAAA,IAAGxF,KAAKuI,WAAYlH,EAAKmE,IAElDxF,KAAK6L,OAAOU,KAAK7K,KAOd4O,EAAAzQ,UAAAoS,gBAAP,SAAuBtH,GACnB,MAAuB,iBAATA,EAAoBA,EAAOA,EAAK3K,KAAKuI,YAQvDxJ,OAAA4B,eAAW2P,EAAAzQ,UAAA,kBAAe,KAA1B,WACI,OAAQG,KAAKgR,WAAahR,KAAK6Q,SAAWT,GAAYpQ,KAAKkS,2CAOxD5B,EAAAzQ,UAAA2R,gBAAP,SAAuB5C,GACnB,IAAM8C,EAAY1R,KAAKuQ,QAAQ9C,cAAciE,UACvClE,EAAQxN,KAAKmS,yBAEnBnS,KAAK6Q,SAAU,EACfa,EAAUP,OAAO,gBAEZ3D,GAKLxN,KAAKoS,cAAc5E,GACnBxN,KAAKyQ,MAAM4B,gBAEPzD,GACAA,EAAOI,kBARPhP,KAAKsS,uBAAuBtS,KAAK+Q,QAelCT,EAAAzQ,UAAA0S,oBAAP,WACI,OACKvS,KAAKgR,WAAahR,KAAKmM,UAAYnM,KAAK4H,YAAc5H,KAAK6Q,SAO5DP,EAAAzQ,UAAAsS,uBAAR,WACI,IAAM3E,EAAQxN,KAAKwS,qBAEnB,OAAOhF,EAAQA,EAAMwE,UAAUrO,OAAS,IAOpC2M,EAAAzQ,UAAAyS,uBAAR,SAA+BvB,GAC3B,IAAMvD,EAAQxN,KAAKwS,qBACbnR,EAAQrB,KAAKiS,gBAAgBlB,GAEnCvD,EAAMwE,UAAY3Q,GAMdiP,EAAAzQ,UAAAiS,iBAAR,WACsB9R,KAAKuQ,QAAQ9C,cAAciE,UACnCC,IAAI,gBAEd3R,KAAK6Q,SAAU,GAOXP,EAAAzQ,UAAAuS,cAAR,SAAsB5E,SAAtBI,EAAA5N,KAYI,GAV0B,iBADV+E,EAWL/E,KAAK+Q,OATNhM,IAAQyI,EACRzI,EAAI6I,EAAKrF,aAAeiF,EAQlC,CAXe,IAACzI,EAeVgM,EACoB,iBAAf/Q,KAAK+Q,MACNvD,OAEI7I,MAAO3E,KAAK2E,QACX3E,KAAKwI,YAbToF,EAAKmD,MAAMnD,EAAKpF,cAAgBoF,EAAKmD,MAAMnD,EAAKrF,WAcvCvI,KAAK+Q,MAAM/Q,KAAKwI,YAChBgF,EACNhI,EAACxF,KAAKuI,WAAYiF,KAG5BxN,KAAKyS,UAAU1B,GACf/Q,KAAK4Q,YAAYrE,KAAK,CAAExH,IAAKgM,EAAOpM,MAAO3E,KAAK2E,QAEhD3E,KAAKsS,uBAAuBtS,KAAK+Q,SAOjCT,EAAAzQ,UAAA2S,mBAAR,WACI,OAAOxS,KAAKuQ,QAAQ9C,cAAciF,cAAc,+DA3NhCC,EAAAA,kBACCC,EAAAA,iBACFC,EAAAA,qBAtHnB5S,EAAA,CADCiL,EAAAA,qCAODjL,EAAA,CADCiL,EAAAA,yCAODjL,EAAA,CADCiL,EAAAA,wCAODjL,EAAA,CADCiL,EAAAA,wCAODjL,EAAA,CADCiL,EAAAA,yCAODjL,EAAA,CADCiL,EAAAA,0CAODjL,EAAA,CADCiL,EAAAA,qCAODjL,EAAA,CADCiL,EAAAA,yCAODjL,EAAA,CADCiL,EAAAA,wCAODjL,EAAA,CADCiL,EAAAA,yCAODjL,EAAA,CADCgP,EAAAA,yCAODhP,EAAA,CADCgP,EAAAA,yCAODhP,EAAA,CADCgP,EAAAA,uCAODhP,EAAA,CADCgP,EAAAA,0CAODhP,EAAA,CADCgP,EAAAA,4CAmBDhP,EAAA,CADC6S,EAAAA,YAAY,8CAYb7S,EAAA,CADCiP,EAAAA,UAAUI,iCAkDXrP,EAAA,CADC8S,EAAAA,aAAa,UAAW,CAAC,wCAtKjBzC,EAAYrQ,EAAA,CALxBkP,EAAAA,UAAU,CACPC,SAAU,MACVC,SAAA,67DAGSiB,MClBAf,EAAa,CACtBC,EAAAA,QAAQ,YAAa,CACjBhL,EAAAA,MAAM,KAAMiL,EAAAA,MAAM,CACdE,QAAS,KAEbnL,EAAAA,MAAM,MAAOiL,EAAAA,MAAM,CACfE,QAAS,KAEbC,EAAAA,WAAW,SAAU,CACjBC,EAAAA,QAAQ,cAAeC,EAAAA,UAAU,CAC7BL,EAAAA,MAAM,CAACE,QAAS,EAAG7G,OAAQ,EAAGrF,UAAW,yBACzCgM,EAAAA,MAAM,CAACE,QAAS,GAAK7G,OAAQ,GAAKrF,UAAW,0BAC7CgM,EAAAA,MAAM,CAACE,QAAS,GAAK7G,OAAQ,GAAKrF,UAAW,wBAC7CgM,EAAAA,MAAM,CAACE,QAAS,IAAM7G,OAAQ,IAAMrF,UAAW,wBAC/CgM,EAAAA,MAAM,CAACE,QAAS,EAAG7G,OAAQ,EAAGrF,UAAW,6BAGjDmM,EAAAA,WAAW,SAAU,CACjBC,EAAAA,QAAQ,cAAeC,EAAAA,UAAU,CAC7BL,EAAAA,MAAM,CAACE,QAAS,EAAGlM,UAAW,gBAAiBqF,OAAQ,IACvD2G,EAAAA,MAAM,CAACE,QAAS,EAAGlM,UAAW,oBAAqBqF,OAAQ,KAC3D2G,EAAAA,MAAM,CAACE,QAAS,EAAGlM,UAAW,mBAAoBqF,OAAQ,yBCyHxE,SAAAkK,EAA6BC,GAA7B,IAAArF,EAAA5N,KAA6BA,KAAAiT,SAAAA,EAlHbjT,KAAA8I,OAAiBxC,EAASsC,SAASE,OAKnC9I,KAAA+I,kBAAoBzC,EAASsC,SAASG,kBAMtC/I,KAAAgJ,oBAAsB1C,EAASsC,SAASI,oBAYxChJ,KAAAiJ,kBAAoB3C,EAASsC,SAASK,kBAMtCjJ,KAAAkJ,aAAuB5C,EAASsC,SAASM,aAKzClJ,KAAAuI,UAAYjC,EAASsC,SAASL,UAK9BvI,KAAAwI,WAAalC,EAASsC,SAASJ,WAM/BxI,KAAAsJ,WACdhD,EAASsC,SAASU,WAKJtJ,KAAA6I,aAAevC,EAASsC,SAASC,aAMjC7I,KAAAmJ,SAAW7C,EAASsC,SAASO,SAK7BnJ,KAAAoJ,cAAgB9C,EAASsC,SAASQ,cAKlCpJ,KAAAqJ,OAAS/C,EAASsC,SAASS,OAMpCrJ,KAAAkK,MAAoB,GAKpBlK,KAAAuG,SAA8BvG,KAAKiT,SAAS9F,IAAI+F,GAK/ClT,KAAAmT,mBAAiC,GA+GlCnT,KAAAoT,KAAO,WACZ,IAAMC,EACJzF,EAAKrH,SAAS2D,MAAMtK,SAAWgO,EAAKrH,SAASG,SACzCrF,EAAQuM,EAAK0F,eACbC,EAAiBlS,EAAMsC,OAAO/D,QAAUgO,EAAK3E,kBAC7CgC,EAAW2C,EAAK4F,oBAChBtJ,EAAQ0D,EAAK6F,iBAAiBpS,GAC9BqS,EAAWxJ,EAAMtK,OAAS,EAC1B+T,GAA8B,IAAnB/F,EAAKgG,UAChB5K,EAAsB4E,EAAK5E,qBAAuB0K,IAAarS,EAC/DwS,EAAajG,EAAKrH,SAAS4B,QAE3B2L,EACJH,IAAcD,GAAYH,GAAmBvK,GACzC+K,EAAanG,EAAKgG,YAAcF,EAEtC,OAAI9F,EAAKoG,wBAA0BT,EAC1B3F,EAAKqG,uBAAuB5S,IAIjCuM,EAAK5E,sBAAwB3H,GAC/BgS,GACAQ,EAEOjG,EAAKhF,SAASsL,QAGvBtG,EAAKuG,SAASjK,QAEV4J,EACFlG,EAAKhF,SAASwK,KAAKnI,GACV8I,GACTnG,EAAKsG,UAmDDlU,KAAAoU,cAAgB,SAAOzJ,GAAiB,OAAA/J,EAAAgN,OAAA,OAAA,GAAA,mEAE9C,OADM7I,EAAM/E,KAAKqU,eAAe1J,GAChC,CAAA,EAAM3K,KAAKuG,SAASL,mBAAkB,EAAMnB,GAAKuP,OAAM,8BAAvD9O,EAAApD,mBAwDMpC,KAAAuU,WAAa,WACnB3G,EAAK1D,MAAQ,IAwBPlK,KAAAiU,uBAAyB,SAAC5H,GAChCuB,EAAK4G,iBAAgB,GAiBrB5G,EAAKoG,uBAAuB3H,GACzBoI,KAAKC,EAAAA,SACLC,WAjBiB,SAACtP,GAEnBuI,EAAK4G,iBAAgB,GAElBI,cAAcvP,GAEjBuI,EAAKuG,SAASvG,EAAK6F,iBAAiBpH,IAEhCuB,EAAK1D,MAAMtK,OACbgO,EAAKhF,SAASwK,KAAKxF,EAAK4F,qBAExB5F,EAAKhF,SAASsL,UAMQ,WAAM,OAAAtG,EAAK4G,iBAAgB,OAYzD,OAhTEzV,OAAA4B,eAAWqS,EAAAnT,UAAA,oBAAiB,KAQnB,WAAT,IAAA+N,EAAA5N,KACQkK,EAAQlK,KAAKmT,mBAEnB,OAAKjJ,EAIEA,EAAM8D,KAAI,SAACrD,SAChB,MAAuB,iBAATA,UAEPiD,EAAKrF,WAAYoC,EAClBnF,EAACoI,EAAKpF,YAAamC,KAErBA,KATG,QAZX,SAA6BT,GAC3BlK,KAAKmT,mBAAqBjJ,mCA6B5B8I,EAAAnT,UAAAgV,gBAAA,WAAA,IAAAjH,EAAA5N,KACEA,KAAK8U,gBAAgBH,WAAU,SAAChK,GAC9BiD,EAAKwG,cAAczJ,MAIrB3K,KAAK+U,SAASJ,UAAU3U,KAAKuU,YAE7B,IACMS,EAAYhV,KAAKmJ,SAEvBnJ,KAAKuG,SAAS0O,aACXC,eACAT,KACCU,EAAAA,uBACAC,EAAAA,aAPkB,KAQlBpK,EAAAA,QAAO,SAAC3J,GACN,OAAkB,IAAd2T,GACK3T,EAAMzB,OAAS,MAM3B+U,UAAU3U,KAAKoT,OAMbJ,EAAAnT,UAAAwV,eAAP,WACE,IAAMpK,EAAWjL,KAAKuG,SAAS+O,UAAUhH,qBAEzCtO,KAAK4I,SAAS2M,KAAKF,eAAepK,EAAUjL,KAAKoJ,gBAMnDrK,OAAA4B,eAAWqS,EAAAnT,UAAA,YAAS,KAApB,WACE,OAAOG,KAAK4I,SAAS2M,KAAKC,cAAcC,UAAU7B,2CAM7CZ,EAAAnT,UAAAkV,OAAP,WACE,OAAO/U,KAAK4I,SAASmM,QAMhB/B,EAAAnT,UAAAiV,cAAP,WACE,OAAO9U,KAAK4I,SAASkM,eAMvB/V,OAAA4B,eAAWqS,EAAAnT,UAAA,eAAY,KAAvB,WACE,OAAOG,KAAK4I,SAAS2M,KAAKC,cAAcA,cAAcE,8CAMxD3W,OAAA4B,eAAWqS,EAAAnT,UAAA,QAAK,KAAhB,WACE,OAAOG,KAAK4I,SAAS2M,KAAKC,+CA+CrBxC,EAAAnT,UAAAqU,KAAP,WACElU,KAAKuU,aACLvU,KAAK4I,SAASsL,QAOTlB,EAAAnT,UAAA8V,eAAP,WACO3V,KAAK4T,WAAc5T,KAAKoJ,eAI7BpJ,KAAKqV,kBAOArC,EAAAnT,UAAA+V,aAAP,WACE5V,KAAK4I,SAASsL,QAMRlB,EAAAnT,UAAAyT,aAAR,WACE,IAAMuC,EAAY7V,KAAKuG,SAASsP,UAChC,OAAOA,EAAYA,EAAUrM,WAAW7F,OAAS,IAM3CqP,EAAAnT,UAAA2T,kBAAR,WACE,OAAOxT,KAAKuG,SAAS+O,UAAUhH,sBAgBzB0E,EAAAnT,UAAAwU,eAAR,SAAuB1J,SACfmL,EACkB,iBAAfnL,EAAKtJ,MAAqBsJ,EAAKtJ,MAAQsJ,EAAKtJ,MAAMrB,KAAKuI,WAC1DlH,EACkB,iBAAfsJ,EAAKtJ,MAAqBsJ,EAAKtJ,MAAQsJ,EAAKtJ,MAAMrB,KAAKwI,YAEhE,OAAAnJ,EAAAA,EAAA,GACKsL,EAAKtJ,SAAKmE,EAAA,IACZxF,KAAKuG,SAASgC,WAAYuN,EAAOtQ,EACjCxF,KAAKuG,SAASiC,YAAanH,EAAKmE,KAQ7BwN,EAAAnT,UAAA4T,iBAAR,SAAyBpS,GAAzB,IAAAuM,EAAA5N,KACE,IAAKqB,IAAUrB,KAAKgJ,oBAClB,MAAO,GAGT,IAAM+M,EAAe/V,KAAKuG,SAASuB,WAEnC,OAAO9H,KAAKgW,kBAAkBhL,QAAO,SAACL,GACpC,IAAMsL,GAAWF,GAEbnI,EAAKrH,SAAS2P,KAAKC,MAAK,SAAApR,GACtB,IAAMyD,EAAaoF,EAAKrH,SAASiC,WAIjC,OAFuB,iBAAdzD,EAAIgM,MAAqBhM,EAAIgM,MAAQhM,EAAIgM,MAAMvI,MAEvCmC,EAAKiD,EAAKpF,eAGjC,OAAOoF,EAAKtE,WAAWjI,EAAOsJ,KAAsB,IAAbsL,MAOnCjD,EAAAnT,UAAAsU,SAAR,SAAiBjK,GACflK,KAAKkK,MAAQA,EAAMkM,MAAM,EAAGpW,KAAKkJ,cAAgBgB,EAAMtK,SAcjDoT,EAAAnT,UAAA+U,cAAR,SAAsBvP,GAAtB,IAAAuI,EAAA5N,KAUE,OATAA,KAAKgW,kBAAoB3Q,EAAK2I,KAAI,SAAArD,SAChC,MAAuB,iBAATA,UAEPiD,EAAKrF,WAAYoC,EAClBnF,EAACoI,EAAKpF,YAAamC,KAErBA,KAGC3K,MAkCDgT,EAAAnT,UAAA2U,gBAAR,SAAwBhQ,GAGtB,OAFAxE,KAAKuG,SAAS8P,UAAY7R,EAEnBxE,+CArR8BsW,EAAAA,YA7HfrW,EAAA,CAAvBiP,EAAAA,UAAUqH,EAAAA,6CAMmBtW,EAAA,CAA7BuW,EAAAA,gBAAgBC,EAAAA,8CAKRxW,EAAA,CAARiL,EAAAA,sCAKQjL,EAAA,CAARiL,EAAAA,iDAMQjL,EAAA,CAARiL,EAAAA,mDAMQjL,EAAA,CAARiL,EAAAA,sDAMQjL,EAAA,CAARiL,EAAAA,iDAMQjL,EAAA,CAARiL,EAAAA,4CAKQjL,EAAA,CAARiL,EAAAA,yCAKQjL,EAAA,CAARiL,EAAAA,0CAMQjL,EAAA,CAARiL,EAAAA,0CAMQjL,EAAA,CAARiL,EAAAA,4CAMQjL,EAAA,CAARiL,EAAAA,wCAKQjL,EAAA,CAARiL,EAAAA,6CAKQjL,EAAA,CAARiL,EAAAA,sCA8BQjL,EAAA,CAARiL,EAAAA,+CAkJDjL,EAAA,CADC8S,EAAAA,aAAa,qDAad9S,EAAA,CADC8S,EAAAA,aAAa,iDA7QHC,EAAgB/S,EAAA,CAJ5BkP,EAAAA,UAAU,CACTC,SAAU,qBACVC,SAAA,83BAEW2D,MCsBP0D,GAF8B,oBAAXzG,QAA2BA,OAAe0G,UAE3C,CACpBC,QAASC,EAAAA,kBACTC,YAAaC,EAAAA,YAAW,WAAM,OAAA7D,KAC9B8D,OAAO,kBAiUP,SAAA9D,EAA6B1C,EACTyG,SADpBrJ,EAEIsJ,EAAApX,KAAAE,OAAOA,YAFkB4N,EAAA4C,SAAAA,EACT5C,EAAAqJ,aAAAA,EApTJrJ,EAAApH,cAA0BF,EAASC,SAASC,cAM5CoH,EAAAnH,kBAA8BH,EAASC,SAASE,kBAMhDmH,EAAAhH,YAAsBN,EAASC,SAASK,YAMxCgH,EAAA/G,qBAA+BP,EAASC,SAASM,qBAMjD+G,EAAAlH,SAAmBJ,EAASC,SAASG,SAMrCkH,EAAA9G,WAA4BR,EAASC,SAASO,WAM9C8G,EAAA7G,gBAAsCT,EAASC,SAASQ,gBAMxD6G,EAAA5G,qBAAuBV,EAASC,SAASS,qBAKzC4G,EAAA3G,cAA2CX,EAASC,SAASU,cAK7D2G,EAAA1G,MAAgBZ,EAASC,SAASW,MAKlC0G,EAAAzG,qBAAuBb,EAASC,SAASY,qBAMzCyG,EAAAxG,QAAUd,EAASC,SAASa,QAK5BwG,EAAAvG,WAAqBf,EAASC,SAASc,WAMvCuG,EAAAtG,YAAuBhB,EAASC,SAASe,YAMzCsG,EAAArG,SAAoBjB,EAASC,SAASgB,SAKtCqG,EAAApG,UAAqBlB,EAASC,SAASiB,UAKvCoG,EAAAnG,WAAsBnB,EAASC,SAASkB,WAMxCmG,EAAAlG,kBAAoBpB,EAASC,SAASmB,kBAKtCkG,EAAAjG,YAAcrB,EAASC,SAASoB,YAKhCiG,EAAAhG,UAAYtB,EAASC,SAASqB,UAK9BgG,EAAA/F,SAAoBvB,EAASC,SAASsB,SAKtC+F,EAAA9F,WAAaxB,EAASC,SAASuB,WAM/B8F,EAAA7F,eAAiBzB,EAASC,SAASwB,eAKnC6F,EAAA5F,SAAW1B,EAASC,SAASyB,SAY7B4F,EAAA3F,OAAkB3B,EAASC,SAAS0B,OAMpC2F,EAAA1B,SAAmB5F,EAASC,SAAS2B,SAKrC0F,EAAAzF,QAAmB7B,EAASC,SAAS4B,QAKrCyF,EAAAxF,SAAmB9B,EAASC,SAAS6B,SAKrCwF,EAAAvF,WAAa/B,EAASC,SAAS8B,WAK/BuF,EAAAtF,SAAWhC,EAASC,SAAS+B,SAK7BsF,EAAAnF,kBAAoBnC,EAASC,SAASkC,kBAMrCmF,EAAAuJ,MAAQ,IAAIvL,EAAAA,aAMZgC,EAAA+C,SAAW,IAAI/E,EAAAA,aAMfgC,EAAA8C,SAAW,IAAI9E,EAAAA,aAMfgC,EAAA9B,QAAU,IAAIF,EAAAA,aAMdgC,EAAA/B,OAAS,IAAID,EAAAA,aAMbgC,EAAAqH,aAAe,IAAIrJ,EAAAA,aAMnBgC,EAAAwJ,QAAU,IAAIxL,EAAAA,aAMdgC,EAAAyJ,kBAAoB,IAAIzL,EAAAA,aAMxBgC,EAAAgD,YAAc,IAAIhF,EAAAA,aA2B5BgC,EAAAyI,WAAY,EAqBXzI,EAAApC,YAAShG,EAAA,IACK,QAAqB,GACvCA,EAAgB,MAAqB,MAOxBoI,EAAA3B,gBAAwC,IAAIL,EAAAA,aAMtDgC,EAAA0J,eAAiB,GAgBjB1J,EAAA2J,OAAmB,GA2HnB3J,EAAA4J,UAAY,SAACzS,EAAeJ,QAAA,IAAAA,IAAAA,EAAQiJ,EAAK1D,MAAMtK,QAClD,IAAMsK,EAAQ0D,EAAK1D,MACb6G,EAAQnD,EAAK7F,eAAiBhD,EAAI6I,EAAKpF,YAAczD,EAE3D6I,EAAK1D,MbhWN,WACH,IAAK,IAAI9G,EAAK,GAAI3D,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAC3C2D,EAAKA,EAAGqU,OAAOxU,EAAOtD,UAAUF,KACpC,OAAO2D,Ea6VOsU,CACHxN,EAAMkM,MAAM,EAAGzR,GAAM,CACxBoM,GACG7G,EAAMkM,MAAMzR,EAAOuF,EAAMtK,UAQ7BgO,EAAA+J,UAAY,SAAC5G,SACVpN,EAAO,SAACiU,EAAexX,GACzB,MAAsB,iBAARwX,EAAmBA,EAAIjU,OAASiU,EAAIxX,IAGtD,OAAAf,EAAAA,EAAA,GACwB,iBAAV0R,EAAqBA,EAAQ,MAAEvL,EAAA,IACxCoI,EAAKrF,WAAYqF,EAAK5F,SAAWrE,EAAKoN,EAAOnD,EAAKrF,WAAawI,EAAKvL,EACpEoI,EAAKpF,YAAaoF,EAAK5F,SAAWrE,EAAKoN,EAAOnD,EAAKpF,YAAcuI,EAAKvL,KA0QxEoI,EAAAiK,WAAa,SAAC9S,EAAe+S,QAAA,IAAAA,IAAAA,GAAA,GAChC,IAAMpC,EAAe9H,EAAKhF,SAAWgF,EAAKhF,SAAS8M,kBAAe9Q,EAC5DvD,EAAQuM,EAAK9C,eAAe/F,GAAKpB,OAEvC,GAAI+R,IAAiBoC,IAAqBzW,EACtC,OAAO,EAGX,IAAM0W,EAAOnK,EAAKoK,SAASjT,EAAK+S,GAGhC,IAAKlK,EAAK9F,YAAciQ,GAAQnK,EAAKjG,YAAa,CAC9C,IAAMoJ,EAAQnD,EAAKsI,KAAK+B,MAAK,SAAAtN,GACzB,OAAOiD,EAAKlD,aAAaC,EAAKoG,SAAWnD,EAAKlD,aAAaqN,MAG3DhH,GACAA,EAAMU,QAId,IAAMyG,EAAqBJ,GAAoBlK,EAAK5G,qBAE9CmR,EAAa,EAEdJ,GAAQnK,EAAK9F,YAGb8F,EAAKyF,gBAGL,IAAyBzF,EAAK5G,sBAGnC,OAAOmR,EAAWnN,OAAOoN,SAASxY,SAAWuY,EAAWvY,QA0SpDgO,EAAAyK,gBAAkB,SAAOhT,GAAoB,OAAAzE,EAAAgN,OAAA,OAAA,GAAA,8DAc3CvB,EATU,WACZ,IAAMiM,EAAOF,QAASnI,OAAwCsI,eACxDA,EAAgBD,EACjBrI,OAAqD,cACtD5K,EAAKkT,cACHC,EAAOF,EAAO,OAAS,aAC7B,OAAyB,OAAlBC,EAAyB,GAAKA,EAAcjT,QAAQkT,IAAS,GAG3DC,GAEPC,EAAWrM,EACZsM,MAAM3Y,KAAK0H,mBACXsG,KAAI,SAAArD,GACD,IAAM5F,EAAM6I,EAAK+J,UAAUhN,GAE3B,OADAiD,EAAKgL,cAAc7T,EAAI6I,EAAKrF,YACrBqF,EAAK1H,mBAAkB,EAAOnB,MAGvC8T,EAAa,WAAM,OAAAjH,YAAW,WAAM,OAAAhE,EAAKgL,cAAc,MAAK,KAElE3X,QAAQ6X,IAAIJ,GAAU9W,MAAK,WACvBgM,EAAKwJ,QAAQ7K,KAAKF,GAClBwM,OAECvE,MAAMuE,gBAYnB,Ob3mCO,SAAmBha,EAAGC,GAEzB,SAASia,IAAO/Y,KAAKgZ,YAAcna,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEgB,UAAkB,OAANf,EAAaC,OAAOka,OAAOna,IAAMia,EAAGlZ,UAAYf,EAAEe,UAAW,IAAIkZ,GakC5CG,CAAAhG,EAAAgE,GAyI1BnY,OAAA4B,eAAWuS,EAAArT,UAAA,YAAS,KAApB,WACL,OAAOG,KAAKsX,oBA4HhB,SAAqBjL,GACjBrM,KAAKsX,eAAiBjL,EACtBrM,KAAKiM,gBAAgBM,KAAKF,oCAmC9BtN,OAAA4B,eAAWuS,EAAArT,UAAA,eAAY,KAAvB,WACI,MAAyB,KAAlBG,KAAKkM,SAAkB,KAAO,oCAoBlCgH,EAAArT,UAAAgV,gBAAP,WAAA,IAAAjH,EAAA5N,KAGIA,KAAKmZ,yBACLnZ,KAAKoZ,6BACLpZ,KAAKqZ,6BAEDrZ,KAAKiV,aAAaqE,UAAU1Z,QAC5BI,KAAKuZ,6BAILvZ,KAAKsH,aAAetH,KAAKwH,YACzBxH,KAAKwZ,wBAILxZ,KAAKyH,YACLzH,KAAKyZ,uBAGT,IAAMC,EAAiB1Z,KAAKsV,UAAU3I,KAAKgN,cAE3CD,EAAejF,KACXzJ,EAAAA,QAAO,SAAC4O,GAAmB,MAAW,YAAXA,MAC7BjF,WAAU,WACR/G,EAAK2J,OAAS3J,EAAK0H,UAAU5H,iBAAiBE,EAAK3G,kBAGvDjH,KAAK6Z,sBAAwBH,EAAejF,KACxCzG,EAAAA,KAAI,SAAC4L,GACD,MAAkB,YAAXA,GAAwBhM,EAAKyI,cAKxCrW,KAAKuH,UACLvH,KAAKsV,UAAU9G,WAOhB0E,EAAArT,UAAA2M,SAAP,gBAIiD5H,IAAlB5E,KAAK0G,UAC5B1G,KAAKkK,OACLlK,KAAKkK,MAAMtK,OAASI,KAAK0G,WAGzB1G,KAAK0G,SAAW1G,KAAKkK,MAAMtK,OAC3Bka,QAAQC,KXzaa,2EW8azB/Z,KAAK6H,UAAW7H,KAAKgH,sBAA+BhH,KAAK6H,SAEzD7H,KAAKga,wBAQF9G,EAAArT,UAAAoG,kBAAP,SAAyBlB,EAAeJ,GAAxC,IAAAiJ,EAAA5N,KACI,OAAO,IAAIiB,SAAQ,SAAAC,GACf,IAAM+Y,EAAc,SAAClJ,GACjBnD,EAAKsM,WAAWnJ,EAAOpM,GACvBzD,EAAQ6D,IAGZ6I,EAAKvF,WACDuF,EAAKvF,WAAWtD,GACX0P,KAAKC,EAAAA,SACLC,UAAUsF,GAAeA,EAAYlV,OAW/CmO,EAAArT,UAAAqG,kBAAP,SAAyB4R,EAA2B/S,EAChDJ,EAAgBwV,GADpB,IAAAvM,EAAA5N,KAEI,OAAO,IAAIiB,SAAQ,SAACC,EAASC,GACzB,IAAM8Y,EAAc,SAAClJ,GACjB,OAAOnD,EACFwM,QAAQtC,EAAkB/G,EAAOpM,EAAOwV,GACxCvY,KAAKV,GACLoT,MAAMnT,IAGf,OAAOyM,EAAKtF,SACRsF,EAAKtF,SAASvD,GACT0P,KAAKC,EAAAA,SACLC,UAAUsF,EAAa9Y,GAAU8Y,EAAYlV,OAyCvDmO,EAAArT,UAAAwa,WAAP,SAAkB1P,EAA4B4B,QAAA,IAAAA,IAAAA,GAAA,GACvB5B,GAAwB,iBAATA,GAAqBA,EAAKqG,UAE1ChR,KAAKsa,cAAgB3P,IAIvC3K,KAAKsa,YAAc3P,EAEf4B,GACAvM,KAAK0Q,SAASnE,KAAK5B,KAUpBuI,EAAArT,UAAA0a,WAAP,SAAkBC,EAAmB5L,GAArC,IAAAhB,EAAA5N,KACIA,KAAKwL,UAAUgP,GAAWC,SAAQ,SAAAC,GAAY,OAAAA,EAAS5a,KAAK8N,EAAMgB,OAQ/DsE,EAAArT,UAAA8a,cAAP,SAAqBtV,GACjB,IAAMP,EAAQO,EAAKP,MACb1E,EAAM0E,EAAMyM,SAAWzM,EAAM8V,MAC7BC,EAAW/V,EAAM+V,WAAY,EAEnC,OAAQC,EAA4B1a,IAChC,KAAK2a,EACD,GAAI/a,KAAKsa,aAAeta,KAAK4H,UAAW,CACpC,IAAMjD,EAAQ3E,KAAKkK,MAAMR,QAAQ1J,KAAKsa,aACtCta,KAAKiG,kBAAkBjG,KAAKsa,YAAa3V,GAE7C,MAEJ,KAAKoW,EACD/a,KAAKgb,UAAU3V,EAAK0L,MX3hBhB,QW4hBJ,MAEJ,KAAKgK,EACD/a,KAAKgb,UAAU3V,EAAK0L,MXhiBhB,QWiiBJ,MAEJ,KAAKgK,EACD,GAAIF,EAAU,CACV,GAAI7a,KAAKib,WAAW5V,EAAK0L,OACrB,OAGJ/Q,KAAKgb,UAAU3V,EAAK0L,MXxiBpB,YWyiBG,CACH,GAAI/Q,KAAKkb,UAAU7V,EAAK0L,SAAW/Q,KAAKmI,SAAWnI,KAAKqT,iBACpD,OAGJrT,KAAKgb,UAAU3V,EAAK0L,MX/iBpB,QWijBJ,MAEJ,QACI,OAIRjM,EAAMkK,kBAGGkE,EAAArT,UAAAsb,aAAb,qGAEQ,6BAAA,CAAA,EAAMnb,KAAKkG,mBAAkB,EAAOlG,KAAK6V,0BAAzCuF,EAAAhZ,oBAEA,gBAAA,CAAA,4BAQD8Q,EAAArT,UAAA+Y,cAAP,SAAqBvX,EAAega,QAAA,IAAAA,IAAAA,GAAA,GAChBrb,KAAKsb,aAGbhP,SAASjL,EAAO,CAAEga,UAASA,KAM/BnI,EAAArT,UAAAyb,WAAR,WACI,OAAOtb,KAAKsV,UAAUjU,OAQnB6R,EAAArT,UAAAuO,MAAP,SAAamN,EAAoBC,QAApB,IAAAD,IAAAA,GAAA,QAAoB,IAAAC,IAAAA,GAAA,GACzBxb,KAAKiX,aAAa7Q,SAAS,cAI/BpG,KAAKqa,gBAAWzV,GAAW,GAEvB2W,IACAvb,KAAKsV,UAAUlH,QACfpO,KAAK8L,QAAQS,KAAKvM,KAAK6V,cAOxB3C,EAAArT,UAAAwO,KAAP,WACIrO,KAAKoK,YAELpK,KAAK6L,OAAOU,KAAKvM,KAAK6V,YAMnB3C,EAAArT,UAAAoO,UAAP,WACI,QAASjO,KAAKsV,WAAatV,KAAKsV,UAAUrH,aAMvCiF,EAAArT,UAAAuN,eAAP,WACI,QAASpN,KAAKsV,WAAatV,KAAKsV,UAAUlI,kBAQvC8F,EAAArT,UAAA4b,kBAAP,WACI,IAAMpM,EAAWrP,KAAK0b,UAAY1b,KAAK0b,UAAUhH,WAAQ9P,EACnD+W,EAAe3b,KAAK4I,UAAY5I,KAAK4I,SAAS8S,UAChD1b,KAAK4I,SAAS8S,UAAUhH,WAAQ9P,EAEpC,OAAOwT,QAAQ/I,GAAYA,IAAasM,IAM5C5c,OAAA4B,eAAWuS,EAAArT,UAAA,kBAAe,KAA1B,WACI,YAAyB+E,IAAlB5E,KAAK0G,UACR1G,KAAKkK,MAAMtK,QAAUI,KAAK0G,0CAMlC3H,OAAA4B,eAAWuS,EAAArT,UAAA,YAAS,KAApB,WACI,IAAM8M,EAAO3M,KAAKsV,UAAUjU,MAE5B,OAAOsL,EAAOA,EAAKtL,MAAQ,oCAQxB6R,EAAArT,UAAA+b,cAAP,SAAqB9W,EAAkBC,EAAeJ,GAClDG,EAAMoM,kBAEN,IAAMvG,EAAO,CAAEkR,KAAM7b,KAAKoI,SAAUrD,IAAGA,EAAEJ,MAAKA,GAE9C3E,KAAKiX,aAAaxR,UAAUzF,MAC5BA,KAAKiX,aAAapS,eAAeC,EAAO6F,GACxC3K,KAAKiX,aAAa9Q,SAAS,CAAE1B,UAAU,EAAME,MAAKA,KAO/CuO,EAAArT,UAAAic,WAAP,SAAkBhX,EAAkBH,GAChC3E,KAAKiX,aAAa9Q,SAAS,CAAEzB,UAAU,IACvC1E,KAAKiX,aAAatR,YAAY3F,MAE9B8E,EAAMkK,kBAQHkE,EAAArT,UAAAgG,aAAP,SAAoBf,EAAkBH,GAClC,IAAMgG,EAAO3K,KAAKiX,aAAa7R,eAAeN,GAEzC6F,GAAQA,EAAKkR,OAAS7b,KAAKoI,WAIhCpI,KAAKiX,aAAapR,aAAa8E,EAAK5F,IAAK4F,EAAKhG,MAAOA,GAErDG,EAAMkK,iBACNlK,EAAMoM,oBAMHgC,EAAArT,UAAAkc,WAAP,WACI,IAAMC,EAAahc,KAAKiX,aAAarR,WAAa5F,KAC5C+b,EAAa/b,KAAKiX,aAAa7Q,SAAS,YAE9C,OAAOgS,QAAQ4D,GAAcD,IAQ1B7I,EAAArT,UAAAoc,aAAP,SAAoBC,EAA0BvX,GAC1C3E,KAAKkK,MAAMvF,GAASuX,EACpBlc,KAAKqO,QAOF6E,EAAArT,UAAAsc,QAAP,SAAexX,EAAegG,GAC1B,OAAOA,EAAK3K,KAAKwI,aAOd0K,EAAArT,UAAAuc,gBAAP,SAAuB5W,OAAET,EAAAS,EAAAT,IAAKS,EAAAb,MAC1B3E,KAAK4Q,YAAYrE,KAAKxH,IAkDlBmO,EAAArT,UAAAmb,UAAR,SAAkBrQ,EAAgB0R,GAC9B,IAAMC,EAAStc,KAAKkb,UAAUvQ,GACxB4R,EAAUvc,KAAKib,WAAWtQ,GAIhC,KXjyBY,SW8xBQ0R,GAAgCC,GX7xBxC,SW8xBPD,GAAgCE,GAErC,CAKA,IAAMzT,EXtyBM,SWsyBGuT,EAA+B,GAAK,EAC7C1X,EAAQ3E,KAAKwc,YAAY7R,GAAQ7B,EACjC/D,EAAM/E,KAAKyc,cAAc9X,GAE/B,OAAOI,EAAIkM,OAAOnR,KAAKiF,GARnB/E,KAAKoO,OAAM,IAeX8E,EAAArT,UAAAob,WAAR,SAAmBtQ,GACf,OAAO3K,KAAKkW,KAAKxB,MAAM3D,QAAUpG,GAO7BuI,EAAArT,UAAAqb,UAAR,SAAkBvQ,GACd,OAAO3K,KAAKkW,KAAKwG,KAAK3L,QAAUpG,GAO5BuI,EAAArT,UAAA2c,YAAR,SAAoB7R,GAGhB,OAFa3K,KAAKkW,KAAKyG,UAEXC,WAAU,SAAA7X,GAAO,OAAAA,EAAIgM,QAAUpG,MAOvCuI,EAAArT,UAAA4c,cAAR,SAAsB9X,GAGlB,OAFa3E,KAAKkW,KAAKyG,UAEXhY,IASTuO,EAAArT,UAAAqa,WAAP,SAAkBnV,EAAeJ,GAC7B3E,KAAKkK,MAAQlK,KAAK+K,gBAAgBpG,GAG9B3E,KAAKsa,cAAgBvV,GACrB/E,KAAKqa,gBAAWzV,GAAW,GAI/B5E,KAAKoO,OAAM,GAAM,GAGjBpO,KAAK2Q,SAASpE,KAAKxH,IAWfmO,EAAArT,UAAAua,QAAR,SAAgBtC,EAA0BnN,EAAgBhG,EAAgBwV,GAA1E,IAAAvM,EAAA5N,UAAgB,IAAA8X,IAAAA,GAAA,GAEZ,IAAMhC,EAAU9V,KAAK8K,eAAeH,GAC9B5F,EAAM/E,KAAK2X,UAAUhN,GAM3B,OAJImN,GACA9X,KAAK4Y,cAAc5Y,KAAK0K,aAAaC,GAAM,IAGxC,IAAI1J,SAAQ,SAACC,EAASC,GAIzB,IAAM0b,EAAQ,WAEVjP,EAAKgL,cAAc,IAEfuB,EACAvM,EAAKQ,OAAM,GAAO,GAGlBR,EAAKQ,OAAM,GAAM,GAGrBlN,EAAQ4U,IAGNgH,EAAa,WACflP,EAAK4J,UAAUzS,EAAKJ,GAGpBiJ,EAAKuJ,MAAM5K,KAAKxH,GAEX6I,EAAKhF,WAIVgF,EAAKhF,SAASsL,OAEVtG,EAAKhF,SAASI,qBACd4E,EAAKhF,SAASwK,SAIhBwG,EAAShM,EAAK0H,UAAU3I,KAAKiN,OAC7B/B,EAAajK,EAAKiK,WAAW9S,EAAK+S,GAElCT,EAAoB,WAEtB,OADAzJ,EAAKyJ,kBAAkB9K,KAAKxH,GACrB5D,KAGX,MAAe,UAAXyY,GAAsB/B,GACtBiF,IACOD,KAGI,YAAXjD,GAAyB/B,EAKd,YAAX+B,EACsBhM,EAAK0H,UAAU3I,KAAKgN,cAGrClF,KACGzJ,EAAAA,QAAO,SAAA+R,GAAgB,MAAiB,YAAjBA,KACvBrI,EAAAA,SAEHC,WAAU,SAACoI,GACR,MAAqB,UAAjBA,GAA4BlF,GAC5BiF,IACOD,MAEPA,IACOxF,aAdvB,GAJIwF,IACOxF,SA2BXnE,EAAArT,UAAAuZ,2BAAR,WAAA,IAAAxL,EAAA5N,KACUgd,EAAmBhd,KAAKyG,kBAAkB7G,OAAS,GAAKI,KAAKwG,cAAc5G,OAAS,EAc1FwL,EAAOtL,KAAKE,KXx+BG,WW29BE,SAAC4O,GACd,IAAMqO,EAAarP,EAAKnH,kBAAkBiD,QAAQkF,EAAO2C,UAAY,EAC/D2L,EAAStP,EAAKpH,cAAckD,QAAQkF,EAAOxO,MAAQ,EAEnD+c,EAAqC,MAAnBvO,EAAO2C,SAE3B0L,GAAeC,IAAWC,KAC1BvO,EAAOI,iBACPpB,EAAK1H,mBAAkB,EAAO0H,EAAKiI,WAC9BvB,OAAM,kBAI4B0I,IAM3C9J,EAAArT,UAAAsZ,uBAAR,WAAA,IAAAvL,EAAA5N,KAYIoL,EAAOtL,KAAKE,KX1/BG,WW++BE,SAAC4O,IAC0B,KAAnBA,EAAO2C,SAAqC,IAAnB3C,EAAO2C,WAGhD3D,EAAKiI,WACNjI,EAAK1D,MAAMtK,QACXgO,EAAKsI,KAAKwG,KAAKzL,OAAOnR,KAAK8N,EAAKsI,KAAKwG,UAWzCxJ,EAAArT,UAAAwZ,2BAAR,WAAA,IAAAzL,EAAA5N,KACIA,KAAKsV,UAAUtJ,UAAU2I,WAAU,SAAA7P,GACb,cAAdA,EAAM1E,KAAiD,KAA1BwN,EAAKiI,UAAUlS,QAC5CmB,EAAMkK,qBAQVkE,EAAArT,UAAA4Z,qBAAR,WAAA,IAAA7L,EAAA5N,KACUwN,EAAQxN,KAAKsV,UAAU9H,MAAMC,cAGnCzN,KAAKwQ,SAASpF,OAAOoC,EAAO,SAAS,SAAC1I,GAIlC,OAHA8I,EAAKyK,gBAAgBvT,GAErBA,EAAMkK,kBACC,MAOPkE,EAAArT,UAAA0Z,0BAAR,WAAA,IAAA3L,EAAA5N,KACIA,KAAKsV,UAAU3I,KACVyQ,aACA3I,KACGW,EAAAA,aAAapV,KAAKmH,uBAErBwN,WAAU,SAACtT,GACRuM,EAAKqH,aAAa1I,KAAKlL,EAAMsJ,UAOjCuI,EAAArT,UAAA2Z,sBAAR,WAAA,IAAA5L,EAAA5N,KAMIA,KAAKsV,UACAzJ,OACA4I,KACGW,EAAAA,aAAa,KACbpK,EAAAA,QATS,WAEb,QADkB4C,EAAKhF,UAAYgF,EAAKhF,SAASgL,cAC1BhG,EAAKiI,cAS3BlB,WAAU,WACP,IAAMkI,EAAQ,WAAM,OAAAjP,EAAKgL,cAAc,KAEvC,GAAIhL,EAAKpG,UACL,OAAOoG,EACF1H,mBAAkB,EAAO0H,EAAKiI,eAAWjR,GAAW,GACpDhD,KAAKib,GACLvI,MAAMuI,GAGfA,QASJ3J,EAAArT,UAAAmY,SAAR,SAAiBjT,EAAemT,GAAhC,IAAAtK,EAAA5N,KAEUqd,EAAKtY,EADQmT,EAAqBlY,KAAK4I,SAASJ,WAAaxI,KAAKwI,YAGxE,OAAOxI,KAAKkK,MAAM+N,MAAK,SAAAtN,GAAQ,OAAAiD,EAAKlD,aAAaC,KAAU0S,MA2CvDnK,EAAArT,UAAAma,qBAAR,WACIha,KAAKsd,kBAAoB,CACrBjc,MAAO,KACPkc,OAAMle,EAAA,GAAOW,KAAKyI,8DA3wBamK,EAAAA,iBACLrO,KApTzBtE,EAAA,CAARiL,EAAAA,6CAMQjL,EAAA,CAARiL,EAAAA,iDAMQjL,EAAA,CAARiL,EAAAA,2CAMQjL,EAAA,CAARiL,EAAAA,oDAMQjL,EAAA,CAARiL,EAAAA,wCAMQjL,EAAA,CAARiL,EAAAA,0CAMQjL,EAAA,CAARiL,EAAAA,+CAMQjL,EAAA,CAARiL,EAAAA,oDAKQjL,EAAA,CAARiL,EAAAA,6CAKQjL,EAAA,CAARiL,EAAAA,qCAKQjL,EAAA,CAARiL,EAAAA,oDAMQjL,EAAA,CAARiL,EAAAA,uCAKQjL,EAAA,CAARiL,EAAAA,0CAMQjL,EAAA,CAARiL,EAAAA,2CAMQjL,EAAA,CAARiL,EAAAA,wCAKQjL,EAAA,CAARiL,EAAAA,yCAKQjL,EAAA,CAARiL,EAAAA,0CAMQjL,EAAA,CAARiL,EAAAA,iDAKQjL,EAAA,CAARiL,EAAAA,2CAKQjL,EAAA,CAARiL,EAAAA,yCAKQjL,EAAA,CAARiL,EAAAA,wCAKQjL,EAAA,CAARiL,EAAAA,0CAMQjL,EAAA,CAARiL,EAAAA,8CAKQjL,EAAA,CAARiL,EAAAA,wCAKQjL,EAAA,CAARiL,EAAAA,uCAOQjL,EAAA,CAARiL,EAAAA,sCAMQjL,EAAA,CAARiL,EAAAA,wCAKQjL,EAAA,CAARiL,EAAAA,uCAKQjL,EAAA,CAARiL,EAAAA,wCAKQjL,EAAA,CAARiL,EAAAA,0CAKQjL,EAAA,CAARiL,EAAAA,wCAKQjL,EAAA,CAARiL,EAAAA,iDAMSjL,EAAA,CAATgP,EAAAA,sCAMShP,EAAA,CAATgP,EAAAA,yCAMShP,EAAA,CAATgP,EAAAA,yCAMShP,EAAA,CAATgP,EAAAA,wCAMShP,EAAA,CAATgP,EAAAA,uCAMShP,EAAA,CAATgP,EAAAA,6CAMShP,EAAA,CAATgP,EAAAA,wCAMShP,EAAA,CAATgP,EAAAA,kDAMShP,EAAA,CAATgP,EAAAA,4CAM+BhP,EAAA,CAA/Bud,EAAAA,aAAaxK,mCAKwC/S,EAAA,CAArDuW,EAAAA,gBAAgBC,EAAAA,YAAa,CAAEgH,aAAa,qCAKpBxd,EAAA,CAAxBiP,EAAAA,UAAUxD,oCA0BiBzL,EAAA,CAA3Byd,EAAAA,aAAapN,+BAeJrQ,EAAA,CAATgP,EAAAA,gDAaDhP,EAAA,CADC6S,EAAAA,YAAY,mDA1SJI,EAAiBjT,EAAA,CAP7BkP,EAAAA,UAAU,CACPC,SAAU,YACVuO,UAAW,CAACjH,GAEZrH,SAAA,4+FACAE,WAAUA,mkPAED2D,IAA0BlJ,gBCrDvC,SAAA4T,KAAkC,OAArBA,EAAmB3d,EAAA,CAL/BkP,EAAAA,UAAU,CACPC,SAAU,cACVC,SAAA,ivKAGSuO,MCOPC,EAAkB,IAAIlU,eAgC5B,SAAAmU,KAQA,OAHkBA,EAAAC,aAAd,SAA2BlU,GACvBgU,EAAgBjU,WAAWC,IANtBiU,EAAc7d,EAAA,CA9B1B+d,EAAAA,SAAS,CACNC,QAAS,CACLC,EAAAA,aACAC,EAAAA,oBACAC,EAAAA,YACAC,EAAAA,mBAEJC,aAAc,CACVpL,EACA0K,EACAlS,EACA4E,EACA9M,EACAwP,EACA1D,GAEJiP,QAAS,CACLrL,EACA0K,EACAlS,EACA4E,EACA9M,EACAwP,EACA1D,GAEJqO,UAAW,CACPpZ,EACA,CAAEqS,QAAS4H,EAAAA,wBAAyBC,UAAU,OAGzCX","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {Pipe, PipeTransform} from '@angular/core';\n\nconst escape = s => s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\n@Pipe({\n    name: 'highlight'\n})\nexport class HighlightPipe implements PipeTransform {\n    /**\n     * @name transform\n     * @param value {string}\n     * @param arg {string}\n     */\n    public transform(value: string, arg: string): string {\n        if (!arg.trim()) {\n            return value;\n        }\n\n        try {\n            const regex = new RegExp(`(${escape(arg)})`, 'i');\n            return value.replace(regex, '<b>$1</b>');\n        } catch (e) {\n            return value;\n        }\n    }\n}\n","/*\n** constants and default values for <tag-input>\n */\n\nexport const PLACEHOLDER = '+ Tag';\nexport const SECONDARY_PLACEHOLDER = 'Enter a new tag';\nexport const KEYDOWN = 'keydown';\nexport const KEYUP = 'keyup';\nexport const FOCUS = 'focus';\nexport const MAX_ITEMS_WARNING = 'The number of items specified was greater than the property max-items.';\n\nexport const ACTIONS_KEYS = {\n    DELETE: 'DELETE',\n    SWITCH_PREV: 'SWITCH_PREV',\n    SWITCH_NEXT: 'SWITCH_NEXT',\n    TAB: 'TAB'\n};\n\nexport const KEY_PRESS_ACTIONS = {\n    8: ACTIONS_KEYS.DELETE,\n    46: ACTIONS_KEYS.DELETE,\n    37: ACTIONS_KEYS.SWITCH_PREV,\n    39: ACTIONS_KEYS.SWITCH_NEXT,\n    9: ACTIONS_KEYS.TAB\n};\n\nexport const DRAG_AND_DROP_KEY = 'Text';\nexport const NEXT = 'NEXT';\nexport const PREV = 'PREV';\n\n","import { TagInputComponent } from '../../components/tag-input/tag-input';\nimport { TagModel } from '../accessor';\n\nimport { Injectable } from '@angular/core';\n\nexport declare interface DraggedTag {\n    index: number;\n    tag: TagModel;\n    zone: string;\n}\n\nimport { DRAG_AND_DROP_KEY } from '../../core/constants';\n\nexport declare interface State {\n    dragging: boolean;\n    dropping: boolean;\n    index: number | undefined;\n}\n\nexport declare type StateProperty = keyof State;\n\n@Injectable()\nexport class DragProvider {\n    public sender: TagInputComponent;\n    public receiver: TagInputComponent;\n\n    public state: State = {\n        dragging: false,\n        dropping: false,\n        index: undefined\n    };\n\n    /**\n     * @name setDraggedItem\n     * @param event\n     * @param tag\n     */\n    public setDraggedItem(event: DragEvent, tag: DraggedTag): void {\n        if (event && event.dataTransfer) {\n            event.dataTransfer.setData(DRAG_AND_DROP_KEY, JSON.stringify(tag));\n        }\n    }\n\n    /**\n     * @name getDraggedItem\n     * @param event\n     */\n    public getDraggedItem(event: DragEvent): DraggedTag | undefined {\n        if (event && event.dataTransfer) {\n            const data = event.dataTransfer.getData(DRAG_AND_DROP_KEY);\n            try {\n                return JSON.parse(data) as DraggedTag;\n            } catch {\n                return;\n            }\n        }\n    }\n\n    /**\n     * @name setSender\n     * @param sender\n     */\n    public setSender(sender: TagInputComponent): void {\n        this.sender = sender;\n    }\n\n    /**\n     * @name setReceiver\n     * @param receiver\n     */\n    public setReceiver(receiver: TagInputComponent): void {\n        this.receiver = receiver;\n    }\n\n    /**\n     * @name onTagDropped\n     * @param tag\n     * @param indexDragged\n     * @param indexDropped\n     */\n    public onTagDropped(tag: TagModel, indexDragged: number, indexDropped?: number): void {\n        this.onDragEnd();\n\n        this.sender.onRemoveRequested(tag, indexDragged);\n        this.receiver.onAddingRequested(false, tag, indexDropped);\n    }\n\n    /**\n     * @name setState\n     * @param state\n     */\n    public setState(state: { [K in StateProperty]?: State[K] }): void {\n        this.state = { ...this.state, ...state };\n    }\n\n    /**\n     * @name getState\n     * @param key\n     */\n    public getState(key?: StateProperty): State | State[StateProperty] {\n        return key ? this.state[key] : this.state;\n    }\n\n    /**\n     * @name onDragEnd\n     */\n    public onDragEnd(): void {\n        this.setState({\n            dragging: false,\n            dropping: false,\n            index: undefined\n        });\n    }\n}\n","import { Observable } from 'rxjs';\nimport { ValidatorFn, AsyncValidatorFn } from '@angular/forms';\n\nimport { SECONDARY_PLACEHOLDER, PLACEHOLDER } from './core/constants/index';\nimport { TagInputDropdown } from './components/dropdown/tag-input-dropdown.component';\nimport { TagModel } from './core/accessor';\n\nexport interface TagInputOptions {\n    separatorKeys: string[];\n    separatorKeyCodes: number[];\n    maxItems: number;\n    placeholder: string;\n    secondaryPlaceholder: string;\n    validators: ValidatorFn[];\n    asyncValidators: AsyncValidatorFn[];\n    onlyFromAutocomplete: boolean;\n    errorMessages: { [key: string]: string; };\n    theme: '';\n    onTextChangeDebounce: number;\n    inputId: string | null;\n    inputClass: string;\n    clearOnBlur: boolean;\n    hideForm: boolean;\n    addOnBlur: boolean;\n    addOnPaste: boolean;\n    pasteSplitPattern: string | RegExp;\n    blinkIfDupe: boolean;\n    removable: boolean;\n    editable: boolean;\n    allowDupes: boolean;\n    modelAsStrings: boolean;\n    trimTags: boolean;\n    ripple: boolean;\n    tabIndex: string;\n    disable: boolean;\n    dragZone: string;\n    onRemoving?: (tag: TagModel) => Observable<TagModel>;\n    onAdding?: (tag: TagModel) => Observable<TagModel>;\n    displayBy: string;\n    identifyBy: string;\n    animationDuration: {\n        enter: string,\n        leave: string\n    };\n}\n\nexport interface TagInputDropdownOptions {\n    displayBy: string;\n    identifyBy: string;\n    appendToBody: boolean;\n    offset: string;\n    focusFirstElement: boolean;\n    showDropdownIfEmpty: boolean;\n    minimumTextLength: number;\n    limitItemsTo: number;\n    keepOpen: boolean;\n    zIndex: number;\n    dynamicUpdate: boolean;\n    matchingFn: (value: string, target: TagModel) => boolean;\n}\n\nexport const defaults = {\n    tagInput: <TagInputOptions>{\n        separatorKeys: [],\n        separatorKeyCodes: [],\n        maxItems: Infinity,\n        placeholder: PLACEHOLDER,\n        secondaryPlaceholder: SECONDARY_PLACEHOLDER,\n        validators: [],\n        asyncValidators: [],\n        onlyFromAutocomplete: false,\n        errorMessages: {},\n        theme: '',\n        onTextChangeDebounce: 250,\n        inputId: null,\n        inputClass: '',\n        clearOnBlur: false,\n        hideForm: false,\n        addOnBlur: false,\n        addOnPaste: false,\n        pasteSplitPattern: ',',\n        blinkIfDupe: true,\n        removable: true,\n        editable: false,\n        allowDupes: false,\n        modelAsStrings: false,\n        trimTags: true,\n        ripple: true,\n        tabIndex: '',\n        disable: false,\n        dragZone: '',\n        onRemoving: undefined,\n        onAdding: undefined,\n        displayBy: 'display',\n        identifyBy: 'value',\n        animationDuration: {\n            enter: '250ms',\n            leave: '150ms'\n        }\n    },\n    dropdown: <TagInputDropdownOptions>{\n        displayBy: 'display',\n        identifyBy: 'value',\n        appendToBody: true,\n        offset: '50 0',\n        focusFirstElement: false,\n        showDropdownIfEmpty: false,\n        minimumTextLength: 1,\n        limitItemsTo: Infinity,\n        keepOpen: true,\n        dynamicUpdate: true,\n        zIndex: 1000,\n        matchingFn\n    }\n};\n\n/**\n * @name matchingFn\n * @param this\n * @param value\n * @param target\n */\nfunction matchingFn(this: TagInputDropdown, value: string, target: TagModel): boolean {\n    const targetValue = target[this.displayBy].toString();\n\n    return targetValue && targetValue\n        .toLowerCase()\n        .indexOf(value.toLowerCase()) >= 0;\n}\n","import { defaults, TagInputOptions, TagInputDropdownOptions } from '../../defaults';\n\nexport type Options = {\n    tagInput?: {\n        [P in keyof TagInputOptions]?: TagInputOptions[P];\n    };\n    dropdown?: {\n        [P in keyof TagInputDropdownOptions]?: TagInputDropdownOptions[P];\n    }\n};\n\nexport class OptionsProvider {\n    public static defaults = defaults;\n\n    public setOptions(options: Options): void {\n        OptionsProvider.defaults.tagInput = {...defaults.tagInput, ...options.tagInput};\n        OptionsProvider.defaults.dropdown = {...defaults.dropdown, ...options.dropdown};\n    }\n}\n\nexport { TagInputDropdownOptions, TagInputOptions };\n","import { ControlValueAccessor } from '@angular/forms';\nimport { Input, Directive } from '@angular/core';\nimport { OptionsProvider } from './providers/options-provider';\nimport { TagInputDropdown } from '../components/dropdown/tag-input-dropdown.component';\n\nexport class TagModelClass {\n    [key: string]: any;\n}\n\nexport type TagModel = string | TagModelClass;\n\nexport function isObject(obj: any): boolean {\n    return obj === Object(obj);\n}\n\n@Directive()\nexport class TagInputAccessor implements ControlValueAccessor {\n    private _items: TagModel[] = [];\n    private _onTouchedCallback: () => void;\n    private _onChangeCallback: (items: TagModel[]) => void;\n\n    public dropdown: TagInputDropdown;\n\n    /**\n     * @name displayBy\n     */\n    @Input() public displayBy: string = OptionsProvider.defaults.tagInput.displayBy;\n\n    /**\n     * @name identifyBy\n     */\n    @Input() public identifyBy: string = OptionsProvider.defaults.tagInput.identifyBy;\n\n    public get items(): TagModel[] {\n        return this._items;\n    }\n\n    public set items(items: TagModel[]) {\n        this._items = items;\n        this._onChangeCallback(this._items);\n    }\n\n    public onTouched() {\n        this._onTouchedCallback();\n    }\n\n    public writeValue(items: any[]) {\n        this._items = items || [];\n    }\n\n    public registerOnChange(fn: any) {\n        this._onChangeCallback = fn;\n    }\n\n    public registerOnTouched(fn: any) {\n        this._onTouchedCallback = fn;\n    }\n\n    /**\n     * @name getItemValue\n     * @param item\n     * @param fromDropdown\n     */\n    public getItemValue(item: TagModel, fromDropdown = false): string {\n        const property = fromDropdown && this.dropdown ? this.dropdown.identifyBy : this.identifyBy;\n        return isObject(item) ? item[property] : item;\n    }\n\n    /**\n     * @name getItemDisplay\n     * @param item\n     * @param fromDropdown\n     */\n    public getItemDisplay(item: TagModel, fromDropdown = false): string {\n        const property = fromDropdown && this.dropdown ? this.dropdown.displayBy : this.displayBy;\n        return isObject(item) ? item[property] : item;\n    }\n\n    /**\n     * @name getItemsWithout\n     * @param index\n     */\n    protected getItemsWithout(index: number): TagModel[] {\n        return this.items.filter((item, position) => position !== index);\n    }\n}\n","\n/**\n * @name listen\n * @param listenerType\n * @param action\n * @param condition\n */\nexport function listen(listenerType: string, action: () => any, condition = true): void {\n    // if the event provided does not exist, throw an error\n    if (!this.listeners.hasOwnProperty(listenerType)) {\n        throw new Error('The event entered may be wrong');\n    }\n\n    // if a condition is present and is false, exit early\n    if (!condition) {\n        return;\n    }\n\n    // fire listener\n    this.listeners[listenerType].push(action);\n}\n","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges, ViewChild } from '@angular/core';\nimport { AsyncValidatorFn, FormControl, FormGroup, ValidatorFn } from '@angular/forms';\n\n@Component({\n    selector: 'tag-input-form',\n    styleUrls: ['./tag-input-form.style.scss'],\n    templateUrl: './tag-input-form.template.html'\n})\nexport class TagInputForm implements OnInit, OnChanges {\n    /**\n     * @name onSubmit\n     */\n    @Output() public onSubmit: EventEmitter<any> = new EventEmitter();\n\n    /**\n     * @name onBlur\n     */\n    @Output() public onBlur: EventEmitter<any> = new EventEmitter();\n\n    /**\n     * @name onFocus\n     */\n    @Output() public onFocus: EventEmitter<any> = new EventEmitter();\n\n    /**\n     * @name onKeyup\n     */\n    @Output() public onKeyup: EventEmitter<any> = new EventEmitter();\n\n    /**\n     * @name onKeydown\n     */\n    @Output() public onKeydown: EventEmitter<any> = new EventEmitter();\n\n    /**\n     * @name inputTextChange\n     */\n    @Output() public inputTextChange: EventEmitter<string> = new EventEmitter();\n\n    // inputs\n\n    /**\n     * @name placeholder\n     */\n    @Input() public placeholder: string;\n\n    /**\n     * @name validators\n     */\n    @Input() public validators: ValidatorFn[] = [];\n\n    /**\n     * @name asyncValidators\n     * @desc array of AsyncValidator that are used to validate the tag before it gets appended to the list\n     */\n    @Input() public asyncValidators: AsyncValidatorFn[] = [];\n\n    /**\n     * @name inputId\n     */\n    @Input() public inputId: string;\n\n    /**\n     * @name inputClass\n     */\n    @Input() public inputClass: string;\n\n    /**\n     * @name tabindex\n     * @desc pass through the specified tabindex to the input\n     */\n    @Input() public tabindex = '';\n\n    /**\n     * @name disabled\n     */\n    @Input() public disabled = false;\n\n    /**\n     * @name input\n     */\n    @ViewChild('input') public input;\n\n    /**\n     * @name form\n     */\n    public form: FormGroup;\n\n    /**\n     * @name inputText\n     */\n    @Input()\n    public get inputText(): string {\n        return this.item.value;\n    }\n\n    /**\n     * @name inputText\n     * @param text {string}\n     */\n    public set inputText(text: string) {\n        this.item.setValue(text);\n\n        this.inputTextChange.emit(text);\n    }\n\n    private readonly item: FormControl = new FormControl({ value: '', disabled: this.disabled });\n\n    ngOnInit() {\n        this.item.setValidators(this.validators);\n        this.item.setAsyncValidators(this.asyncValidators);\n\n        // creating form\n        this.form = new FormGroup({\n            item: this.item\n        });\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes.disabled && !changes.disabled.firstChange) {\n            if (changes.disabled.currentValue) {\n                this.form.controls['item'].disable();\n            } else {\n                this.form.controls['item'].enable();\n            }\n        }\n    }\n\n    /**\n     * @name value\n     */\n    public get value(): FormControl {\n        return this.form.get('item') as FormControl;\n    }\n\n    /**\n     * @name isInputFocused\n     */\n    public isInputFocused(): boolean {\n        const doc = typeof document !== 'undefined' ? document : undefined;\n        return doc ? doc.activeElement === this.input.nativeElement : false;\n    }\n\n    /**\n     * @name getErrorMessages\n     * @param messages\n     */\n    public getErrorMessages(messages: { [key: string]: string }): string[] {\n        return Object.keys(messages)\n            .filter(err => this.value.hasError(err))\n            .map(err => messages[err]);\n    }\n\n    /**\n     * @name hasErrors\n     */\n    public hasErrors(): boolean {\n        const { dirty, value, valid } = this.form;\n        return dirty && value.item && !valid;\n    }\n\n    /**\n     * @name focus\n     */\n    public focus(): void {\n        this.input.nativeElement.focus();\n    }\n\n    /**\n     * @name blur\n     */\n    public blur(): void {\n        this.input.nativeElement.blur();\n    }\n\n    /**\n     * @name getElementPosition\n     */\n    public getElementPosition(): ClientRect {\n        return this.input.nativeElement.getBoundingClientRect();\n    }\n\n    /**\n     * - removes input from the component\n     * @name destroy\n     */\n    public destroy(): void {\n        const input = this.input.nativeElement;\n        input.parentElement.removeChild(input);\n    }\n\n    /**\n     * @name onKeyDown\n     * @param $event\n     */\n    public onKeyDown($event) {\n        this.inputText = this.value.value;\n        if ($event.key === 'Enter') {\n            this.submit($event);\n        } else {\n          return this.onKeydown.emit($event);\n        }\n    }\n\n    /**\n     * @name onKeyUp\n     * @param $event\n     */\n    public onKeyUp($event) {\n        this.inputText = this.value.value;\n        return this.onKeyup.emit($event);\n    }\n\n    /**\n     * @name submit\n     */\n    public submit($event: any): void {\n        $event.preventDefault();\n        this.onSubmit.emit($event);\n    }\n}\n","import {\n    Component,\n    Input\n} from '@angular/core';\n\n\nimport {\n    animate,\n    trigger,\n    style,\n    transition,\n    keyframes,\n    state\n} from '@angular/animations';\n\n@Component({\n    selector: 'tag-ripple',\n    styles: [`\n        :host {\n            width: 100%;\n            height: 100%;\n            left: 0;\n            overflow: hidden;\n            position: absolute;\n        }\n\n        .tag-ripple {\n            background: rgba(0, 0, 0, 0.1);\n            top: 50%;\n            left: 50%;\n            height: 100%;\n            transform: translate(-50%, -50%);\n            position: absolute;\n        }\n    `],\n    template: `\n        <div class=\"tag-ripple\" [@ink]=\"state\"></div>\n    `,\n    animations: [\n        trigger('ink', [\n            state('none', style({width: 0, opacity: 0})),\n            transition('none => clicked', [\n                animate(300, keyframes([\n                    style({opacity: 1, offset: 0, width: '30%', borderRadius: '100%'}),\n                    style({opacity: 1, offset: 0.5, width: '50%'}),\n                    style({opacity: 0.5, offset: 1, width: '100%', borderRadius: '16px'})\n                ]))\n            ])\n        ])\n    ]\n})\nexport class TagRipple {\n    @Input() public state = 'none';\n}\n","import {\n    Component,\n    Input,\n    Output,\n    EventEmitter,\n    TemplateRef,\n    ElementRef,\n    HostListener,\n    HostBinding,\n    ViewChild,\n    ChangeDetectorRef,\n    Renderer2\n} from '@angular/core';\n\nimport { TagModel } from '../../core/accessor';\nimport { TagRipple } from '../tag/tag-ripple.component';\nimport { EventLike } from '../../core/helpers/event-like';\n\n// mocking navigator\nconst navigator = typeof window !== 'undefined' ? window.navigator : {\n    userAgent: 'Chrome',\n    vendor: 'Google Inc'\n};\n\nconst isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n\n@Component({\n    selector: 'tag',\n    templateUrl: './tag.template.html',\n    styleUrls: ['./tag-component.style.scss']\n})\nexport class TagComponent {\n    /**\n     * @name model {TagModel}\n     */\n    @Input()\n    public model: TagModel;\n\n    /**\n     * @name removable {boolean}\n     */\n    @Input()\n    public removable: boolean;\n\n    /**\n     * @name editable {boolean}\n     */\n    @Input()\n    public editable: boolean;\n\n    /**\n     * @name template {TemplateRef<any>}\n     */\n    @Input()\n    public template: TemplateRef<any>;\n\n    /**\n     * @name displayBy {string}\n     */\n    @Input()\n    public displayBy: string;\n\n    /**\n     * @name identifyBy {string}\n     */\n    @Input()\n    public identifyBy: string;\n\n    /**\n     * @name index {number}\n     */\n    @Input()\n    public index: number;\n\n    /**\n     * @name hasRipple\n     */\n    @Input()\n    public hasRipple: boolean;\n\n    /**\n     * @name disabled\n     */\n    @Input()\n    public disabled = false;\n\n    /**\n     * @name canAddTag\n     */\n    @Input()\n    public canAddTag: (tag: TagModel) => boolean;\n\n    /**\n     * @name onSelect\n     */\n    @Output()\n    public onSelect: EventEmitter<TagModel> = new EventEmitter<TagModel>();\n\n    /**\n     * @name onRemove\n     */\n    @Output()\n    public onRemove: EventEmitter<TagModel> = new EventEmitter<TagModel>();\n\n    /**\n     * @name onBlur\n     */\n    @Output()\n    public onBlur: EventEmitter<TagModel> = new EventEmitter<TagModel>();\n\n    /**\n     * @name onKeyDown\n     */\n    @Output()\n    public onKeyDown: EventEmitter<any> = new EventEmitter<any>();\n\n    /**\n     * @name onTagEdited\n     */\n    @Output()\n    public onTagEdited: EventEmitter<TagModel> = new EventEmitter<TagModel>();\n\n    /**\n     * @name readonly {boolean}\n     */\n    public get readonly(): boolean {\n        return typeof this.model !== 'string' && this.model.readonly === true;\n    }\n\n    /**\n     * @name editing\n     */\n    public editing = false;\n\n    /**\n     * @name moving\n     */\n    @HostBinding('class.moving')\n    public moving: boolean;\n\n    /**\n     * @name rippleState\n     */\n    public rippleState = 'none';\n\n    /**\n     * @name ripple {TagRipple}\n     */\n    @ViewChild(TagRipple)\n    public ripple: TagRipple;\n\n    constructor(\n        public element: ElementRef,\n        public renderer: Renderer2,\n        private cdRef: ChangeDetectorRef\n    ) {}\n\n    /**\n     * @name select\n     */\n    public select($event?: MouseEvent): void {\n        if (this.readonly || this.disabled) {\n            return;\n        }\n\n        if ($event) {\n            $event.stopPropagation();\n        }\n\n        this.focus();\n\n        this.onSelect.emit(this.model);\n    }\n\n    /**\n     * @name remove\n     */\n    public remove($event: MouseEvent): void {\n        $event.stopPropagation();\n        this.onRemove.emit(this);\n    }\n\n    /**\n     * @name focus\n     */\n    public focus(): void {\n        this.element.nativeElement.focus();\n    }\n\n    public move(): void {\n        this.moving = true;\n    }\n\n    /**\n     * @name keydown\n     * @param event\n     */\n    @HostListener('keydown', ['$event'])\n    public keydown(event: EventLike): void {\n        if (this.editing) {\n            if (event.keyCode === 13) {\n                return this.disableEditMode(event);\n            }\n        } else {\n            this.onKeyDown.emit({ event, model: this.model });\n        }\n    }\n\n    /**\n     * @name blink\n     */\n    public blink(): void {\n        const classList = this.element.nativeElement.classList;\n        classList.add('blink');\n\n        setTimeout(() => classList.remove('blink'), 50);\n    }\n\n    /**\n     * @name toggleEditMode\n     */\n    public toggleEditMode(): void {\n        if (this.editable) {\n            return this.editing ? undefined : this.activateEditMode();\n        }\n    }\n\n    /**\n     * @name onBlurred\n     * @param event\n     */\n    public onBlurred(event: any): void {\n        // Checks if it is editable first before handeling the onBlurred event in order to prevent\n        // a bug in IE where tags are still editable with onlyFromAutocomplete set to true\n        if (!this.editable) {\n            return;\n        }\n\n        this.disableEditMode();\n\n        const value: string = event.target.innerText;\n        const result =\n            typeof this.model === 'string'\n                ? value\n                : { ...this.model, [this.displayBy]: value };\n\n        this.onBlur.emit(result);\n    }\n\n    /**\n     * @name getDisplayValue\n     * @param item\n     */\n    public getDisplayValue(item: TagModel): string {\n        return typeof item === 'string' ? item : item[this.displayBy];\n    }\n\n    /**\n     * @desc returns whether the ripple is visible or not\n     * only works in Chrome\n     * @name isRippleVisible\n     */\n    public get isRippleVisible(): boolean {\n        return !this.readonly && !this.editing && isChrome && this.hasRipple;\n    }\n\n    /**\n     * @name disableEditMode\n     * @param $event\n     */\n    public disableEditMode($event?: EventLike): void {\n        const classList = this.element.nativeElement.classList;\n        const input = this.getContentEditableText();\n\n        this.editing = false;\n        classList.remove('tag--editing');\n\n        if (!input) {\n            this.setContentEditableText(this.model);\n            return;\n        }\n\n        this.storeNewValue(input);\n        this.cdRef.detectChanges();\n\n        if ($event) {\n            $event.preventDefault();\n        }\n    }\n\n    /**\n     * @name isDeleteIconVisible\n     */\n    public isDeleteIconVisible(): boolean {\n        return (\n            !this.readonly && !this.disabled && this.removable && !this.editing\n        );\n    }\n\n    /**\n     * @name getContentEditableText\n     */\n    private getContentEditableText(): string {\n        const input = this.getContentEditable();\n\n        return input ? input.innerText.trim() : '';\n    }\n\n    /**\n     * @name setContentEditableText\n     * @param model\n     */\n    private setContentEditableText(model: TagModel) {\n        const input = this.getContentEditable();\n        const value = this.getDisplayValue(model);\n\n        input.innerText = value;\n    }\n\n    /**\n     * @name\n     */\n    private activateEditMode(): void {\n        const classList = this.element.nativeElement.classList;\n        classList.add('tag--editing');\n\n        this.editing = true;\n    }\n\n    /**\n     * @name storeNewValue\n     * @param input\n     */\n    private storeNewValue(input: string): void {\n        const exists = (tag: TagModel) => {\n            return typeof tag === 'string'\n                ? tag === input\n                : tag[this.displayBy] === input;\n        };\n\n        const hasId = () => {\n            return this.model[this.identifyBy] !== this.model[this.displayBy];\n        };\n\n        // if the value changed, replace the value in the model\n        if (exists(this.model)) {\n            return;\n        }\n\n        const model =\n            typeof this.model === 'string'\n                ? input\n                : {\n                      index: this.index,\n                      [this.identifyBy]: hasId()\n                          ? this.model[this.identifyBy]\n                          : input,\n                      [this.displayBy]: input\n                  };\n\n        if (this.canAddTag(model)) {\n            this.onTagEdited.emit({ tag: model, index: this.index });\n        } else {\n            this.setContentEditableText(this.model);\n        }\n    }\n\n    /**\n     * @name getContentEditable\n     */\n    private getContentEditable(): HTMLInputElement {\n        return this.element.nativeElement.querySelector('[contenteditable]');\n    }\n}\n","import {\n    animate,\n    trigger,\n    style,\n    transition,\n    keyframes,\n    state,\n    AnimationTriggerMetadata\n} from '@angular/animations';\n\n/**\n * @name animations\n */\nexport const animations = [\n    trigger('animation', [\n        state('in', style({\n            opacity: 1\n        })),\n        state('out', style({\n            opacity: 0\n        })),\n        transition(':enter', [\n            animate('{{ enter }}', keyframes([\n                style({opacity: 0, offset: 0, transform: 'translate(0px, 20px)'}),\n                style({opacity: 0.3, offset: 0.3, transform: 'translate(0px, -10px)'}),\n                style({opacity: 0.5, offset: 0.5, transform: 'translate(0px, 0px)'}),\n                style({opacity: 0.75, offset: 0.75, transform: 'translate(0px, 5px)'}),\n                style({opacity: 1, offset: 1, transform: 'translate(0px, 0px)'})\n            ]))\n        ]),\n        transition(':leave', [\n            animate('{{ leave }}', keyframes([\n                style({opacity: 1, transform: 'translateX(0)', offset: 0}),\n                style({opacity: 1, transform: 'translateX(-15px)', offset: 0.7}),\n                style({opacity: 0, transform: 'translateX(100%)', offset: 1.0})\n            ]))\n        ])\n    ])\n];\n","import {\n  Component,\n  ContentChildren,\n  EventEmitter,\n  HostListener,\n  Injector,\n  Input,\n  QueryList,\n  TemplateRef,\n  ViewChild,\n  AfterViewInit\n} from '@angular/core';\n\n// rx\nimport { Observable } from 'rxjs';\nimport { filter, first, debounceTime, distinctUntilChanged } from 'rxjs/operators';\n\nimport { Ng2Dropdown, Ng2MenuItem } from 'ng2-material-dropdown';\nimport { defaults } from '../../defaults';\nimport { TagModel } from '../../core/accessor';\nimport { TagInputComponent } from '../tag-input/tag-input';\n\n@Component({\n  selector: 'tag-input-dropdown',\n  templateUrl: './tag-input-dropdown.template.html'\n})\nexport class TagInputDropdown implements AfterViewInit {\n  /**\n   * @name dropdown\n   */\n  @ViewChild(Ng2Dropdown) public dropdown: Ng2Dropdown;\n\n  /**\n   * @name menuTemplate\n   * @desc reference to the template if provided by the user\n   */\n  @ContentChildren(TemplateRef) public templates: QueryList<TemplateRef<any>>;\n\n  /**\n   * @name offset\n   */\n  @Input() public offset: string = defaults.dropdown.offset;\n\n  /**\n   * @name focusFirstElement\n   */\n  @Input() public focusFirstElement = defaults.dropdown.focusFirstElement;\n\n  /**\n   * - show autocomplete dropdown if the value of input is empty\n   * @name showDropdownIfEmpty\n   */\n  @Input() public showDropdownIfEmpty = defaults.dropdown.showDropdownIfEmpty;\n\n  /**\n   * @description observable passed as input which populates the autocomplete items\n   * @name autocompleteObservable\n   */\n  @Input() public autocompleteObservable: (text: string) => Observable<any>;\n\n  /**\n   * - desc minimum text length in order to display the autocomplete dropdown\n   * @name minimumTextLength\n   */\n  @Input() public minimumTextLength = defaults.dropdown.minimumTextLength;\n\n  /**\n   * - number of items to display in the autocomplete dropdown\n   * @name limitItemsTo\n   */\n  @Input() public limitItemsTo: number = defaults.dropdown.limitItemsTo;\n\n  /**\n   * @name displayBy\n   */\n  @Input() public displayBy = defaults.dropdown.displayBy;\n\n  /**\n   * @name identifyBy\n   */\n  @Input() public identifyBy = defaults.dropdown.identifyBy;\n\n  /**\n   * @description a function a developer can use to implement custom matching for the autocomplete\n   * @name matchingFn\n   */\n  @Input() public matchingFn: (value: string, target: TagModel) => boolean =\n    defaults.dropdown.matchingFn;\n\n  /**\n   * @name appendToBody\n   */\n  @Input() public appendToBody = defaults.dropdown.appendToBody;\n\n  /**\n   * @name keepOpen\n   * @description option to leave dropdown open when adding a new item\n   */\n  @Input() public keepOpen = defaults.dropdown.keepOpen;\n\n  /**\n   * @name dynamicUpdate\n   */\n  @Input() public dynamicUpdate = defaults.dropdown.dynamicUpdate;\n\n  /**\n   * @name zIndex\n   */\n  @Input() public zIndex = defaults.dropdown.zIndex;\n\n  /**\n   * list of items that match the current value of the input (for autocomplete)\n   * @name items\n   */\n  public items: TagModel[] = [];\n\n  /**\n   * @name tagInput\n   */\n  public tagInput: TagInputComponent = this.injector.get(TagInputComponent);\n\n  /**\n   * @name _autocompleteItems\n   */\n  private _autocompleteItems: TagModel[] = [];\n\n  /**\n   * @name autocompleteItems\n   * @param items\n   */\n  public set autocompleteItems(items: TagModel[]) {\n    this._autocompleteItems = items;\n  }\n\n  /**\n   * @name autocompleteItems\n   * @desc array of items that will populate the autocomplete\n   */\n  @Input() public get autocompleteItems(): TagModel[] {\n    const items = this._autocompleteItems;\n\n    if (!items) {\n      return [];\n    }\n\n    return items.map((item: TagModel) => {\n      return typeof item === 'string'\n        ? {\n            [this.displayBy]: item,\n            [this.identifyBy]: item\n          }\n        : item;\n    });\n  }\n\n  constructor(private readonly injector: Injector) {}\n\n  /**\n   * @name ngAfterviewInit\n   */\n  ngAfterViewInit(): void {\n    this.onItemClicked().subscribe((item: Ng2MenuItem) => {\n      this.requestAdding(item);\n    });\n\n    // reset itemsMatching array when the dropdown is hidden\n    this.onHide().subscribe(this.resetItems);\n\n    const DEBOUNCE_TIME = 200;\n    const KEEP_OPEN = this.keepOpen;\n\n    this.tagInput.onTextChange\n      .asObservable()\n      .pipe(\n        distinctUntilChanged(),\n        debounceTime(DEBOUNCE_TIME),\n        filter((value: string) => {\n          if (KEEP_OPEN === false) {\n            return value.length > 0;\n          }\n\n          return true;\n        })\n      )\n      .subscribe(this.show);\n  }\n\n  /**\n   * @name updatePosition\n   */\n  public updatePosition(): void {\n    const position = this.tagInput.inputForm.getElementPosition();\n\n    this.dropdown.menu.updatePosition(position, this.dynamicUpdate);\n  }\n\n  /**\n   * @name isVisible\n   */\n  public get isVisible(): boolean {\n    return this.dropdown.menu.dropdownState.menuState.isVisible;\n  }\n\n  /**\n   * @name onHide\n   */\n  public onHide(): EventEmitter<Ng2Dropdown> {\n    return this.dropdown.onHide;\n  }\n\n  /**\n   * @name onItemClicked\n   */\n  public onItemClicked(): EventEmitter<string> {\n    return this.dropdown.onItemClicked;\n  }\n\n  /**\n   * @name selectedItem\n   */\n  public get selectedItem(): Ng2MenuItem {\n    return this.dropdown.menu.dropdownState.dropdownState.selectedItem;\n  }\n\n  /**\n   * @name state\n   */\n  public get state(): any {\n    return this.dropdown.menu.dropdownState;\n  }\n\n  /**\n   *\n   * @name show\n   */\n  public show = (): void => {\n    const maxItemsReached =\n      this.tagInput.items.length === this.tagInput.maxItems;\n    const value = this.getFormValue();\n    const hasMinimumText = value.trim().length >= this.minimumTextLength;\n    const position = this.calculatePosition();\n    const items = this.getMatchingItems(value);\n    const hasItems = items.length > 0;\n    const isHidden = this.isVisible === false;\n    const showDropdownIfEmpty = this.showDropdownIfEmpty && hasItems && !value;\n    const isDisabled = this.tagInput.disable;\n\n    const shouldShow =\n      isHidden && ((hasItems && hasMinimumText) || showDropdownIfEmpty);\n    const shouldHide = this.isVisible && !hasItems;\n\n    if (this.autocompleteObservable && hasMinimumText) {\n      return this.getItemsFromObservable(value);\n    }\n\n    if (\n      (!this.showDropdownIfEmpty && !value) ||\n      maxItemsReached ||\n      isDisabled\n    ) {\n      return this.dropdown.hide();\n    }\n\n    this.setItems(items);\n\n    if (shouldShow) {\n      this.dropdown.show(position);\n    } else if (shouldHide) {\n      this.hide();\n    }\n  };\n\n  /**\n   * @name hide\n   */\n  public hide(): void {\n    this.resetItems();\n    this.dropdown.hide();\n  }\n\n  /**\n   * @name scrollListener\n   */\n  @HostListener('window:scroll')\n  public scrollListener(): void {\n    if (!this.isVisible || !this.dynamicUpdate) {\n      return;\n    }\n\n    this.updatePosition();\n  }\n\n  /**\n   * @name onWindowBlur\n   */\n  @HostListener('window:blur')\n  public onWindowBlur(): void {\n    this.dropdown.hide();\n  }\n\n  /**\n   * @name getFormValue\n   */\n  private getFormValue(): string {\n    const formValue = this.tagInput.formValue;\n    return formValue ? formValue.toString().trim() : '';\n  }\n\n  /**\n   * @name calculatePosition\n   */\n  private calculatePosition(): ClientRect {\n    return this.tagInput.inputForm.getElementPosition();\n  }\n\n  /**\n   * @name requestAdding\n   * @param item {Ng2MenuItem}\n   */\n  private requestAdding = async (item: Ng2MenuItem) => {\n    const tag = this.createTagModel(item);\n    await this.tagInput.onAddingRequested(true, tag).catch(() => {});\n  };\n\n  /**\n   * @name createTagModel\n   * @param item\n   */\n  private createTagModel(item: Ng2MenuItem): TagModel {\n    const display =\n      typeof item.value === 'string' ? item.value : item.value[this.displayBy];\n    const value =\n      typeof item.value === 'string' ? item.value : item.value[this.identifyBy];\n\n    return {\n      ...item.value,\n      [this.tagInput.displayBy]: display,\n      [this.tagInput.identifyBy]: value\n    };\n  }\n\n  /**\n   *\n   * @param value {string}\n   */\n  private getMatchingItems(value: string): TagModel[] {\n    if (!value && !this.showDropdownIfEmpty) {\n      return [];\n    }\n\n    const dupesAllowed = this.tagInput.allowDupes;\n\n    return this.autocompleteItems.filter((item: TagModel) => {\n      const hasValue = dupesAllowed\n        ? false\n        : this.tagInput.tags.some(tag => {\n            const identifyBy = this.tagInput.identifyBy;\n            const model =\n              typeof tag.model === 'string' ? tag.model : tag.model[identifyBy];\n\n            return model === item[this.identifyBy];\n          });\n\n      return this.matchingFn(value, item) && hasValue === false;\n    });\n  }\n\n  /**\n   * @name setItems\n   */\n  private setItems(items: TagModel[]): void {\n    this.items = items.slice(0, this.limitItemsTo || items.length);\n  }\n\n  /**\n   * @name resetItems\n   */\n  private resetItems = (): void => {\n    this.items = [];\n  };\n\n  /**\n   * @name populateItems\n   * @param data\n   */\n  private populateItems(data: any): TagInputDropdown {\n    this.autocompleteItems = data.map(item => {\n      return typeof item === 'string'\n        ? {\n            [this.displayBy]: item,\n            [this.identifyBy]: item\n          }\n        : item;\n    });\n\n    return this;\n  }\n\n  /**\n   * @name getItemsFromObservable\n   * @param text\n   */\n  private getItemsFromObservable = (text: string): void => {\n    this.setLoadingState(true);\n\n    const subscribeFn = (data: any[]) => {\n      // hide loading animation\n      this.setLoadingState(false)\n        // add items\n        .populateItems(data);\n\n      this.setItems(this.getMatchingItems(text));\n\n      if (this.items.length) {\n        this.dropdown.show(this.calculatePosition());\n      } else {\n        this.dropdown.hide();\n      }\n    };\n\n    this.autocompleteObservable(text)\n      .pipe(first())\n      .subscribe(subscribeFn, () => this.setLoadingState(false));\n  };\n\n  /**\n   * @name setLoadingState\n   * @param state\n   */\n  private setLoadingState(state: boolean): TagInputDropdown {\n    this.tagInput.isLoading = state;\n\n    return this;\n  }\n}\n","// angular\nimport {\n    Component,\n    forwardRef,\n    HostBinding,\n    Input,\n    Output,\n    EventEmitter,\n    Renderer2,\n    ViewChild,\n    ViewChildren,\n    ContentChildren,\n    ContentChild,\n    OnInit,\n    TemplateRef,\n    QueryList,\n    AfterViewInit\n} from '@angular/core';\n\nimport {\n    AsyncValidatorFn,\n    FormControl,\n    NG_VALUE_ACCESSOR,\n    ValidatorFn\n} from '@angular/forms';\n\n// rx\nimport { Observable } from 'rxjs';\nimport { debounceTime, filter, map, first } from 'rxjs/operators';\n\n// ng2-tag-input\nimport { TagInputAccessor, TagModel } from '../../core/accessor';\nimport { listen } from '../../core/helpers/listen';\nimport * as constants from '../../core/constants';\n\nimport { DragProvider, DraggedTag } from '../../core/providers/drag-provider';\n\nimport { TagInputForm } from '../tag-input-form/tag-input-form.component';\nimport { TagComponent } from '../tag/tag.component';\n\nimport { animations } from './animations';\nimport { defaults } from '../../defaults';\nimport { TagInputDropdown } from '../dropdown/tag-input-dropdown.component';\n\n// angular universal hacks\n/* tslint:disable-next-line */\nconst DragEvent = typeof window !== 'undefined' && (window as any).DragEvent;\n\nconst CUSTOM_ACCESSOR = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => TagInputComponent),\n    multi: true\n};\n@Component({\n    selector: 'tag-input',\n    providers: [CUSTOM_ACCESSOR],\n    styleUrls: ['./tag-input.style.scss'],\n    templateUrl: './tag-input.template.html',\n    animations\n})\nexport class TagInputComponent extends TagInputAccessor implements OnInit, AfterViewInit {\n    /**\n     * @name separatorKeys\n     * @desc keyboard keys with which a user can separate items\n     */\n    @Input() public separatorKeys: string[] = defaults.tagInput.separatorKeys;\n\n    /**\n     * @name separatorKeyCodes\n     * @desc keyboard key codes with which a user can separate items\n     */\n    @Input() public separatorKeyCodes: number[] = defaults.tagInput.separatorKeyCodes;\n\n    /**\n     * @name placeholder\n     * @desc the placeholder of the input text\n     */\n    @Input() public placeholder: string = defaults.tagInput.placeholder;\n\n    /**\n     * @name secondaryPlaceholder\n     * @desc placeholder to appear when the input is empty\n     */\n    @Input() public secondaryPlaceholder: string = defaults.tagInput.secondaryPlaceholder;\n\n    /**\n     * @name maxItems\n     * @desc maximum number of items that can be added\n     */\n    @Input() public maxItems: number = defaults.tagInput.maxItems;\n\n    /**\n     * @name validators\n     * @desc array of Validators that are used to validate the tag before it gets appended to the list\n     */\n    @Input() public validators: ValidatorFn[] = defaults.tagInput.validators;\n\n    /**\n     * @name asyncValidators\n     * @desc array of AsyncValidator that are used to validate the tag before it gets appended to the list\n     */\n    @Input() public asyncValidators: AsyncValidatorFn[] = defaults.tagInput.asyncValidators;\n\n    /**\n    * - if set to true, it will only possible to add items from the autocomplete\n    * @name onlyFromAutocomplete\n    */\n    @Input() public onlyFromAutocomplete = defaults.tagInput.onlyFromAutocomplete;\n\n    /**\n     * @name errorMessages\n     */\n    @Input() public errorMessages: { [key: string]: string } = defaults.tagInput.errorMessages;\n\n    /**\n     * @name theme\n     */\n    @Input() public theme: string = defaults.tagInput.theme;\n\n    /**\n     * @name onTextChangeDebounce\n     */\n    @Input() public onTextChangeDebounce = defaults.tagInput.onTextChangeDebounce;\n\n    /**\n     * - custom id assigned to the input\n     * @name id\n     */\n    @Input() public inputId = defaults.tagInput.inputId;\n\n    /**\n     * - custom class assigned to the input\n     */\n    @Input() public inputClass: string = defaults.tagInput.inputClass;\n\n    /**\n     * - option to clear text input when the form is blurred\n     * @name clearOnBlur\n     */\n    @Input() public clearOnBlur: boolean = defaults.tagInput.clearOnBlur;\n\n    /**\n     * - hideForm\n     * @name clearOnBlur\n     */\n    @Input() public hideForm: boolean = defaults.tagInput.hideForm;\n\n    /**\n     * @name addOnBlur\n     */\n    @Input() public addOnBlur: boolean = defaults.tagInput.addOnBlur;\n\n    /**\n     * @name addOnPaste\n     */\n    @Input() public addOnPaste: boolean = defaults.tagInput.addOnPaste;\n\n    /**\n     * - pattern used with the native method split() to separate patterns in the string pasted\n     * @name pasteSplitPattern\n     */\n    @Input() public pasteSplitPattern = defaults.tagInput.pasteSplitPattern;\n\n    /**\n     * @name blinkIfDupe\n     */\n    @Input() public blinkIfDupe = defaults.tagInput.blinkIfDupe;\n\n    /**\n     * @name removable\n     */\n    @Input() public removable = defaults.tagInput.removable;\n\n    /**\n     * @name editable\n     */\n    @Input() public editable: boolean = defaults.tagInput.editable;\n\n    /**\n     * @name allowDupes\n     */\n    @Input() public allowDupes = defaults.tagInput.allowDupes;\n\n    /**\n     * @description if set to true, the newly added tags will be added as strings, and not objects\n     * @name modelAsStrings\n     */\n    @Input() public modelAsStrings = defaults.tagInput.modelAsStrings;\n\n    /**\n     * @name trimTags\n     */\n    @Input() public trimTags = defaults.tagInput.trimTags;\n\n    /**\n     * @name inputText\n     */\n    @Input() public get inputText(): string {\n        return this.inputTextValue;\n    }\n\n    /**\n     * @name ripple\n     */\n    @Input() public ripple: boolean = defaults.tagInput.ripple;\n\n    /**\n     * @name tabindex\n     * @desc pass through the specified tabindex to the input\n     */\n    @Input() public tabindex: string = defaults.tagInput.tabIndex;\n\n    /**\n     * @name disable\n     */\n    @Input() public disable: boolean = defaults.tagInput.disable;\n\n    /**\n     * @name dragZone\n     */\n    @Input() public dragZone: string = defaults.tagInput.dragZone;\n\n    /**\n     * @name onRemoving\n     */\n    @Input() public onRemoving = defaults.tagInput.onRemoving;\n\n    /**\n     * @name onAdding\n     */\n    @Input() public onAdding = defaults.tagInput.onAdding;\n\n    /**\n     * @name animationDuration\n     */\n    @Input() public animationDuration = defaults.tagInput.animationDuration;\n\n    /**\n     * @name onAdd\n     * @desc event emitted when adding a new item\n     */\n    @Output() public onAdd = new EventEmitter<TagModel>();\n\n    /**\n     * @name onRemove\n     * @desc event emitted when removing an existing item\n     */\n    @Output() public onRemove = new EventEmitter<TagModel>();\n\n    /**\n     * @name onSelect\n     * @desc event emitted when selecting an item\n     */\n    @Output() public onSelect = new EventEmitter<TagModel>();\n\n    /**\n     * @name onFocus\n     * @desc event emitted when the input is focused\n     */\n    @Output() public onFocus = new EventEmitter<string>();\n\n    /**\n     * @name onFocus\n     * @desc event emitted when the input is blurred\n     */\n    @Output() public onBlur = new EventEmitter<string>();\n\n    /**\n     * @name onTextChange\n     * @desc event emitted when the input value changes\n     */\n    @Output() public onTextChange = new EventEmitter<TagModel>();\n\n    /**\n     * - output triggered when text is pasted in the form\n     * @name onPaste\n     */\n    @Output() public onPaste = new EventEmitter<string>();\n\n    /**\n     * - output triggered when tag entered is not valid\n     * @name onValidationError\n     */\n    @Output() public onValidationError = new EventEmitter<TagModel>();\n\n    /**\n     * - output triggered when tag is edited\n     * @name onTagEdited\n     */\n    @Output() public onTagEdited = new EventEmitter<TagModel>();\n\n    /**\n     * @name dropdown\n     */\n    // @ContentChild(forwardRef(() => TagInputDropdown), {static: true}) dropdown: TagInputDropdown;\n    @ContentChild(TagInputDropdown) public dropdown: TagInputDropdown;\n    /**\n     * @name template\n     * @desc reference to the template if provided by the user\n     */\n    @ContentChildren(TemplateRef, { descendants: false }) public templates: QueryList<TemplateRef<any>>;\n\n    /**\n     * @name inputForm\n     */\n    @ViewChild(TagInputForm) public inputForm: TagInputForm;\n\n    /**\n     * @name selectedTag\n     * @desc reference to the current selected tag\n     */\n    public selectedTag: TagModel | undefined;\n\n    /**\n     * @name isLoading\n     */\n    public isLoading = false;\n\n    /**\n     * @name inputText\n     * @param text\n     */\n    public set inputText(text: string) {\n        this.inputTextValue = text;\n        this.inputTextChange.emit(text);\n    }\n\n    /**\n     * @name tags\n     * @desc list of Element items\n     */\n    @ViewChildren(TagComponent) public tags: QueryList<TagComponent>;\n\n    /**\n     * @name listeners\n     * @desc array of events that get fired using @fireEvents\n     */\n    private listeners = {\n        [constants.KEYDOWN]: <{ (fun): any }[]>[],\n        [constants.KEYUP]: <{ (fun): any }[]>[]\n    };\n\n    /**\n     * @description emitter for the 2-way data binding inputText value\n     * @name inputTextChange\n     */\n    @Output() public inputTextChange: EventEmitter<string> = new EventEmitter();\n\n    /**\n     * @description private variable to bind get/set\n     * @name inputTextValue\n     */\n    public inputTextValue = '';\n\n    /**\n     * @desc removes the tab index if it is set - it will be passed through to the input\n     * @name tabindexAttr\n     */\n    @HostBinding('attr.tabindex')\n    public get tabindexAttr(): string {\n        return this.tabindex !== '' ? '-1' : '';\n    }\n\n    /**\n     * @name animationMetadata\n     */\n    public animationMetadata: { value: string, params: object };\n\n    public errors: string[] = [];\n\n    public isProgressBarVisible$: Observable<boolean>;\n\n    constructor(private readonly renderer: Renderer2,\n        public readonly dragProvider: DragProvider) {\n        super();\n    }\n\n    /**\n     * @name ngAfterViewInit\n     */\n    public ngAfterViewInit(): void {\n        // set up listeners\n\n        this.setUpKeypressListeners();\n        this.setupSeparatorKeysListener();\n        this.setUpInputKeydownListeners();\n\n        if (this.onTextChange.observers.length) {\n            this.setUpTextChangeSubscriber();\n        }\n\n        // if clear on blur is set to true, subscribe to the event and clear the text's form\n        if (this.clearOnBlur || this.addOnBlur) {\n            this.setUpOnBlurSubscriber();\n        }\n\n        // if addOnPaste is set to true, register the handler and add items\n        if (this.addOnPaste) {\n            this.setUpOnPasteListener();\n        }\n\n        const statusChanges$ = this.inputForm.form.statusChanges;\n\n        statusChanges$.pipe(\n            filter((status: string) => status !== 'PENDING')\n        ).subscribe(() => {\n            this.errors = this.inputForm.getErrorMessages(this.errorMessages);\n        });\n\n        this.isProgressBarVisible$ = statusChanges$.pipe(\n            map((status: string) => {\n                return status === 'PENDING' || this.isLoading;\n            })\n        );\n\n        // if hideForm is set to true, remove the input\n        if (this.hideForm) {\n            this.inputForm.destroy();\n        }\n    }\n\n    /**\n     * @name ngOnInit\n     */\n    public ngOnInit(): void {\n        // if the number of items specified in the model is > of the value of maxItems\n        // degrade gracefully and let the max number of items to be the number of items in the model\n        // though, warn the user.\n        const hasReachedMaxItems = this.maxItems !== undefined &&\n            this.items &&\n            this.items.length > this.maxItems;\n\n        if (hasReachedMaxItems) {\n            this.maxItems = this.items.length;\n            console.warn(constants.MAX_ITEMS_WARNING);\n        }\n\n        // Setting editable to false to fix problem with tags in IE still being editable when\n        // onlyFromAutocomplete is true\n        this.editable = this.onlyFromAutocomplete ? false : this.editable;\n\n        this.setAnimationMetadata();\n    }\n\n    /**\n     * @name onRemoveRequested\n     * @param tag\n     * @param index\n     */\n    public onRemoveRequested(tag: TagModel, index: number): Promise<TagModel> {\n        return new Promise(resolve => {\n            const subscribeFn = (model: TagModel) => {\n                this.removeItem(model, index);\n                resolve(tag);\n            };\n\n            this.onRemoving ?\n                this.onRemoving(tag)\n                    .pipe(first())\n                    .subscribe(subscribeFn) : subscribeFn(tag);\n        });\n    }\n\n    /**\n     * @name onAddingRequested\n     * @param fromAutocomplete {boolean}\n     * @param tag {TagModel}\n     * @param index? {number}\n     * @param giveupFocus? {boolean}\n     */\n    public onAddingRequested(fromAutocomplete: boolean, tag: TagModel,\n        index?: number, giveupFocus?: boolean): Promise<TagModel> {\n        return new Promise((resolve, reject) => {\n            const subscribeFn = (model: TagModel) => {\n                return this\n                    .addItem(fromAutocomplete, model, index, giveupFocus)\n                    .then(resolve)\n                    .catch(reject);\n            };\n\n            return this.onAdding ?\n                this.onAdding(tag)\n                    .pipe(first())\n                    .subscribe(subscribeFn, reject) : subscribeFn(tag);\n        });\n    }\n\n    /**\n     * @name appendTag\n     * @param tag {TagModel}\n     */\n    public appendTag = (tag: TagModel, index = this.items.length): void => {\n        const items = this.items;\n        const model = this.modelAsStrings ? tag[this.identifyBy] : tag;\n\n        this.items = [\n            ...items.slice(0, index),\n            model,\n            ...items.slice(index, items.length)\n        ];\n    }\n\n    /**\n     * @name createTag\n     * @param model\n     */\n    public createTag = (model: TagModel): TagModel => {\n        const trim = (val: TagModel, key: string): TagModel => {\n            return typeof val === 'string' ? val.trim() : val[key];\n        };\n\n        return {\n            ...typeof model !== 'string' ? model : {},\n            [this.displayBy]: this.trimTags ? trim(model, this.displayBy) : model,\n            [this.identifyBy]: this.trimTags ? trim(model, this.identifyBy) : model\n        };\n    }\n\n    /**\n     * @name selectItem\n     * @desc selects item passed as parameter as the selected tag\n     * @param item\n     * @param emit\n     */\n    public selectItem(item: TagModel | undefined, emit = true): void {\n        const isReadonly = item && typeof item !== 'string' && item.readonly;\n\n        if (isReadonly || this.selectedTag === item) {\n            return;\n        }\n\n        this.selectedTag = item;\n\n        if (emit) {\n            this.onSelect.emit(item);\n        }\n    }\n\n    /**\n     * @name fireEvents\n     * @desc goes through the list of the events for a given eventName, and fires each of them\n     * @param eventName\n     * @param $event\n     */\n    public fireEvents(eventName: string, $event?): void {\n        this.listeners[eventName].forEach(listener => listener.call(this, $event));\n    }\n\n    /**\n     * @name handleKeydown\n     * @desc handles action when the user hits a keyboard key\n     * @param data\n     */\n    public handleKeydown(data: any): void {\n        const event = data.event;\n        const key = event.keyCode || event.which;\n        const shiftKey = event.shiftKey || false;\n\n        switch (constants.KEY_PRESS_ACTIONS[key]) {\n            case constants.ACTIONS_KEYS.DELETE:\n                if (this.selectedTag && this.removable) {\n                    const index = this.items.indexOf(this.selectedTag);\n                    this.onRemoveRequested(this.selectedTag, index);\n                }\n                break;\n\n            case constants.ACTIONS_KEYS.SWITCH_PREV:\n                this.moveToTag(data.model, constants.PREV);\n                break;\n\n            case constants.ACTIONS_KEYS.SWITCH_NEXT:\n                this.moveToTag(data.model, constants.NEXT);\n                break;\n\n            case constants.ACTIONS_KEYS.TAB:\n                if (shiftKey) {\n                    if (this.isFirstTag(data.model)) {\n                        return;\n                    }\n\n                    this.moveToTag(data.model, constants.PREV);\n                } else {\n                    if (this.isLastTag(data.model) && (this.disable || this.maxItemsReached)) {\n                        return;\n                    }\n\n                    this.moveToTag(data.model, constants.NEXT);\n                }\n                break;\n\n            default:\n                return;\n        }\n\n        // prevent default behaviour\n        event.preventDefault();\n    }\n\n    public async onFormSubmit() {\n        try {\n            await this.onAddingRequested(false, this.formValue);\n        } catch {\n            return;\n        }\n    }\n\n    /**\n     * @name setInputValue\n     * @param value\n     */\n    public setInputValue(value: string, emitEvent = true): void {\n        const control = this.getControl();\n\n        // update form value with the transformed item\n        control.setValue(value, { emitEvent });\n    }\n\n    /**\n     * @name getControl\n     */\n    private getControl(): FormControl {\n        return this.inputForm.value as FormControl;\n    }\n\n    /**\n     * @name focus\n     * @param applyFocus\n     * @param displayAutocomplete\n     */\n    public focus(applyFocus = false, displayAutocomplete = false): void {\n        if (this.dragProvider.getState('dragging')) {\n            return;\n        }\n\n        this.selectItem(undefined, false);\n\n        if (applyFocus) {\n            this.inputForm.focus();\n            this.onFocus.emit(this.formValue);\n        }\n    }\n\n    /**\n     * @name blur\n     */\n    public blur(): void {\n        this.onTouched();\n\n        this.onBlur.emit(this.formValue);\n    }\n\n    /**\n     * @name hasErrors\n     */\n    public hasErrors(): boolean {\n        return !!this.inputForm && this.inputForm.hasErrors();\n    }\n\n    /**\n     * @name isInputFocused\n     */\n    public isInputFocused(): boolean {\n        return !!this.inputForm && this.inputForm.isInputFocused();\n    }\n\n    /**\n     * - this is the one way I found to tell if the template has been passed and it is not\n     * the template for the menu item\n     * @name hasCustomTemplate\n     */\n    public hasCustomTemplate(): boolean {\n        const template = this.templates ? this.templates.first : undefined;\n        const menuTemplate = this.dropdown && this.dropdown.templates ?\n            this.dropdown.templates.first : undefined;\n\n        return Boolean(template && template !== menuTemplate);\n    }\n\n    /**\n     * @name maxItemsReached\n     */\n    public get maxItemsReached(): boolean {\n        return this.maxItems !== undefined &&\n            this.items.length >= this.maxItems;\n    }\n\n    /**\n     * @name formValue\n     */\n    public get formValue(): string {\n        const form = this.inputForm.value;\n\n        return form ? form.value : '';\n    }\n\n    /**3\n     * @name onDragStarted\n     * @param event\n     * @param index\n     */\n    public onDragStarted(event: DragEvent, tag: TagModel, index: number): void {\n        event.stopPropagation();\n\n        const item = { zone: this.dragZone, tag, index } as DraggedTag;\n\n        this.dragProvider.setSender(this);\n        this.dragProvider.setDraggedItem(event, item);\n        this.dragProvider.setState({ dragging: true, index });\n    }\n\n    /**\n     * @name onDragOver\n     * @param event\n     */\n    public onDragOver(event: DragEvent, index?: number): void {\n        this.dragProvider.setState({ dropping: true });\n        this.dragProvider.setReceiver(this);\n\n        event.preventDefault();\n    }\n\n    /**\n     * @name onTagDropped\n     * @param event\n     * @param index\n     */\n    public onTagDropped(event: DragEvent, index?: number): void {\n        const item = this.dragProvider.getDraggedItem(event);\n\n        if (!item || item.zone !== this.dragZone) {\n            return;\n        }\n\n        this.dragProvider.onTagDropped(item.tag, item.index, index);\n\n        event.preventDefault();\n        event.stopPropagation();\n    }\n\n    /**\n     * @name isDropping\n     */\n    public isDropping(): boolean {\n        const isReceiver = this.dragProvider.receiver === this;\n        const isDropping = this.dragProvider.getState('dropping');\n\n        return Boolean(isReceiver && isDropping);\n    }\n\n    /**\n     * @name onTagBlurred\n     * @param changedElement {TagModel}\n     * @param index {number}\n     */\n    public onTagBlurred(changedElement: TagModel, index: number): void {\n        this.items[index] = changedElement;\n        this.blur();\n    }\n\n    /**\n     * @name trackBy\n     * @param items\n     */\n    public trackBy(index: number, item: TagModel): string {\n        return item[this.identifyBy];\n    }\n\n    /**\n     * @name updateEditedTag\n     * @param tag\n     */\n    public updateEditedTag({ tag, index }: { tag: TagModel, index: number }): void {\n        this.onTagEdited.emit(tag);\n    }\n\n    /**\n     *\n     * @param tag\n     * @param isFromAutocomplete\n     */\n    public isTagValid = (tag: TagModel, fromAutocomplete = false): boolean => {\n        const selectedItem = this.dropdown ? this.dropdown.selectedItem : undefined;\n        const value = this.getItemDisplay(tag).trim();\n\n        if (selectedItem && !fromAutocomplete || !value) {\n            return false;\n        }\n\n        const dupe = this.findDupe(tag, fromAutocomplete);\n\n        // if so, give a visual cue and return false\n        if (!this.allowDupes && dupe && this.blinkIfDupe) {\n            const model = this.tags.find(item => {\n                return this.getItemValue(item.model) === this.getItemValue(dupe);\n            });\n\n            if (model) {\n                model.blink();\n            }\n        }\n\n        const isFromAutocomplete = fromAutocomplete && this.onlyFromAutocomplete;\n\n        const assertions = [\n            // 1. there must be no dupe OR dupes are allowed\n            !dupe || this.allowDupes,\n\n            // 2. check max items has not been reached\n            !this.maxItemsReached,\n\n            // 3. check item comes from autocomplete or onlyFromAutocomplete is false\n            ((isFromAutocomplete) || !this.onlyFromAutocomplete)\n        ];\n\n        return assertions.filter(Boolean).length === assertions.length;\n    }\n\n    /**\n     * @name moveToTag\n     * @param item\n     * @param direction\n     */\n    private moveToTag(item: TagModel, direction: string): void {\n        const isLast = this.isLastTag(item);\n        const isFirst = this.isFirstTag(item);\n        const stopSwitch = (direction === constants.NEXT && isLast) ||\n            (direction === constants.PREV && isFirst);\n\n        if (stopSwitch) {\n            this.focus(true);\n            return;\n        }\n\n        const offset = direction === constants.NEXT ? 1 : -1;\n        const index = this.getTagIndex(item) + offset;\n        const tag = this.getTagAtIndex(index);\n\n        return tag.select.call(tag);\n    }\n\n    /**\n     * @name isFirstTag\n     * @param item {TagModel}\n     */\n    private isFirstTag(item: TagModel): boolean {\n        return this.tags.first.model === item;\n    }\n\n    /**\n     * @name isLastTag\n     * @param item {TagModel}\n     */\n    private isLastTag(item: TagModel): boolean {\n        return this.tags.last.model === item;\n    }\n\n    /**\n     * @name getTagIndex\n     * @param item\n     */\n    private getTagIndex(item: TagModel): number {\n        const tags = this.tags.toArray();\n\n        return tags.findIndex(tag => tag.model === item);\n    }\n\n    /**\n     * @name getTagAtIndex\n     * @param index\n     */\n    private getTagAtIndex(index: number) {\n        const tags = this.tags.toArray();\n\n        return tags[index];\n    }\n\n    /**\n     * @name removeItem\n     * @desc removes an item from the array of the model\n     * @param tag {TagModel}\n     * @param index {number}\n     */\n    public removeItem(tag: TagModel, index: number): void {\n        this.items = this.getItemsWithout(index);\n\n        // if the removed tag was selected, set it as undefined\n        if (this.selectedTag === tag) {\n            this.selectItem(undefined, false);\n        }\n\n        // focus input\n        this.focus(true, false);\n\n        // emit remove event\n        this.onRemove.emit(tag);\n    }\n\n    /**\n     * @name addItem\n     * @desc adds the current text model to the items array\n     * @param fromAutocomplete {boolean}\n     * @param item {TagModel}\n     * @param index? {number}\n     * @param giveupFocus? {boolean}\n     */\n    private addItem(fromAutocomplete = false, item: TagModel, index?: number, giveupFocus?: boolean):\n        Promise<TagModel> {\n        const display = this.getItemDisplay(item);\n        const tag = this.createTag(item);\n\n        if (fromAutocomplete) {\n            this.setInputValue(this.getItemValue(item, true));\n        }\n\n        return new Promise((resolve, reject) => {\n            /**\n             * @name reset\n             */\n            const reset = (): void => {\n                // reset control and focus input\n                this.setInputValue('');\n\n                if (giveupFocus) {\n                    this.focus(false, false);\n                } else {\n                    // focus input\n                    this.focus(true, false);\n                }\n\n                resolve(display);\n            };\n\n            const appendItem = (): void => {\n                this.appendTag(tag, index);\n\n                // emit event\n                this.onAdd.emit(tag);\n\n                if (!this.dropdown) {\n                    return;\n                }\n\n                this.dropdown.hide();\n\n                if (this.dropdown.showDropdownIfEmpty) {\n                    this.dropdown.show();\n                }\n            };\n\n            const status = this.inputForm.form.status;\n            const isTagValid = this.isTagValid(tag, fromAutocomplete);\n\n            const onValidationError = () => {\n                this.onValidationError.emit(tag);\n                return reject();\n            };\n\n            if (status === 'VALID' && isTagValid) {\n                appendItem();\n                return reset();\n            }\n\n            if (status === 'INVALID' || !isTagValid) {\n                reset();\n                return onValidationError();\n            }\n\n            if (status === 'PENDING') {\n                const statusUpdate$ = this.inputForm.form.statusChanges;\n\n                return statusUpdate$\n                    .pipe(\n                        filter(statusUpdate => statusUpdate !== 'PENDING'),\n                        first()\n                    )\n                    .subscribe((statusUpdate) => {\n                        if (statusUpdate === 'VALID' && isTagValid) {\n                            appendItem();\n                            return reset();\n                        } else {\n                            reset();\n                            return onValidationError();\n                        }\n                    });\n            }\n        });\n    }\n\n    /**\n     * @name setupSeparatorKeysListener\n     */\n    private setupSeparatorKeysListener(): void {\n        const useSeparatorKeys = this.separatorKeyCodes.length > 0 || this.separatorKeys.length > 0;\n        const listener = ($event) => {\n            const hasKeyCode = this.separatorKeyCodes.indexOf($event.keyCode) >= 0;\n            const hasKey = this.separatorKeys.indexOf($event.key) >= 0;\n            // the keyCode of keydown event is 229 when IME is processing the key event.\n            const isIMEProcessing = $event.keyCode === 229;\n\n            if (hasKeyCode || (hasKey && !isIMEProcessing)) {\n                $event.preventDefault();\n                this.onAddingRequested(false, this.formValue)\n                    .catch(() => { });\n            }\n        };\n\n        listen.call(this, constants.KEYDOWN, listener, useSeparatorKeys);\n    }\n\n    /**\n     * @name setUpKeypressListeners\n     */\n    private setUpKeypressListeners(): void {\n        const listener = ($event) => {\n            const isCorrectKey = $event.keyCode === 37 || $event.keyCode === 8;\n\n            if (isCorrectKey &&\n                !this.formValue &&\n                this.items.length) {\n                this.tags.last.select.call(this.tags.last);\n            }\n        };\n\n        // setting up the keypress listeners\n        listen.call(this, constants.KEYDOWN, listener);\n    }\n\n    /**\n     * @name setUpKeydownListeners\n     */\n    private setUpInputKeydownListeners(): void {\n        this.inputForm.onKeydown.subscribe(event => {\n            if (event.key === 'Backspace' && this.formValue.trim() === '') {\n                event.preventDefault();\n            }\n        });\n    }\n\n    /**\n     * @name setUpOnPasteListener\n     */\n    private setUpOnPasteListener() {\n        const input = this.inputForm.input.nativeElement;\n\n        // attach listener to input\n        this.renderer.listen(input, 'paste', (event) => {\n            this.onPasteCallback(event);\n\n            event.preventDefault();\n            return true;\n        });\n    }\n\n    /**\n     * @name setUpTextChangeSubscriber\n     */\n    private setUpTextChangeSubscriber(): void {\n        this.inputForm.form\n            .valueChanges\n            .pipe(\n                debounceTime(this.onTextChangeDebounce)\n            )\n            .subscribe((value: { item: string }) => {\n                this.onTextChange.emit(value.item);\n            });\n    }\n\n    /**\n     * @name setUpOnBlurSubscriber\n     */\n    private setUpOnBlurSubscriber(): void {\n        const filterFn = (): boolean => {\n            const isVisible = this.dropdown && this.dropdown.isVisible;\n            return !isVisible && !!this.formValue;\n        };\n\n        this.inputForm\n            .onBlur\n            .pipe(\n                debounceTime(100),\n                filter(filterFn)\n            )\n            .subscribe(() => {\n                const reset = () => this.setInputValue('');\n\n                if (this.addOnBlur) {\n                    return this\n                        .onAddingRequested(false, this.formValue, undefined, true)\n                        .then(reset)\n                        .catch(reset);\n                }\n\n                reset();\n            });\n    }\n\n    /**\n     * @name findDupe\n     * @param tag\n     * @param isFromAutocomplete\n     */\n    private findDupe(tag: TagModel, isFromAutocomplete: boolean): TagModel | undefined {\n        const identifyBy = isFromAutocomplete ? this.dropdown.identifyBy : this.identifyBy;\n        const id = tag[identifyBy];\n\n        return this.items.find(item => this.getItemValue(item) === id);\n    }\n\n    /**\n     * @name onPasteCallback\n     * @param data\n     */\n    private onPasteCallback = async (data: ClipboardEvent) => {\n        interface IEWindow extends Window {\n            clipboardData: DataTransfer;\n        }\n\n        const getText = (): string => {\n            const isIE = Boolean((window as IEWindow & typeof globalThis).clipboardData);\n            const clipboardData = isIE ? (\n                (window as IEWindow & typeof globalThis).clipboardData\n            ) : data.clipboardData;\n            const type = isIE ? 'Text' : 'text/plain';\n            return clipboardData === null ? '' : clipboardData.getData(type) || '';\n        };\n\n        const text = getText();\n\n        const requests = text\n            .split(this.pasteSplitPattern)\n            .map(item => {\n                const tag = this.createTag(item);\n                this.setInputValue(tag[this.displayBy]);\n                return this.onAddingRequested(false, tag);\n            });\n\n        const resetInput = () => setTimeout(() => this.setInputValue(''), 50);\n\n        Promise.all(requests).then(() => {\n            this.onPaste.emit(text);\n            resetInput();\n        })\n            .catch(resetInput);\n    }\n\n    /**\n     * @name setAnimationMetadata\n     */\n    private setAnimationMetadata(): void {\n        this.animationMetadata = {\n            value: 'in',\n            params: { ...this.animationDuration }\n        };\n    }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'delete-icon',\n    templateUrl: './icon.html',\n    styleUrls: ['./icon.scss']\n})\nexport class DeleteIconComponent {}\n","import { NgModule } from '@angular/core';\nimport { ReactiveFormsModule, FormsModule, COMPOSITION_BUFFER_MODE } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { Ng2DropdownModule } from 'ng2-material-dropdown';\nimport { HighlightPipe } from './core/pipes/highlight.pipe';\nimport { DragProvider } from './core/providers/drag-provider';\nimport { OptionsProvider, Options } from './core/providers/options-provider';\nimport { TagInputComponent } from './components/tag-input/tag-input';\nimport { DeleteIconComponent } from './components/icon/icon';\nimport { TagInputForm } from './components/tag-input-form/tag-input-form.component';\nimport { TagComponent } from './components/tag/tag.component';\nimport { TagInputDropdown } from './components/dropdown/tag-input-dropdown.component';\nimport { TagRipple } from './components/tag/tag-ripple.component';\n\nconst optionsProvider = new OptionsProvider();\n\n@NgModule({\n    imports: [\n        CommonModule,\n        ReactiveFormsModule,\n        FormsModule,\n        Ng2DropdownModule\n    ],\n    declarations: [\n        TagInputComponent,\n        DeleteIconComponent,\n        TagInputForm,\n        TagComponent,\n        HighlightPipe,\n        TagInputDropdown,\n        TagRipple\n    ],\n    exports: [\n        TagInputComponent,\n        DeleteIconComponent,\n        TagInputForm,\n        TagComponent,\n        HighlightPipe,\n        TagInputDropdown,\n        TagRipple\n    ],\n    providers: [\n        DragProvider,\n        { provide: COMPOSITION_BUFFER_MODE, useValue: false },\n    ]\n})\nexport class TagInputModule {\n    /**\n     * @name withDefaults\n     * @param options {Options}\n     */\n    public static withDefaults(options: Options): void {\n        optionsProvider.setOptions(options);\n    }\n}\n"]}